<!DOCTYPE html>
<html lang="en" typeof="bibo:Document " prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <meta lang="" property="dc:language" content="en">
  <style>
    /*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
    
    .hljs {
      display: block;
      overflow-x: auto;
      padding: 0.5em;
      color: #333;
      background: #f8f8f8;
    }
    
    .hljs-comment,
    .hljs-quote {
      color: #998;
      font-style: italic;
    }
    
    .hljs-keyword,
    .hljs-selector-tag,
    .hljs-subst {
      color: #333;
      font-weight: bold;
    }
    
    .hljs-number,
    .hljs-literal,
    .hljs-variable,
    .hljs-template-variable,
    .hljs-tag .hljs-attr {
      color: #008080;
    }
    
    .hljs-string,
    .hljs-doctag {
      color: #d14;
    }
    
    .hljs-title,
    .hljs-section,
    .hljs-selector-id {
      color: #900;
      font-weight: bold;
    }
    
    .hljs-subst {
      font-weight: normal;
    }
    
    .hljs-type,
    .hljs-class .hljs-title {
      color: #458;
      font-weight: bold;
    }
    
    .hljs-tag,
    .hljs-name,
    .hljs-attribute {
      color: #000080;
      font-weight: normal;
    }
    
    .hljs-regexp,
    .hljs-link {
      color: #009926;
    }
    
    .hljs-symbol,
    .hljs-bullet {
      color: #990073;
    }
    
    .hljs-built_in,
    .hljs-builtin-name {
      color: #0086b3;
    }
    
    .hljs-meta {
      color: #999;
      font-weight: bold;
    }
    
    .hljs-deletion {
      background: #fdd;
    }
    
    .hljs-addition {
      background: #dfd;
    }
    
    .hljs-emphasis {
      font-style: italic;
    }
    
    .hljs-strong {
      font-weight: bold;
    }
  </style>
  <style>
    /* --- EXAMPLES --- */
    
    div.example-title {
      min-width: 7.5em;
      color: #b9ab2d;
    }
    
    div.example-title span {
      text-transform: uppercase;
    }
    
    aside.example,
    div.example,
    div.illegal-example {
      padding: 0.5em;
      margin: 1em 0;
      position: relative;
      clear: both;
    }
    
    div.illegal-example {
      color: red
    }
    
    div.illegal-example p {
      color: black
    }
    
    aside.example,
    div.example {
      padding: .5em;
      border-left-width: .5em;
      border-left-style: solid;
      border-color: #e0cb52;
      background: #fcfaee;
    }
    
    aside.example div.example {
      border-left-width: .1em;
      border-color: #999;
      background: #fff;
    }
    
    aside.example div.example div.example-title {
      color: #999;
    }
  </style>
  <style>
    /* --- ISSUES/NOTES --- */
    
    div.issue-title,
    div.note-title,
    div.ednote-title,
    div.warning-title {
      padding-right: 1em;
      min-width: 7.5em;
      color: #b9ab2d;
    }
    
    div.issue-title {
      color: #e05252;
    }
    
    div.note-title,
    div.ednote-title {
      color: #2b2;
    }
    
    div.warning-title {
      color: #f22;
    }
    
    div.issue-title span,
    div.note-title span,
    div.ednote-title span,
    div.warning-title span {
      text-transform: uppercase;
    }
    
    div.note,
    div.issue,
    div.ednote,
    div.warning {
      margin-top: 1em;
      margin-bottom: 1em;
    }
    
    .note>p:first-child,
    .ednote>p:first-child,
    .issue>p:first-child,
    .warning>p:first-child {
      margin-top: 0
    }
    
    .issue,
    .note,
    .ednote,
    .warning {
      padding: .5em;
      border-left-width: .5em;
      border-left-style: solid;
    }
    
    div.issue,
    div.note,
    div.ednote,
    div.warning {
      padding: 1em 1.2em 0.5em;
      margin: 1em 0;
      position: relative;
      clear: both;
    }
    
    span.note,
    span.ednote,
    span.issue,
    span.warning {
      padding: .1em .5em .15em;
    }
    
    .issue {
      border-color: #e05252;
      background: #fbe9e9;
    }
    
    .note,
    .ednote {
      border-color: #52e052;
      background: #e9fbe9;
    }
    
    .warning {
      border-color: #f11;
      border-width: .2em;
      border-style: solid;
      background: #fbe9e9;
    }
    
    .warning-title:before {
      content: "‚ö†";
      /*U+26A0 WARNING SIGN*/
      font-size: 3em;
      float: left;
      height: 100%;
      padding-right: .3em;
      vertical-align: top;
      margin-top: -0.5em;
    }
    
    li.task-list-item {
      list-style: none;
    }
    
    input.task-list-item-checkbox {
      margin: 0 0.35em 0.25em -1.6em;
      vertical-align: middle;
    }
  </style>
  <style>
    /* --- WEB IDL --- */
    
    pre.idl {
      border-top: 1px solid #90b8de;
      border-bottom: 1px solid #90b8de;
      padding: 1em;
      line-height: 120%;
    }
    
    .respec-idl-separator {
      display: block;
      padding: 0 0 0.4cm 0;
    }
    
    .respec-idl-separator:last-child {
      padding: 0;
    }
    
    @media print {
      pre.idl {
        white-space: pre-wrap;
      }
    }
    
    pre.idl::before {
      content: "WebIDL";
      display: block;
      width: 150px;
      background: #90b8de;
      color: #fff;
      font-family: sans-serif;
      padding: 3px;
      font-weight: bold;
      margin: -1em 0 1em -1em;
    }
    
    .idlType {
      color: #ff4500;
      font-weight: bold;
      text-decoration: none;
    }
    /*.idlModule*/
    /*.idlModuleID*/
    /*.idlInterface*/
    
    .idlInterfaceID,
    .idlDictionaryID,
    .idlCallbackID,
    .idlEnumID {
      font-weight: bold;
      color: #005a9c;
    }
    
    a.idlEnumItem {
      color: #000;
      border-bottom: 1px dotted #ccc;
      text-decoration: none;
    }
    
    .idlSuperclass {
      font-style: italic;
      color: #005a9c;
    }
    /*.idlAttribute*/
    
    .idlAttrType,
    .idlFieldType,
    .idlMemberType {
      color: #005a9c;
    }
    
    .idlAttrName,
    .idlFieldName,
    .idlMemberName {
      color: #ff4500;
    }
    
    .idlAttrName a,
    .idlFieldName a,
    .idlMemberName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlMethod*/
    
    .idlMethType,
    .idlCallbackType {
      color: #005a9c;
    }
    
    .idlMethName {
      color: #ff4500;
    }
    
    .idlMethName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlCtor*/
    
    .idlCtorName {
      color: #ff4500;
    }
    
    .idlCtorName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlParam*/
    
    .idlParamType {
      color: #005a9c;
    }
    
    .idlParamName,
    .idlDefaultValue {
      font-style: italic;
    }
    
    .extAttr {
      color: #666;
    }
    /*.idlSectionComment*/
    
    .idlSectionComment {
      color: gray;
    }
    /*.idlIterable*/
    
    .idlIterableKeyType,
    .idlIterableValueType {
      color: #005a9c;
    }
    /*.idlMaplike*/
    
    .idlMaplikeKeyType,
    .idlMaplikeValueType {
      color: #005a9c;
    }
    /*.idlConst*/
    
    .idlConstType {
      color: #005a9c;
    }
    
    .idlConstName {
      color: #ff4500;
    }
    
    .idlConstName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlException*/
    
    .idlExceptionID {
      font-weight: bold;
      color: #c00;
    }
    
    .idlTypedefID,
    .idlTypedefType {
      color: #005a9c;
    }
    
    .idlRaises,
    .idlRaises a.idlType,
    .idlRaises a.idlType code,
    .excName a,
    .excName a code {
      color: #c00;
      font-weight: normal;
    }
    
    .excName a {
      font-family: monospace;
    }
    
    .idlRaises a.idlType,
    .excName a.idlType {
      border-bottom: 1px dotted #c00;
    }
    
    .excGetSetTrue,
    .excGetSetFalse,
    .prmNullTrue,
    .prmNullFalse,
    .prmOptTrue,
    .prmOptFalse {
      width: 45px;
      text-align: center;
    }
    
    .excGetSetTrue,
    .prmNullTrue,
    .prmOptTrue {
      color: #0c0;
    }
    
    .excGetSetFalse,
    .prmNullFalse,
    .prmOptFalse {
      color: #c00;
    }
    
    .idlImplements a {
      font-weight: bold;
    }
    
    dl.attributes,
    dl.methods,
    dl.constants,
    dl.constructors,
    dl.fields,
    dl.dictionary-members {
      margin-left: 2em;
    }
    
    .attributes dt,
    .methods dt,
    .constants dt,
    .constructors dt,
    .fields dt,
    .dictionary-members dt {
      font-weight: normal;
    }
    
    .attributes dt code,
    .methods dt code,
    .constants dt code,
    .constructors dt code,
    .fields dt code,
    .dictionary-members dt code {
      font-weight: bold;
      color: #000;
      font-family: monospace;
    }
    
    .attributes dt code,
    .fields dt code,
    .dictionary-members dt code {
      background: #ffffd2;
    }
    
    .attributes dt .idlAttrType code,
    .fields dt .idlFieldType code,
    .dictionary-members dt .idlMemberType code {
      color: #005a9c;
      background: transparent;
      font-family: inherit;
      font-weight: normal;
      font-style: italic;
    }
    
    .methods dt code {
      background: #d9e6f8;
    }
    
    .constants dt code {
      background: #ddffd2;
    }
    
    .constructors dt code {
      background: #cfc;
    }
    
    .attributes dd,
    .methods dd,
    .constants dd,
    .constructors dd,
    .fields dd,
    .dictionary-members dd {
      margin-bottom: 1em;
    }
    
    table.parameters,
    table.exceptions {
      border-spacing: 0;
      border-collapse: collapse;
      margin: 0.5em 0;
      width: 100%;
    }
    
    table.parameters {
      border-bottom: 1px solid #90b8de;
    }
    
    table.exceptions {
      border-bottom: 1px solid #deb890;
    }
    
    .parameters th,
    .exceptions th {
      color: inherit;
      padding: 3px 5px;
      text-align: left;
      font-weight: normal;
    }
    
    .parameters th {
      color: #fff;
      background: #005a9c;
    }
    
    .exceptions th {
      background: #deb890;
    }
    
    .parameters td,
    .exceptions td {
      padding: 3px 10px;
      border-top: 1px solid #ddd;
      vertical-align: top;
    }
    
    .parameters tr:first-child td,
    .exceptions tr:first-child td {
      border-top: none;
    }
    
    .parameters td.prmName,
    .exceptions td.excName,
    .exceptions td.excCodeName {
      width: 100px;
    }
    
    .parameters td.prmType {
      width: 120px;
    }
    
    table.exceptions table {
      border-spacing: 0;
      border-collapse: collapse;
      width: 100%;
    }
  </style>


  <title>Shape Expressions Language 2.0</title>
  <!-- link rel="stylesheet" href="css/wgio.min.css"/ ask Iovka -->
  <link rel="stylesheet" href="local.css">


  <!-- script src='../primer/respec-w3c-common.js' async class='remove'></script -->
  <script src="jquery-2.1.4.min.js" type="text/javascript"></script>



  <script type="text/javascript" src="scripts.js"></script>
  <style id="respec-mainstyle">
    /*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/
    /* Override code highlighter background */
    
    .hljs {
      background: transparent !important;
    }
    /* --- INLINES --- */
    
    em.rfc2119 {
      text-transform: lowercase;
      font-style: normal;
      color: #900;
    }
    
    h1 acronym,
    h2 acronym,
    h3 acronym,
    h4 acronym,
    h5 acronym,
    h6 acronym,
    a acronym,
    h1 abbr,
    h2 abbr,
    h3 abbr,
    h4 abbr,
    h5 abbr,
    h6 abbr,
    a abbr {
      border: none;
    }
    
    dfn {
      font-weight: bold;
    }
    
    a.internalDFN {
      color: inherit;
      border-bottom: 1px solid #99c;
      text-decoration: none;
    }
    
    a.externalDFN {
      color: inherit;
      border-bottom: 1px dotted #ccc;
      text-decoration: none;
    }
    
    a.bibref {
      text-decoration: none;
    }
    
    cite .bibref {
      font-style: normal;
    }
    
    code {
      color: #C83500;
    }
    
    th code {
      color: inherit;
    }
    /* --- TOC --- */
    
    .toc a,
    .tof a {
      text-decoration: none;
    }
    
    a .secno,
    a .figno {
      color: #000;
    }
    
    ul.tof,
    ol.tof {
      list-style: none outside none;
    }
    
    .caption {
      margin-top: 0.5em;
      font-style: italic;
    }
    /* --- TABLE --- */
    
    table.simple {
      border-spacing: 0;
      border-collapse: collapse;
      border-bottom: 3px solid #005a9c;
    }
    
    .simple th {
      background: #005a9c;
      color: #fff;
      padding: 3px 5px;
      text-align: left;
    }
    
    .simple th[scope="row"] {
      background: inherit;
      color: inherit;
      border-top: 1px solid #ddd;
    }
    
    .simple td {
      padding: 3px 10px;
      border-top: 1px solid #ddd;
    }
    
    .simple tr:nth-child(even) {
      background: #f0f6ff;
    }
    /* --- DL --- */
    
    .section dd>p:first-child {
      margin-top: 0;
    }
    
    .section dd>p:last-child {
      margin-bottom: 0;
    }
    
    .section dd {
      margin-bottom: 1em;
    }
    
    .section dl.attrs dd,
    .section dl.eldef dd {
      margin-bottom: 0;
    }
    
    #respec-ui {
      position: fixed;
      display: flex;
      flex-direction: row-reverse;
      top: 20px;
      right: 20px;
      width: 202px;
      text-align: right;
    }
    
    #respec-pill,
    .respec-info-button {
      background: #fff;
      height: 2.5em;
      color: rgb(120, 120, 120);
      border: 1px solid #ccc;
      box-shadow: 1px 1px 8px 0 rgba(100, 100, 100, .5);
    }
    
    .respec-info-button {
      border: none;
      opacity: .5;
      border-radius: 2em;
      margin-right: 1em;
      min-width: 3.5em;
    }
    
    .respec-info-button:focus {
      opacity: 1;
      transition: opacity .2s;
    }
    
    #respec-pill:disabled {
      font-size: 2.8px;
      text-indent: -9999em;
      border-top: 1.1em solid rgba(40, 40, 40, 0.2);
      border-right: 1.1em solid rgba(40, 40, 40, 0.2);
      border-bottom: 1.1em solid rgba(40, 40, 40, 0.2);
      border-left: 1.1em solid #ffffff;
      transform: translateZ(0);
      animation: respec-spin .5s infinite linear;
      box-shadow: none;
    }
    
    #respec-pill:disabled,
    #respec-pill:disabled:after {
      border-radius: 50%;
      width: 10em;
      height: 10em;
    }
    
    @keyframes respec-spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    
    #respec-pill:hover,
    #respec-pill:focus {
      color: rgb(0, 0, 0);
      background-color: rgb(245, 245, 245);
      transition: color .2s;
    }
    
    #respec-menu {
      position: absolute;
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background: #fff;
      box-shadow: 1px 1px 8px 0 rgba(100, 100, 100, .5);
      width: 200px;
      display: none;
      text-align: left;
      margin-top: 32px;
      font-size: .8em;
    }
    
    #respec-menu li {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }
    
    .respec-save-button {
      background: #fff;
      border: 1px solid #000;
      border-radius: 5px;
      padding: 5px;
      margin: 5px;
      display: block;
      width: 100%;
      color: #000;
      text-decoration: none;
      text-align: center;
      font-size: inherit;
    }
    
    #respec-ui button:focus,
    #respec-pill:focus,
    .respec-option:focus {
      outline: 0;
      outline-style: none;
    }
    
    #respec-pill-error {
      background-color: red;
      color: white;
    }
    
    #respec-pill-warning {
      background-color: orange;
      color: white;
    }
    
    .respec-warning-list,
    .respec-error-list {
      margin: 0;
      padding: 0;
      list-style: none;
      font-family: sans-serif;
      background-color: rgb(255, 251, 230);
      font-size: .9em;
    }
    
    .respec-warning-list li,
    .respec-error-list li {
      padding: 0.4em 0.7em;
    }
    
    .respec-warning-list li::before {
      content: "‚ö†Ô∏è";
      padding-right: .5em;
    }
    
    .respec-warning-list li {
      color: rgb(92, 59, 0);
      border-bottom: thin solid rgb(255, 245, 194);
    }
    
    .respec-error-list,
    .respec-error-list li {
      background-color: rgb(255, 240, 240);
    }
    
    .respec-error-list li::before {
      content: "üí•";
      padding-right: .5em;
    }
    
    .respec-error-list li {
      padding: 0.4em 0.7em;
      color: rgb(92, 59, 0);
      border-bottom: thin solid rgb(255, 215, 215);
    }
    
    #respec-overlay {
      display: block;
      opacity: 0;
      position: fixed;
      z-index: 10000;
      top: 0px;
      left: 0px;
      height: 100%;
      width: 100%;
      background: #000;
    }
    
    .respec-modal {
      display: block;
      position: fixed;
      opacity: 0;
      z-index: 11000;
      margin: auto;
      top: 10%;
      background: #fff;
      border: 5px solid #666;
      min-width: 20%;
      width: 85%;
      padding: 0;
      max-height: 80%;
      overflow-y: auto;
      margin: 0 -.5cm
    }
    
    @media screen and (min-width: 78em) {
      .respec-modal {
        width: 64%;
      }
    }
    
    .respec-modal h3 {
      margin: 0;
      padding: .2em;
      text-align: center;
      color: black;
      background: linear-gradient(to bottom, rgba(238, 238, 238, 1) 0%, rgba(238, 238, 238, 1) 50%, rgba(204, 204, 204, 1) 100%);
      font-size: 1em;
    }
    
    .respec-modal .inside p {
      padding-left: 1cm;
    }
    
    #respec-menu button.respec-option {
      background: white;
      padding: 0 .2cm;
      border: none;
      width: 100%;
      text-align: left;
      font-size: inherit;
      padding: 1.2em 1.2em;
    }
    
    #respec-menu button.respec-option:hover,
    #respec-menu button:focus {
      background-color: #eeeeee;
    }
    
    .respec-cmd-icon {
      padding-right: .5em;
    }
    
    #respec-ui button.respec-option:last-child {
      border: none;
      border-radius: inherit;
    }
    
    .respec-offending-element {
      display: inline-block;
      position: relative;
      background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x;
    }
    
    @supports (text-decoration-style: wavy) {
      .respec-offending-element {
        background: none;
        text-decoration-line: underline;
        text-decoration-style: wavy;
        text-decoration-color: red;
      }
    }
    
    #issue-summary>ul,
    .respec-dfn-list {
      column-count: 2;
    }
    
    #issue-summary li,
    .respec-dfn-list li {
      list-style: none;
    }
    
    @media print {
      .removeOnSave {
        display: none;
      }
    }
  </style>
  <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/cg-draft">
  <link rel="canonical" href="https://www.w3.org/TR/shex-semantics/">
  <meta name="generator" content="ReSpec 11.2.1">
  <script id="initialUserConfig" type="application/json">
    {
      "localBiblio":
      {
        "shex-vocab":
        {
          "authors": [
            "Gregg Kellogg"
          ],
          "title": "Shape Expression Vocabulary",
          "href": "http://www.w3.org/ns/shex#"
        }
      },
      "specStatus": "CG-DRAFT",
      "shortName": "shex-semantics",
      "latestVersion": "https://shex.io/shex-semantics/",
      "thisVersion": "https://shex.io/shex-semantics-20170327",
      "prevVersion": "https://www.w3.org/Submission/2014/SUBM-shex-defn-20140602/",
      "edDraftURI": "https://shexspec.github.io/spec/",
      "previousPublishDate": "2014-06-02",
      "previousMaturity": "Member-SUBM",
      "testSuiteURI": "https://github.com/shexSpec/shexTest",
      "issueBase": "https://github.com/shexSpec/shex/issues",
      "githubAPI": "https://api.github.com/repos/shexSpec/shex",
      "editors": [
      {
        "name": "Eric Prud'hommeaux",
        "url": "http://www.w3.org/People/Eric/",
        "company": "W3C/MIT",
        "companyURL": "http://www.w3.org/"
      },
      {
        "name": "Iovka Boneva",
        "url": "http://cristal.univ-lille.fr/~boneva/",
        "company": "University of Lille",
        "companyURL": "http://www.univ-lille1.fr/"
      },
      {
        "name": "Jose Labra Gayo",
        "url": "http://di002.edv.uniovi.es/~labra/",
        "company": "University of Oviedo",
        "companyURL": "http://www.uniovi.es/"
      },
      {
        "name": "Gregg Kellogg",
        "url": "http://greggkellogg.net/",
        "company": "Spec-Ops",
        "companyURL": "https://spec-ops.io/",
        "w3cid": "44770"
      }],
      "wg": "Shape Expressions Community Group",
      "wgURI": "https://shexspec.github.io",
      "wgPublicList": "public-shex",
      "bugTracker":
      {
        "open": "https://github.com/shexSpec/shex/issues",
        "new": "https://github.com/shexSpec/shex/issues/new"
      },
      "otherLinks": [
      {
        "key": "Version control",
        "data": [
        {
          "value": "Github Repository",
          "href": "https://github.com/shexSpec/spec"
        }]
      }]
    }
  </script>
</head>

<body aria-busy="false" class="h-entry toc-inline" id="respecDocument">
  <div class="head" role="contentinfo" id="respecHeader">
    <p>
      <a class="logo" href="https://www.w3.org/"><img width="72" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C"></a>
    </p>
    <h1 class="title p-name" id="title" property="dc:title">Shape Expressions Language 2.0</h1>
    <h2 id="draft-community-group-report-27-march-2017">Draft Community Group Report <time property="dc:issued" class="dt-published" datetime="2017-03-27">27 March 2017</time></h2>
    <dl>
      <dt>This version:</dt>
      <dd><a class="u-url" href="https://shex.io/shex-semantics-20170327">https://shex.io/shex-semantics-20170327</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="https://shex.io/shex-semantics/">https://shex.io/shex-semantics/</a></dd>
      <dt>Latest editor's draft:</dt>
      <dd><a href="https://shexspec.github.io/spec/">https://shexspec.github.io/spec/</a></dd>
      <dt>Test suite:</dt>
      <dd><a href="https://github.com/shexSpec/shexTest">https://github.com/shexSpec/shexTest</a></dd>
      <dt>Bug tracker:</dt>
      <dd><a href="https://github.com/shexSpec/shex/issues/new">file a bug</a> (<a href="https://github.com/shexSpec/shex/issues">open bugs</a>)</dd>
      <dt>Previous version:</dt>
      <dd><a rel="dcterms:replaces" href="https://www.w3.org/Submission/2014/SUBM-shex-defn-20140602/">https://www.w3.org/Submission/2014/SUBM-shex-defn-20140602/</a></dd>
      <dt>Editors:</dt>
      <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="Eric Prud" hommeaux'=""><a class="u-url url p-name fn" property="foaf:homepage" href="http://www.w3.org/People/Eric/">Eric Prud'hommeaux</a>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://www.w3.org/">W3C/MIT</a></span>
        <span property="rdf:rest" resource="_:editor1"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor1"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="Iovka Boneva"><a class="u-url url p-name fn" property="foaf:homepage" href="http://cristal.univ-lille.fr/~boneva/">Iovka Boneva</a>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://www.univ-lille1.fr/">University of Lille</a></span>
        <span property="rdf:rest" resource="_:editor2"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor2"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="Jose Labra Gayo"><a class="u-url url p-name fn" property="foaf:homepage" href="http://di002.edv.uniovi.es/~labra/">Jose Labra Gayo</a>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://www.uniovi.es/">University of Oviedo</a></span>
        <span property="rdf:rest" resource="_:editor3"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor3" data-editor-id="44770"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="Gregg Kellogg"><a class="u-url url p-name fn" property="foaf:homepage" href="http://greggkellogg.net/">Gregg Kellogg</a>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://spec-ops.io/">Spec-Ops</a></span>
        <span property="rdf:rest" resource="rdf:nil"></span>
      </dd>

      <dt>Version control:</dt>
      <dd>
        <a href="https://github.com/shexSpec/spec">
                      Github Repository
                    </a>
      </dd>
    </dl>
    <p class="copyright">
      <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ¬© 2017 the Contributors to the Shape Expressions Language 2.0 Specification, published by the
      <a href="https://shexspec.github.io">Shape Expressions Community Group</a> under the
      <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.
    </p>
    <hr title="Separator for header">
  </div>

  <section id="abstract" class="introductory" property="dc:abstract">
    <h2 id="h-abstract" resource="#h-abstract"><span property="xhv:role" resource="xhv:heading">Abstract</span></h2>
    <p>
      The Shape Expressions (ShEx) language describes <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">RDF nodes</a> and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">graph</a> structures. A <span class="math">node constraint</span> describes an RDF node (<a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a>) and a <span class="math">shape</span> describes the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triples</a> involving nodes in an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a>. These descriptions identify <a data-lt="predicate" href="#dfn-predicates" class="internalDFN" data-link-type="dfn">predicates</a> and their associated cardinalities and datatypes. ShEx shapes can be used to communicate data structures associated with some process or interface, generate or validate data, or drive user interfaces.
    </p>
    <p>
      This document defines the ShEx language. See the <a href="../primer/index.html">Shape Expressions Primer</a> for a non-normative description of ShEx.
    </p>
  </section>

  <section id="sotd" class="introductory">
    <h2 id="h-sotd" resource="#h-sotd"><span property="xhv:role" resource="xhv:heading">Status of This Document</span></h2>
    <p>
      This specification was published by the <a href="https://shexspec.github.io">Shape Expressions Community Group</a>. It is not a W3C Standard nor is it on the W3C Standards Track. Please note that under the
      <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply. Learn more about
      <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>.
    </p>

    <p>This document has been developed by the
      <a href="https://www.w3.org/community/shex/">Shape Expressions Community Group</a>. The specification has undergone significant development since the 1.0 version.</p>

    <p>This version of the document represents a Candidate Release, with stable features. Comments and implementations are solicited prior to an eventual Final 2.0 Release.</p>

    <p>The Shape Expressions language is expected to remain stable with the exception of:</p>
    <ul>
      <li>addition of a UNIQUE function</li>
    </ul>

    <p>If you wish to make comments regarding this document, please send them to
      <a href="mailto:public-shex@w3.org">public-shex@w3.org</a> (<a href="mailto:public-shex-request@w3.org?subject=subscribe">subscribe</a>,
      <a href="https://lists.w3.org/Archives/Public/public-shex/">archives</a>).</p>
  </section>
  <nav id="toc">
    <h2 class="introductory" id="table-of-contents" resource="#table-of-contents"><span property="xhv:role" resource="xhv:heading">Table of Contents</span></h2>
    <ol class="toc" role="directory">
      <li class="tocline"><a href="#introduction" class="tocxref"><span class="secno">1. </span>Introduction</a></li>
      <li class="tocline"><a href="#notation" class="tocxref"><span class="secno">2. </span>Notation</a>
        <ol class="toc">
          <li class="tocline"><a href="#shex-references" class="tocxref"><span class="secno">2.1 </span>References</a></li>
          <li class="tocline"><a href="#style" class="tocxref"><span class="secno">2.2 </span>Document style</a></li>
          <li class="tocline"><a href="#graphAccess" class="tocxref"><span class="secno">2.3 </span>Graph access</a></li>
          <li class="tocline"><a href="#results" class="tocxref"><span class="secno">2.4 </span>Results</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#terminology" class="tocxref"><span class="secno">3. </span>Terminology</a></li>
      <li class="tocline"><a href="#conformance" class="tocxref"><span class="secno">4. </span>Conformance</a></li>
      <li class="tocline"><a href="#shapes-language" class="tocxref"><span class="secno">5. </span>The Shape Expressions Language</a>
        <ol class="toc">
          <li class="tocline"><a href="#shapes-schema" class="tocxref"><span class="secno">5.1 </span>Shapes Schema</a></li>
          <li class="tocline"><a href="#shape-map" class="tocxref"><span class="secno">5.2 </span>ShapeMap Definition</a></li>
          <li class="tocline"><a href="#shape-expressions" class="tocxref"><span class="secno">5.3 </span>Shape Expressions</a>
            <ol class="toc">
              <li class="tocline"><a href="#shape-expressions-shexj" class="tocxref"><span class="secno">5.3.1 </span>JSON Syntax</a></li>
              <li class="tocline"><a href="#shape-expression-semantics" class="tocxref"><span class="secno">5.3.2 </span>Semantics</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#node-constraints" class="tocxref"><span class="secno">5.4 </span>Node Constraints</a>
            <ol class="toc">
              <li class="tocline"><a href="#node-constraint-semantics" class="tocxref"><span class="secno">5.4.1 </span>Semantics</a></li>
              <li class="tocline"><a href="#nodeKind" class="tocxref"><span class="secno">5.4.2 </span>Node Kind Constraints</a></li>
              <li class="tocline"><a href="#datatype" class="tocxref"><span class="secno">5.4.3 </span>Datatype Constraints</a></li>
              <li class="tocline"><a href="#xs-string" class="tocxref"><span class="secno">5.4.4 </span>XML Schema String Facet Constraints</a></li>
              <li class="tocline"><a href="#xs-numeric" class="tocxref"><span class="secno">5.4.5 </span>XML Schema Numeric Facet Constraints</a></li>
              <li class="tocline"><a href="#values" class="tocxref"><span class="secno">5.4.6 </span>Values Constraint</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#shapes-and-TEs" class="tocxref"><span class="secno">5.5 </span>Shapes and Triple Expressions</a>
            <ol class="toc">
              <li class="tocline"><a href="#triple-expressions-abstract-syntax" class="tocxref"><span class="secno">5.5.1 </span>JSON Syntax</a></li>
              <li class="tocline"><a href="#triple-expressions-semantics" class="tocxref"><span class="secno">5.5.2 </span>Semantics</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#schema-requirements" class="tocxref"><span class="secno">5.6 </span>Schema Requirements</a>
            <ol class="toc">
              <li class="tocline"><a href="#validation-requirement" class="tocxref"><span class="secno">5.6.1 </span>Schema Validation Requirement</a></li>
              <li class="tocline"><a href="#shapeExprRef-requirement" class="tocxref"><span class="secno">5.6.2 </span>Shape Expression Reference Requirement</a></li>
              <li class="tocline"><a href="#tripleExprRef-requirement" class="tocxref"><span class="secno">5.6.3 </span>Triple Expression Reference Requirement</a></li>
              <li class="tocline"><a href="#negation-requirement" class="tocxref"><span class="secno">5.6.4 </span>Negation Requirement</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#semantic-actions" class="tocxref"><span class="secno">5.7 </span>Semantic Actions</a>
            <ol class="toc">
              <li class="tocline"><a href="#semantic-actions-semantics" class="tocxref"><span class="secno">5.7.1 </span>Semantics</a></li>
              <li class="tocline"><a href="#semantic-actions-uses" class="tocxref"><span class="secno">5.7.2 </span>Use - informative</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#annotations" class="tocxref"><span class="secno">5.8 </span>Annotations</a>
            <ol class="toc">
              <li class="tocline"><a href="#annotations-semantics" class="tocxref"><span class="secno">5.8.1 </span>Semantics - informative</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#validation-examples" class="tocxref"><span class="secno">5.9 </span>Validation Examples</a>
            <ol class="toc">
              <li class="tocline"><a href="#example-simple" class="tocxref"><span class="secno">5.9.1 </span>Simple Examples</a></li>
              <li class="tocline"><a href="#example-disjunction" class="tocxref"><span class="secno">5.9.2 </span>Disjunction Example</a></li>
              <li class="tocline"><a href="#example-dependent-shape" class="tocxref"><span class="secno">5.9.3 </span>Dependent Shape Example</a></li>
              <li class="tocline"><a href="#example-recursion" class="tocxref"><span class="secno">5.9.4 </span>Recursion Example</a></li>
              <li class="tocline"><a href="#example-simple-repeated-property" class="tocxref"><span class="secno">5.9.5 </span>Simple Repeated Property Examples</a></li>
              <li class="tocline"><a href="#example-repeated-property-with-dependent-shapes" class="tocxref"><span class="secno">5.9.6 </span>Repeated Property With Dependent Shapes Example</a></li>
              <li class="tocline"><a href="#example-negation" class="tocxref"><span class="secno">5.9.7 </span>Negation Example</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li class="tocline"><a href="#shexc" class="tocxref"><span class="secno">6. </span>ShEx Compact syntax (ShExC)</a>
        <ol class="toc">
          <li class="tocline"><a href="#compilation-example" class="tocxref"><span class="secno">6.1 </span>Examples of Compilating <span class="formerLink" data-link-type="dfn">ShExC</span> into <span class="formerLink" data-link-type="dfn">ShExJ</span></a>
            <ol class="toc">
              <li class="tocline"><a href="#compilation-example-closed-shape" class="tocxref"><span class="secno">6.1.1 </span>Closed shape expression</a></li>
              <li class="tocline"><a href="#translate-example-closed-with-extra" class="tocxref"><span class="secno">6.1.2 </span>Closed shape expression with EXTRA modifier</a></li>
              <li class="tocline"><a href="#compilation-example-non-closed-shape" class="tocxref"><span class="secno">6.1.3 </span>Non closed shape expression</a></li>
              <li class="tocline"><a href="#compilation-example-conjunctive-shape" class="tocxref"><span class="secno">6.1.4 </span>Complex shape definition</a></li>
              <li class="tocline"><a href="#compilation-example-negated-triple-constraint" class="tocxref"><span class="secno">6.1.5 </span>Negated triple expression</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li class="tocline"><a href="#the-application-programming-interface" class="tocxref"><span class="secno">A. </span>The Application Programming Interface</a>
        <ol class="toc">
          <li class="tocline"><a href="#the-shexprocessor-interface" class="tocxref"><span class="secno">A.1 </span>The <span data-dfn-for="" data-dfn-type="dfn" data-idl="" data-title="ShExProcessor"><code>ShExProcessor</code></span> Interface</a></li>
          <li class="tocline"><a href="#the-rdfgraph-type" class="tocxref"><span class="secno">A.2 </span>The RDFGraph Type</a></li>
          <li class="tocline"><a href="#the-shexoptions-type" class="tocxref"><span class="secno">A.3 </span>The ShExOptions Type</a></li>
          <li class="tocline"><a href="#the-shaperesults-type" class="tocxref"><span class="secno">A.4 </span>The ShapeResults Type</a></li>
          <li class="tocline"><a href="#error-handling" class="tocxref"><span class="secno">A.5 </span>Error Handling</a>
            <ol class="toc">
              <li class="tocline"><a href="#shexerror" class="tocxref"><span class="secno">A.5.1 </span>ShExError</a></li>
              <li class="tocline"><a href="#shexerrorcode" class="tocxref"><span class="secno">A.5.2 </span>ShExErrorCode</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li class="tocline"><a href="#shexj" class="tocxref"><span class="secno">B. </span>ShEx JSON Syntax (ShExJ)</a></li>
      <li class="tocline"><a href="#shexr" class="tocxref"><span class="secno">C. </span>ShEx Shape</a></li>
      <li class="tocline"><a href="#iana-considerations" class="tocxref"><span class="secno">D. </span>IANA Considerations</a></li>
      <li class="tocline"><a href="#security" class="tocxref"><span class="secno">E. </span>Security Considerations</a></li>
      <li class="tocline"><a href="#idl-index" class="tocxref"><span class="secno">F. </span>IDL Index</a></li>
      <li class="tocline"><a href="#references" class="tocxref"><span class="secno">G. </span>References</a>
        <ol class="toc">
          <li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">G.1 </span>Normative references</a></li>
          <li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">G.2 </span>Informative references</a></li>
        </ol>
      </li>
    </ol>
  </nav>



  <section id="introduction" typeof="bibo:Chapter" resource="#introduction" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-introduction" resource="#h-introduction"><span property="xhv:role" resource="xhv:heading"><span class="secno">1. </span>Introduction</span>
    </h2>
    <p>
      The Shape Expressions (<dfn data-dfn-type="dfn" id="dfn-shex">ShEx</dfn>) language provides a structural schema for RDF data. This can be used to document APIs or datasets, aid in development of API-conformant messages, minimize defensive programming, guide user interfaces, or anything else that involves a machine-readable description of data organization and typing requirements.
    </p>
    <p>
      ShEx describes <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a> structures as sets of potentially connected <a data-lt="shape" href="#dfn-shapes" class="internalDFN" data-link-type="dfn">Shapes</a>. These constrain the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">triples</a> involving nodes in an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a>.
      <code>Node Constraints</code> constrain RDF nodes by constraining their node kind (<a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">Literal</a>), enumerating permissible values in value sets, specifying their datatype, and constraining value ranges of Literals. Additionally, they constrain lexical forms of <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">Literals</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRIs</a> and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">labeled blank nodes</a>. Shape Expressions schemas share blank nodes with the constrained <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graphs</a> in the same way that graphs in <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">RDF datasets</a> [<cite><a class="bibref" href="#bib-rdf11-concepts">rdf11-concepts</a></cite>] share blank nodes.
    </p>
    <p>
      ShEx can be represented in JSON structures (<a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a>) or a compact syntax (<a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a>). The compact syntax is intended for human consumption; the JSON structure for machine processing. This document defines ShEx in terms of <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> and includes a <a href="#shexc">section on the ShEx Compact Syntax (ShEx)</a>.
    </p>
    <p>To understand the programatic interface described in this specification and how it is intended to operate in a programming environment, it is useful to have working knowledge of WebIDL [<cite><a class="bibref" href="#bib-WebIDL">WebIDL</a></cite>]. To understand how ShEx relates to RDF, it is helpful to be familiar with the basic RDF concepts [<cite><a class="bibref" href="#bib-RDF11-CONCEPTS">RDF11-CONCEPTS</a></cite>].</p>
  </section>

  <section id="notation" typeof="bibo:Chapter" resource="#notation" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-notation" resource="#h-notation"><span property="xhv:role" resource="xhv:heading"><span class="secno">2. </span>Notation</span>
    </h2>
    <p>
      The JSON[<cite><a class="bibref" href="#bib-rfc4627">rfc4627</a></cite>] Syntax serves as a serializable proxy for an abstract syntax. This specification uses a simple grammar to describe the set of JSON documents that can be interpreted as a ShEx schema.
    </p>
    <ul>
      <li>Typed data structures are represented as JSON objects:
        <span class="shexj">typeName { <a href="https://tools.ietf.org/html/rfc4627#section-2.2">member*</a> }</span><br>
        <a href="https://tools.ietf.org/html/rfc4627#section-2.2">RFC4627 Section 2.2</a> provides syntactic constraints for JSON ‚Äî this grammar constrains those to valid <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> constructs.
      </li>
      <li><code>typeName</code> is the name of the typed data structure. Types are referenced in the definitions of object members and in the definitions of the semantics for those data structures.</li>
      <li><code>member*</code> is a list of zero or more terminals or references to other typeExpressions.</li>
      <li><code>Terminals</code> are JSON strings and are indicated by all-caps, e.g. <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a>. For brevity, RDF nodes are represented as JSON strings composed as:
        <ul>
          <li><dfn data-dfn-type="dfn" id="dfn-iri"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a></dfn>: the lexical form of the IRI, e.g. <code class="json">"http://example.org/resource"</code></li>
          <li><dfn data-dfn-type="dfn" id="dfn-bnode"><a href="https://www.w3.org/TR/rdf11-concepts/#blank-node">BNODE</a></dfn>: the concatenation of "<code>_:</code>" and a <dfn data-dfn-type="dfn" id="dfn-blank-node-identifier"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier">blank node identifier</a></dfn>, e.g. <code class="json">"_:blank3"</code></li>
          <li><dfn data-dfn-type="dfn" id="dfn-literal"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">LITERAL</a></dfn>: the concatenation of a U+0022 ('<code>"</code>'), the lexical form of the literal, U+0022, and the first matching of:
            <ul>
              <li>literal with type <code>http://www.w3.org/2001/XMLSchema#string</code>: empty string, e.g. <code class="json">"abc"</code>.</li>
              <li><a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string">language-tagged string</a>: U+0040 ('<code>@</code>') and the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag">language tag</a>, e.g. <code class="json">"\"hello world\"@en-US"</code></li>
              <li>datatyped literal: U+005E U+005E ('<code>^^</code>') and the lexical form of the datatype URI, e.g. <code class="json">"\"123\"^^http://www.w3.org/2001/XMLSchema#integer"</code></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>A <code>typeExpression</code> is one of:
        <ul>
          <li><code>typeName</code> ‚Äî an object of corresponding type</li>
          <li><code>array</code>: <span class="shexj">[ typeExpression+ ]</span>‚Äî an array of one or more JSON values matching the typeExpression.</li>
          <li><code>choice</code>: <span class="shexj">typeExpression1 | typeExpression2 | ‚Ä¶</span>‚Äî a choice between two or more typeExressions.</li>
        </ul>
      </li>
      <li>Cardinalities are represented as by the strings <code>?</code>, <code>+</code>, <code>*</code> following the <a href="https://www.w3.org/TR/xml#sec-notation">notation in the XML specification</a>[<cite><a class="bibref" href="#bib-XML">XML</a></cite>] or <code>{m,}</code> to indicate a that at least <code>m</code> elements are required.</li>
    </ul>

    <p>
      Schemas with the marker "ùôÖ/c" in the corner can be converted between the JSON representation and the compact syntax by clicking the marker. Pressing "j" or "c" converts all such examples to the JSON or compact form. In the JSON notation,
    </p>

    <div class="shexj">
      <pre aria-busy="false" aria-live="polite" class="hljs css"><span class="hljs-selector-tag">Schema</span> { <span class="hljs-attribute">startActs</span>:[SemAct]? start:shapeExpr? shapes:[shapeExpr+]? }</pre>
    </div>
    <p>
      signifies that a <code>Schema</code> has three optional components called <a class="param internalDFN" href="#dfn-startacts" data-link-type="dfn">startActs</a>, <a class="param internalDFN" href="#dfn-start" data-link-type="dfn">start</a> and <a class="param internalDFN" href="#dfn-shapes" data-link-type="dfn">shapes</a>:
    </p>
    <ul>
      <li><dfn class="param" data-dfn-type="dfn" id="dfn-startacts">startActs</dfn> is a list of <a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>.</li>
      <li><dfn class="param" data-dfn-type="dfn" id="dfn-start">start</dfn> is a <a class="objref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>.</li>
      <li><dfn class="param" data-dfn-type="dfn" id="dfn-shapes">shapes</dfn> is an array of <a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>.</li>
    </ul>

    <div class="shexj">
      <pre aria-busy="false" aria-live="polite" class="hljs undefined">shapeExpr = ShapeOr | ShapeAnd | ShapeNot
            | NodeConstraint | Shape | ShapeExternal | shapeExprRef ;</pre>
    </div>
    <p>
      signifies that a <a href="#dfn-shapeexpr" class="internalDFN" data-link-type="dfn">shapeExpr</a> is one of seven object types: <a class="objref .shexj internalDFN" href="#dfn-shapeor" data-link-type="dfn">ShapeOr</a> | <a class="objref internalDFN" href="#dfn-shapeand" data-link-type="dfn">ShapeAnd</a> | ‚Ä¶.
    </p>

    <div class="shexj">
      <pre aria-busy="false" aria-live="polite" class="hljs javascript">NodeConstraint { <span class="hljs-attr">nodeKind</span>:(<span class="hljs-string">"iri"</span> | <span class="hljs-string">"bnode"</span> | <span class="hljs-string">"nonliteral"</span> | <span class="hljs-string">"literal"</span>)? xsFacet* }
       xsFacet = stringFacet | numericFacet ;</pre>
    </div>
    <p>
      signifies that a <code>NodeConstraint</code> has a <code class="param">nodeKind</code> of one of the four literals followed by any number of <a class="objref .shexj internalDFN" href="#dfn-xsfacet" data-link-type="dfn">xsFacet</a> and an <a class="objref .shexj internalDFN" href="#dfn-xsfacet" data-link-type="dfn">xsFacet</a> is either a <a class="objref .shexj internalDFN" href="#dfn-stringfacet" data-link-type="dfn">stringFacet</a> or a <a class="objref .shexj internalDFN" href="#dfn-numericfacet" data-link-type="dfn">numericFacet</a>.
    </p>

    <section id="shex-references" typeof="bibo:Chapter" resource="#shex-references" property="bibo:hasPart">
      <h3 id="h-shex-references" resource="#h-shex-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.1 </span>References</span>
      </h3>
      <p>
        <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> is a dialect of JSON-LD [<cite><a class="bibref" href="#bib-JSON-LD">JSON-LD</a></cite>] and the member <code>id</code> is used as a <a href="https://www.w3.org/TR/json-ld/#node-identifiers">node identifier</a>. An object may be represented inline or referenced by its <code>id</code> which may be either a <a href="#dfn-blank-node" class="internalDFN" data-link-type="dfn">blank node</a> or an <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>.
      </p>
      <div class="shexj">
        <pre aria-busy="false" aria-live="polite" class="hljs undefined"> ShapeOr         { id:shapeExprLabel? shapeExprs:[shapeExpr] }
 shapeExprLabel  = IRI | BNODE ;
 EachOf          { id:tripleExprLabel? expressions:[tripleExpr] ... }
 tripleExprLabel = IRI | BNODE ;</pre>
      </div>
      <p>
        The JSON structure may include references to <a data-lt="shape" href="#dfn-shapes" class="internalDFN" data-link-type="dfn">shapes</a> and <a href="#dfn-triples" class="internalDFN" data-link-type="dfn">triples</a>:
      </p>
      <div class="shexj">
        <pre aria-busy="false" aria-live="polite" class="hljs undefined"> shapeExpr     = ShapeOr | ... | shapeExprRef ;
 shapeExprRef  = shapeExprLabel ;
 tripleExpr    = EachOf | ... | tripleExprRef ;
 tripleExprRef = tripleExprLabel ;</pre>
      </div>
      <p>
        An object with a circular reference must be referenced by id. This example uses a nested shape reference on a value expression (<a data-lt="TripleConstraint" href="#dfn-tripleconstraint" class="internalDFN" data-link-type="dfn">defined below</a>).
      </p>
      <div class="json">
        <pre class="json hljs undefined" aria-busy="false" aria-live="polite">{ "type": "Schema", "shapes": [
    { "id": "http://schema.example/IssueShape",
      "type": "Shape", "expression": {
        "type": "TripleConstraint", "predicate": "http://schema.example/related",
        "valueExpr": "http://schema.example/IssueShape", min: 0 } } ] }</pre>
      </div>
    </section>

    <section id="style" typeof="bibo:Chapter" resource="#style" property="bibo:hasPart">
      <h3 id="h-style" resource="#h-style"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.2 </span>Document style</span>
      </h3>
      <p>
        JSON examples are rendered in a <span class="json">.json</span> CSS style. Partial examples include ranges in a <span class="comment">.comment</span> CSS style to indicate text which would be substituted in a complete example. For example <span class="json">{ "type": "ShapeAnd", "shapeExprs": [ <span class="comment">SE<sub>1</sub></span>, <span class="comment">‚Ä¶</span> ] }</span> indicates that both <span class="comment">SE<sub>1</sub></span> and <span class="comment">‚Ä¶</span> would be substituted in a complete example.
      </p>
      <!--div class="issue">
        <p id="json-triples">
          When stable, consider switching to the rdfjs task force's <a href="https://github.com/rdfjs/representation-task-force/blob/master/interface-spec.md#term">JSON representation</a> i.e.
        </p>
        <ul>
          <li>IRI: <code class="json">{ "termType": "NamedNode", "value": "http://example.org/resource" }</code></li>
          <li>blank node: <code class="json">{ "termType": "BlankNode", "value": "blank3" }</code></li>
          <li>literal:
          <ul>
            <li>literal with type <code>http://www.w3.org/2001/XMLSchema#</code>: <code class="json">{ "termType": "Literal", "value": "abc" }</code></li>
            <li><a>language-tagged string</a>: <code class="json">{ "termType": "Literal", "value": "hello world", "language": "en-us", "datatype": "http://www.w3.org/1999/02/22-rdf-syntax-ns#langString" }</code></li>
            <li>datatyped literal: <code class="json">{ "termType": "Literal", "value": "123", "language": "", "datatype": "http://www.w3.org/1999/02/22-rdf-syntax-ns#integer" }</code></li>
          </ul></li>
        </ul>
      </div-->
    </section>

    <section id="graphAccess" typeof="bibo:Chapter" resource="#graphAccess" property="bibo:hasPart">
      <h3 id="h-graphaccess" resource="#h-graphaccess"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.3 </span>Graph access</span>
      </h3>
      <p>
        The validation process defined in this document relies on matching <a href="#dfn-sparql-triple-pattern" class="internalDFN" data-link-type="dfn">triple patterns</a> in the form <code>(subject, predicate, object)</code> where each position may be supplied by a constant, a previously defined term, or the underscore "<code>_</code>", which represents a previously undefined element or wildcard. This corresponds to a <dfn data-dfn-type="dfn" id="dfn-sparql-triple-pattern"><a href="https://www.w3.org/TR/sparql11-query/#defn_TriplePattern">SPARQL Triple Pattern</a></dfn> where each "_" is replaced by a unique <a href="#dfn-blank-node" class="internalDFN" data-link-type="dfn">blank node</a>. Matching such a <a href="#dfn-sparql-triple-pattern" class="internalDFN" data-link-type="dfn">triple pattern</a> against a <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> is defined by <a href="https://www.w3.org/TR/sparql11-query/#BGPsparql">SPARQL Basic Graph Pattern Matching</a> (BGP) with a BGP containing only that <a href="#dfn-sparql-triple-pattern" class="internalDFN" data-link-type="dfn">triple pattern</a>.
      </p>
    </section>
    <!-- button id="toggleRDF">Toggle RDF ("r")</button> <button id="toggleExamples">Toggle Examples ("e")</button> <button id="toggleSquished">Render only abstract syntax ("a")</button -->

    <section id="results" typeof="bibo:Chapter" resource="#results" property="bibo:hasPart">
      <h3 id="h-results" resource="#h-results"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.4 </span>Results</span>
      </h3>
      <div>
        <p>
          ShEx does not prescribe a report format. For illustration purposes in this specification, results of validation are represented in a table associating node/shape pairs with a pass or fail and a reason for failure:
        </p>
        <table class="example">
          <tbody>
            <tr>
              <th class="schema">shape</th>
              <th class="data">node</th>
              <th>result</th>
              <th>reason</th>
            </tr>
            <tr class="pass">
              <td>&lt;Shape1&gt;</td>
              <td>&lt;node1&gt;</td>
              <td>pass</td>
              <td class="noreason"></td>
            </tr>
            <tr class="fail">
              <td>&lt;Shape1&gt;</td>
              <td>&lt;node2&gt;</td>
              <td>fail</td>
              <td class="fail">no <code>ex:state</code> supplied.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    <!-- <p> -->
    <!--   The following HTML tags and CSS classes are used to highlight the roles of text in this document: -->
    <!-- </p> -->
    <!-- <ul> -->
    <!--   <li>&lt;dfn&gt;<dfn data-lt="dfn-shacl-defined-term">defined term</dfn>&lt;dfn&gt;</li> -->
    <!--   <li>&lt;a class="internalDFN"&gt;<a title="SHACL defined term" class="internalDFN">defined term</a>&lt;/a&gt;</li> -->
    <!--   <li><sup class="eval">eval</sup> &mdash; link to evaluation semantics</li> -->
    <!-- </ul> -->
  </section>

  <section id="terminology" typeof="bibo:Chapter" resource="#terminology" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-terminology" resource="#h-terminology"><span property="xhv:role" resource="xhv:heading"><span class="secno">3. </span>Terminology</span>
    </h2>
    <p>Shape expressions are defined using terms from RDF semantics[<cite><a class="bibref" href="#bib-rdf11-mt">rdf11-mt</a></cite>]:</p>
    <ul>
      <li><dfn data-dfn-type="dfn" id="dfn-node"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-node">Node</a></dfn>: one of <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>, <dfn data-dfn-type="dfn" id="dfn-blank-node"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a></dfn>, <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">Literal</a></li>
      <li><dfn data-dfn-type="dfn" id="dfn-graph"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">Graph</a></dfn>: a set of <dfn data-dfn-type="dfn" id="dfn-triples"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">Triples</a></dfn> of (<dfn data-dfn-type="dfn" id="dfn-subject"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-predicate"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate">predicate</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-object"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a></dfn>)</li>
    </ul>

    <p>This specification makes use of the following namespaces:</p>
    <dl>
      <dt><code>foaf</code>:</dt>
      <dd><code>http://xmlns.com/foaf/0.1/</code></dd>
      <dt><code>rdf</code>:</dt>
      <dd><code>http://www.w3.org/1999/02/22-rdf-syntax-ns#</code></dd>
      <dt><code>rdfs</code>:</dt>
      <dd><code>http://www.w3.org/2000/01/rdf-schema#</code></dd>
      <dt><code>shex</code>:</dt>
      <dd><code>http://www.w3.org/ns/shex#</code></dd>
      <dt><code>xsd</code>:</dt>
      <dd><code>http://www.w3.org/2001/XMLSchema#</code></dd>
    </dl>

    <p>For the purposes of the <a href="#dom-shexprocessor" class="internalDFN" data-link-type="dfn"><code>ShExProcessor</code></a> interface, a <dfn data-dfn-type="dfn" id="dfn-promise"><a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-promise-objects">promise</a></dfn> is an object that represents the eventual result of a single asynchronous operation. Promises are defined in [<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>].</p>
    <p>
      The following functions access the elements of an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF graph</a> <span class="math">G</span> containing a node <span class="math">n</span>:</p>
    <ul>
      <li>
        <span class="math"><dfn data-dfn-type="dfn" id="dfn-arcsout">arcsOut</dfn>(G, n)</span> is the set of <a href="#dfn-triples" class="internalDFN" data-link-type="dfn">triples</a> in a <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> <span class="math">G</span> with <a href="#dfn-subject" class="internalDFN" data-link-type="dfn">subject</a> <span class="math">n</span>.
      </li>
      <li>
        <span class="math"><dfn data-dfn-type="dfn" id="dfn-predicatesout">predicatesOut</dfn>(G, n)</span> is the set of <a data-lt="predicate" href="#dfn-predicates" class="internalDFN" data-link-type="dfn">predicates</a> in <span class="math"><a href="#dfn-arcsout" class="internalDFN" data-link-type="dfn">arcsOut</a>(G, n)</span>.
      </li>
      <li>
        <span class="math"><dfn data-dfn-type="dfn" id="dfn-arcsin">arcsIn</dfn>(G, n)</span> is the set of <a href="#dfn-triples" class="internalDFN" data-link-type="dfn">triples</a> in a <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> <span class="math">G</span> with <a href="#dfn-object" class="internalDFN" data-link-type="dfn">object</a> <span class="math">n</span>.
      </li>
      <li>
        <span class="math"><dfn data-dfn-type="dfn" id="dfn-predicatesin">predicatesIn</dfn>(G, n)</span> is the set of <a data-lt="predicate" href="#dfn-predicates" class="internalDFN" data-link-type="dfn">predicates</a> in <span class="math"><a href="#dfn-arcsin" class="internalDFN" data-link-type="dfn">arcsIn</a>(G, n)</span>.
      </li>
      <li>
        <span class="math"><dfn data-dfn-type="dfn" id="dfn-neigh">neigh</dfn>(G, n)</span> is the neighbourhood of the <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a> <span class="math">n</span> in the <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> <span class="math">G</span>.<br><span class="math"><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, n) = <a href="#dfn-arcsout" class="internalDFN" data-link-type="dfn">arcsOut</a>(G, n) ‚à™ <a href="#dfn-arcsin" class="internalDFN" data-link-type="dfn">arcsIn</a>(G, n)</span>
      </li>
      <li>
        <span class="math"><dfn data-dfn-type="dfn" id="dfn-predicates">predicates</dfn>(G, n)</span> is the set of <a data-lt="predicate" href="#dfn-predicates" class="internalDFN" data-link-type="dfn">predicates</a> in <span class="math"><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, n)</span>.<br><span class="math"><a href="#dfn-predicates" class="internalDFN" data-link-type="dfn">predicates</a>(G, n) = <a href="#dfn-predicatesout" class="internalDFN" data-link-type="dfn">predicatesOut</a>(G, n) ‚à™ <a href="#dfn-predicatesin" class="internalDFN" data-link-type="dfn">predicatesIn</a>(G, n)</span>
      </li>
    </ul>

    <div class="example">
      <p>
        Consider the <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF graph</a> <span class="math">G</span> represented in Turtle:
      </p>

      <pre class="graph hljs undefined" aria-busy="false" aria-live="polite">PREFIX ex: http://schema.example/
PREFIX inst: http://inst.example/#
PREFIX foaf: http://xmlns.com/foaf/
PREFIX xsd: http://www.w3.org/2001/XMLSchema#

inst:Issue1 
    ex:state      ex:unassigned ;
    ex:reportedBy _:User2 .

_:User2
    foaf:name     "Bob Smith" ;
    foaf:mbox     &lt;mailto:bob@example.org&gt; .
        </pre>
      <p>
        There are two arcs out of <span class="pre">_:User2</span>; <span class="math"><a href="#dfn-arcsout" class="internalDFN" data-link-type="dfn">arcsOut</a>(G, <span class="pre">_:User2</span>)</span>:
      </p>
      <pre aria-busy="false" aria-live="polite" class="hljs css">    _<span class="hljs-selector-pseudo">:User2</span>  <span class="hljs-selector-tag">foaf</span><span class="hljs-selector-pseudo">:name</span>  "<span class="hljs-selector-tag">Bob</span> <span class="hljs-selector-tag">Smith</span>" .
    _<span class="hljs-selector-pseudo">:User2</span>  <span class="hljs-selector-tag">foaf</span><span class="hljs-selector-pseudo">:mbox</span>  &lt;<span class="hljs-selector-tag">mailto</span><span class="hljs-selector-pseudo">:bob</span>@<span class="hljs-keyword">example</span>.<span class="hljs-keyword">org</span>&gt; .
  </pre>
      <p>
        There is one arc into <span class="pre">_:User2</span>; <span class="math"><a href="#dfn-arcsin" class="internalDFN" data-link-type="dfn">arcsIn</a>(G, <span class="pre">_:User2</span>)</span>:
      </p>
      <pre aria-busy="false" aria-live="polite" class="hljs css">    <span class="hljs-selector-tag">inst</span><span class="hljs-selector-pseudo">:Issue1</span> <span class="hljs-selector-tag">ex</span><span class="hljs-selector-pseudo">:reportedBy</span>  _<span class="hljs-selector-pseudo">:User2</span> .
  </pre>
      <p>
        There are three arcs in the neighbourhood of <span class="pre">_:User2</span> set, <span class="math"><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, <span class="pre">_:User2</span>)</span>:
      </p>
      <pre aria-busy="false" aria-live="polite" class="hljs css">    _<span class="hljs-selector-pseudo">:User2</span>  <span class="hljs-selector-tag">foaf</span><span class="hljs-selector-pseudo">:name</span>  "<span class="hljs-selector-tag">Bob</span> <span class="hljs-selector-tag">Smith</span>" .
    _<span class="hljs-selector-pseudo">:User2</span>  <span class="hljs-selector-tag">foaf</span><span class="hljs-selector-pseudo">:mbox</span>  &lt;<span class="hljs-selector-tag">mailto</span><span class="hljs-selector-pseudo">:bob</span>@<span class="hljs-keyword">example</span>.<span class="hljs-keyword">org</span>&gt; .
    inst:Issue1 ex:reportedBy  _:User2 .
  </pre>
    </div>
  </section>

  <section id="conformance" typeof="bibo:Chapter" resource="#conformance" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-conformance" resource="#h-conformance"><span property="xhv:role" resource="xhv:heading"><span class="secno">4. </span>Conformance</span>
    </h2>
    <p>
      As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.
    </p>
    <p id="respecRFC2119">The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">MUST NOT</em>, and <em class="rfc2119">SHOULD NOT</em> are to be interpreted as described in [<cite><a class="bibref" href="#bib-RFC2119">RFC2119</a></cite>].
    </p>

    <p>Conformance criteria are relevant to authors and authoring tool implementers. As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p>

    <ul>
      <li>A <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a> document complies with this specification if it conforms to the grammar described in <a href="#shexc" class="sectionRef sec-ref">section <span class="secno">6.</span> <span class="sec-title">ShEx Compact syntax (ShExC)</span></a> resulting in a valid <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> document.</li>
      <li>A <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> document complies with this specification if it is a valid JSON-LD document [<cite><a class="bibref" href="#bib-json-ld">json-ld</a></cite>], and conforms to the <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> syntax, as described in <a href="#shexj" class="sectionRef sec-ref">section <span class="secno">B.</span> <span class="sec-title">ShEx JSON Syntax (ShExJ)</span></a>.</li>
      <li>JSON documents can be interpreted as <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> by following the normative statements in
        <a href="https://www.w3.org/TR/json-ld/#interpreting-json-as-json-ld">Section 4.8 Interpreting JSON as JSON-LD</a> in [<cite><a class="bibref" href="#bib-JSON-LD">JSON-LD</a></cite>].</li>
      <li>Other RDF documents comply with this specification, if they are <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-isomorphism">graph isomorphic</a>[<cite><a class="bibref" href="#bib-rdf11-concepts">rdf11-concepts</a></cite>] to the RDF interpretation of some <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> document.</li>
    </ul>
  </section>

  <section id="shapes-language" typeof="bibo:Chapter" resource="#shapes-language" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-shapes-language" resource="#h-shapes-language"><span property="xhv:role" resource="xhv:heading"><span class="secno">5. </span>The Shape Expressions Language</span>
    </h2>
    <p>
      A Shape Expressions (ShEx) schema is a collection of labeled <a data-lt="shape" href="#dfn-shapes" class="internalDFN" data-link-type="dfn">Shapes</a> and <a href="#node-constraints">Node Constraints</a>. These can be used to describe or test nodes in <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF graphs</a>. ShEx does not prescribe a language for associating <a href="#dfn-node" class="internalDFN" data-link-type="dfn">nodes</a> with <a data-lt="shape" href="#dfn-shapes" class="internalDFN" data-link-type="dfn">shapes</a> but several approaches are <a href="../primer/index.html#associating-nodes-with-shapes">described in the ShEx Primer</a>.
    </p>

    <section id="shapes-schema" typeof="bibo:Chapter" resource="#shapes-schema" property="bibo:hasPart">
      <h3 id="h-shapes-schema" resource="#h-shapes-schema"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.1 </span>Shapes Schema</span>
      </h3>
      <p>
        A shapes schema is captured in a <span class="jobjref"><dfn data-dfn-type="dfn" id="dfn-schema">Schema</dfn></span> object:
      </p>
      <div class="shexjTable">
        <table class="shexj">
          <tbody>
            <tr class="obj">
              <th class="obj"><a href="#dfn-schema" class="internalDFN" data-link-type="dfn">Schema</a></th>
              <td>{</td>
              <td><span class="param">startActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? <a class="param internalDFN" href="#dfn-start" data-link-type="dfn">start</a>:<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>? <a class="param internalDFN" href="#dfn-shapes" data-link-type="dfn">shapes</a>:[<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>+]? }</td>
            </tr>
          </tbody>
        </table>
      </div>
      <p>
        where <a class="param internalDFN" href="#dfn-shapes" data-link-type="dfn">shapes</a> is a mapping from shape label to <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a>.
      </p>
      <div class="repchoice">
        <pre class="json repchosen hljs undefined" aria-busy="false" aria-live="polite">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/IssueShape", ‚Ä¶ },
  { "id": "_:UserShape", ‚Ä¶ },
  { "id": "http://schema.example/EmployeeShape", ‚Ä¶ } ] }</pre>
        <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                    
    ex:IssueShape { ‚Ä¶ }
    _:UserShape { ‚Ä¶ }
    ex:EmployeeShape { ‚Ä¶ }
</pre>
      </div>
    </section>

    <section id="shape-map" typeof="bibo:Chapter" resource="#shape-map" property="bibo:hasPart">
      <h3 id="h-shape-map" resource="#h-shape-map"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.2 </span>ShapeMap Definition</span>
      </h3>

      <p>
        A <dfn class="label" data-dfn-type="dfn" id="dfn-shapemap">ShapeMap</dfn> is a mapping from node to a set of shapes <span class="math">(Node1: [Shape<sub>2</sub>, Shape<sub>3</sub>, ‚Ä¶])</span> where <span class="math">node</span> is an RDF node, and <span class="math">Shape<sub>n</sub></span> is a shape label from a schema. A node-label association in a <span class="math"><a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a></span> indicates that the node <span class="math">Node1</span> satisfies the constraint given by the definition of the <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expressions</a> labeled <span class="math">Shape<sub>2</sub></span> and <span class="math">Shape<sub>3</sub></span>. We use the JSON list notation <span class="math">[Shape<sub>2</sub>, Shape<sub>3</sub>, ‚Ä¶]</span> for sets with the additional understanding that the list neither order nor repetition have any semantic impact.
      </p>

      <div class="example">
        <p>
          Consider a shapes schema with shape labels <span class="json">"http://schema.example/IssueShape"</span>, <span class="json">"_:UserShape"</span>:
        </p>
        <div class="repchoice">
          <pre class="json repchosen hljs undefined" aria-busy="false" aria-live="polite">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/IssueShape", ‚Ä¶ },
  { "id": "_:UserShape", ‚Ä¶ },
  { "id": "http://schema.example/EmployeeShape", ‚Ä¶ } ] }</pre>
          <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                        
    ex:IssueShape { ‚Ä¶ }
    _:UserShape { ‚Ä¶ }
    ex:EmployeeShape { ‚Ä¶ }
</pre>
        </div>
        <p>
          An example <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a> is:
        </p>
        <div class="json">
          <pre aria-busy="false" aria-live="polite" class="hljs json">{ <span class="hljs-attr">"http://inst.example/#Issue1"</span>: [<span class="hljs-string">"http://schema.example/IssueShape"</span>],
  <span class="hljs-attr">"_:User2"</span>: [<span class="hljs-string">"_:UserShape"</span>, <span class="hljs-string">"http://schema.example/EmployeeShape"</span>] }</pre>
        </div>
      </div>

      <p>
        <span class="label" id="isValid">isValid</span>: The expression <code class="function">isValid(<span class="math">G</span>, <span class="math">m</span>)</code> indicates that for every node/shape pair <span class="math">(n, s)</span> in <span class="math">m</span>, <span class="math">s</span> has a corresponding <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> <span class="math">se</span> and <code class="function">satisfies(<span class="math">n</span>, <span class="math">se</span>, <span class="math">G</span>, <span class="math">m</span>)</code>.
        <code class="function">satisfies</code> is defined below for each form of <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a>.
      </p>

      <div class="note">
        <div class="note-title marker" aria-level="4" role="heading" id="h-note1"><span>Note</span></div>
        <div class="">
          <p>
            Validation of a <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> <span class="math">G</span> does not necessarily require the construction of a <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a> with every node in <span class="math">G</span>. The validation semantics defined below imply a set of dependencies for validating some node as a shape. A validation process that tests every <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a> in a <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> against every <a href="#dfn-shape" class="internalDFN" data-link-type="dfn">shape</a> in a <a href="#dfn-schema" class="internalDFN" data-link-type="dfn">schema</a> can be considered to have an input <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a> associating each node with the set of all shapes in the schema.
          </p>
          <p>
            The semantics of ShEx are independent from the construction of an input <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a>.
            <a href="https://www.w3.org/2001/sw/wiki/ShEx/ShapeMap">https://www.w3.org/2001/sw/wiki/ShEx/ShapeMap</a> has list of popular methods for constructing ShapeMaps.
          </p>
        </div>
      </div>

      <p>
        Validation of a node against a shape in a schema requires that there is a consistent mapping from node to
        <!-- @@set of -->shape for every node and shape visited during a validation process. The remainder of this document uses <span class="math">m</span> to indicate such a mapping.
      </p>
    </section>

    <section id="shape-expressions" typeof="bibo:Chapter" resource="#shape-expressions" property="bibo:hasPart">
      <h3 id="h-shape-expressions" resource="#h-shape-expressions"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.3 </span>Shape Expressions</span>
      </h3>
      <p>
        A <dfn data-dfn-type="dfn" id="dfn-shape-expression">shape expression</dfn> is composed of four kinds of objects combined with the algebraic operators And, Or and Not:
      </p>
      <ul>
        <li>
          a node constraint (<span class="jobjref"><a href="#dfn-nodeconstraint" class="internalDFN" data-link-type="dfn">NodeConstraint</a></span>) that defines the set of allowed values of a node. These include specification of RDF node kind, literal datatype, XML String and numeric facets and enumeration of value sets.
        </li>
        <li>
          a shape constraint (<span class="jobjref"><a href="#dfn-shape" class="internalDFN" data-link-type="dfn">Shape</a></span>) that defines a constraint on the allowed neighbourhood of a node, that is, the allowed triples that contain this node as subject or object.
        </li>
        <li>
          an external shape (<span class="jobjref"><a href="#dfn-shapeexternal" class="internalDFN" data-link-type="dfn">ShapeExternal</a></span>) which is an extension mechanism to externally define e.g. functional shapes or prohibitively large value sets.
        </li>
        <li>
          a shape reference (<span class="jobjref"><a href="#dfn-shapeexprlabel" class="internalDFN" data-link-type="dfn">shapeExprLabel</a></span>) identifies another shape in the schema.
        </li>
      </ul>

      <section id="shape-expressions-shexj" typeof="bibo:Chapter" resource="#shape-expressions-shexj" property="bibo:hasPart">
        <h4 id="h-shape-expressions-shexj" resource="#h-shape-expressions-shexj"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.3.1 </span>JSON Syntax</span>
        </h4>

        <div class="shexjTable">
          <table class="shexj">
            <tbody>
              <tr class="nob">
                <th class="nob"><dfn data-dfn-type="dfn" id="dfn-shapeexpr">shapeExpr</dfn></th>
                <td>=</td>
                <td><a class="objref internalDFN" href="#dfn-shapeor" data-link-type="dfn">ShapeOr</a> | <a class="objref internalDFN" href="#dfn-shapeand" data-link-type="dfn">ShapeAnd</a> | <a class="objref internalDFN" href="#dfn-shapenot" data-link-type="dfn">ShapeNot</a> | <a class="objref internalDFN" href="#dfn-nodeconstraint" data-link-type="dfn">NodeConstraint</a> | <a class="objref internalDFN" href="#dfn-shape" data-link-type="dfn">Shape</a> | <a class="objref internalDFN" href="#dfn-shapeexternal" data-link-type="dfn">ShapeExternal</a> | <a class="objref internalDFN" href="#dfn-shapeexprref" data-link-type="dfn">shapeExprRef</a> ;</td>
              </tr>
              <tr class="obj">
                <th class="obj"><dfn data-dfn-type="dfn" id="dfn-shapeor">ShapeOr</dfn></th>
                <td>{</td>
                <td><span class="param">id</span>:<a class="nobref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a>? <span class="param">shapeExprs</span>:[<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>] }</td>
              </tr>
              <tr class="obj">
                <th class="obj"><dfn data-dfn-type="dfn" id="dfn-shapeand">ShapeAnd</dfn></th>
                <td>{</td>
                <td><span class="param">id</span>:<a class="nobref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a>? <span class="param">shapeExprs</span>:[<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>] }</td>
              </tr>
              <tr class="obj">
                <th class="obj"><dfn data-dfn-type="dfn" id="dfn-shapenot">ShapeNot</dfn></th>
                <td>{</td>
                <td><span class="param">id</span>:<a class="nobref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a>? <span class="param">shapeExpr</span>:<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a> }</td>
              </tr>
              <tr class="obj">
                <th class="obj"><dfn data-dfn-type="dfn" id="dfn-shapeexternal">ShapeExternal</dfn></th>
                <td>{</td>
                <td><span class="param">id</span>:<a class="nobref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a>? }</td>
              </tr>
              <tr class="nob">
                <th class="nob"><dfn data-dfn-type="dfn" id="dfn-shapeexprref">shapeExprRef</dfn></th>
                <td>=</td>
                <td><a class="objref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a> ;</td>
              </tr>
              <tr class="nob">
                <th class="nob"><dfn data-dfn-type="dfn" id="dfn-shapeexprlabel">shapeExprLabel</dfn></th>
                <td>=</td>
                <td><a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> | <a href="#dfn-bnode" class="internalDFN" data-link-type="dfn">BNODE</a> ;</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="example">
          <p>
            Examples of shape expressions:
          </p>

          <div class="repchoice">
            <pre class="json repchosen hljs undefined" aria-busy="false" aria-live="polite">{ "type": "Shape", ‚Ä¶ }  </pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">{ ‚Ä¶ }                   </pre>
          </div>
          <div style="clear:both;">&nbsp;</div>
          <div class="repchoice">
            <pre class="json repchosen hljs undefined" aria-busy="false" aria-live="polite">{ "type": "ShapeAnd", "shapeExprs": [
  { "type": "NodeConstraint", "nodeKind": "iri" },
  { "type": "ShapeOr", "shapeExprs": [
    "http://schema.example/IssueShape",
    { "type": "ShapeNot", "shapeExpr": { "type": "Shape", ‚Ä¶ } }
    ] } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                    
  IRI AND
  (
    @&lt;http://schema.example/IssueShape&gt;
    OR NOT { ‚Ä¶ }
  )</pre> In this ShapeOr's <span class="param rephidden">shapeExprs</span>,"http://schema.example/IssueShape" is a reference to the <a class="rephidden internalDFN" href="#dfn-shape-expression" data-link-type="dfn">shape expression</a> with the id "http://schema.example/IssueShape".
          </div>
        </div>
      </section>

      <section id="shape-expression-semantics" typeof="bibo:Chapter" resource="#shape-expression-semantics" property="bibo:hasPart">
        <h4 id="h-shape-expression-semantics" resource="#h-shape-expression-semantics"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.3.2 </span>Semantics</span>
        </h4>
        <p>
          <span class="label" id="satisfies">satisfies</span>: The expression <code class="function">satisfies(<span class="math">n</span>, <span class="math">se</span>, <span class="math">G</span>, <span class="math">m</span>)</code> indicates that a node <span class="math">n</span> and <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> <span class="math">G</span> satisfy a <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> <span class="math">se</span> with <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">shapeMap</a> <span class="math">m</span>.<br>
          <span class="label" id="notSatisfies">notSatisfies</span>: Conversely, <code class="function">notSatisfies(<span class="math">n</span>, <span class="math">se</span>, <span class="math">G</span>, <span class="math">m</span>)</code> indicates that <span class="math">n</span> and <span class="math">G</span> do not satisfy <span class="math">se</span> with the given <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">shapeMap</a> <span class="math">m</span>.
          <code class="function">notSatisfies(<span class="math">n</span>, <span class="math">se</span>, <span class="math">G</span>, <span class="math">_</span>)</code> indicates that no <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">shapeMap</a> would allow <span class="math">n</span> and <span class="math">G</span> to satisfy <span class="math">se</span>.
        </p>
        <p>
          <code class="function">satisfies(<span class="math">n</span>, <span class="math">se</span>, <span class="math">G</span>, <span class="math">m</span>)</code> is true if and only if:
        </p>

        <ul>
          <li id="satisfies-NodeConstraint"><span class="math">Se</span> is a <span class="jobjref"><a class="obj internalDFN" href="#dfn-nodeconstraint" data-link-type="dfn">NodeConstraint</a></span> and <code class="function"><a href="#satisfies2-NodeConstraint">satisfies2</a>(<span class="math">n</span>, <span class="math">se</span>)</code> as described below in <a href="#node-constraints">Node Constraints</a>. Note that testing if a node satisfies a node constraint does not require a <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> or <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">shapeMap</a>.</li>
          <li id="satisfies-Shape-proxy"><span class="math">Se</span> is a <span class="jobjref"><a class="obj internalDFN" href="#dfn-shape" data-link-type="dfn">Shape</a></span> and <code class="function">satisfies(<span class="math">n</span>, <span class="math">se</span>)</code> as <a href="#satisfies-Shape">defined below</a> in Shapes and Triple Expressions.</li>
          <li id="satisfies-ShapeOr"><span class="math">Se</span> is a <span class="jobjref"><a class="obj internalDFN" href="#dfn-shapeor" data-link-type="dfn">ShapeOr</a></span> and there is some <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> <span class="math">se2</span> in <span class="param">shapeExprs</span> such that <code class="function">satisfies(<span class="math">n</span>, <span class="math">se2</span>, <span class="math">G</span>, <span class="math">m</span>)</code>.</li>
          <li id="satisfies-ShapeAnd"><span class="math">Se</span> is a <span class="jobjref"><a class="obj internalDFN" href="#dfn-shapeand" data-link-type="dfn">ShapeAnd</a></span> and for every <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> <span class="math">se2</span> in <span class="param">shapeExprs</span>, <code class="function">satisfies(<span class="math">n</span>, <span class="math">se2</span>, <span class="math">G</span>, <span class="math">m</span>)</code>.</li>
          <li id="satisfies-ShapeNot"><span class="math">Se</span> is a <span class="jobjref"><a class="obj internalDFN" href="#dfn-shapenot" data-link-type="dfn">ShapeNot</a></span> and for the <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> <span class="math">se2</span> at <span class="param">shapeExpr</span>, <code class="function">notSatisfies(<span class="math">n</span>, <span class="math">se2</span>, <span class="math">G</span>, <span class="math">m</span>)</code>.</li>
          <li id="satisfies-ShapeExternal"><span class="math">Se</span> is a <span class="jobjref"><a class="obj internalDFN" href="#dfn-shapeexternal" data-link-type="dfn">ShapeExternal</a></span> and implementation-specific mechansims not defined in this specification indicate success.</li>
          <li id="satisfies-shapeExprRef"><span class="math">Se</span> is a <span class="jobjref"><a class="obj internalDFN" href="#dfn-shapeexprref" data-link-type="dfn">shapeExprRef</a></span> and there exists in the schema a <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> <span class="math">se2</span> with that <span class="param">id</span> and <code class="function">satisfies(<span class="math">n</span>, <span class="math">se2</span>, <span class="math">G</span>, <span class="math">m</span>)</code>.</li>
        </ul>

        <div class="example">
          <p>
            Given the three shape expressions <span class="math">SE<sub>1</sub></span>, <span class="math">SE<sub>2</sub></span>, <span class="math">SE<sub>3</sub></span> in a <span class="jobjref"><a class="obj internalDFN" href="#dfn-schema" data-link-type="dfn">Schema</a></span> <span class="math">Sch</span>, such that:
          </p>
          <ul>
            <li><code class="function">satisfies(<span class="math">n</span>, <span class="math">SE<sub>1</sub></span>, <span class="math">G</span>, <span class="math">m</span>)</code></li>
            <li><code class="function">satisfies(<span class="math">n</span>, <span class="math">SE<sub>2</sub></span>, <span class="math">G</span>, <span class="math">m</span>)</code></li>
            <li><code class="function">notSatisfies(<span class="math">n</span>, <span class="math">SE<sub>3</sub></span>, <span class="math">G</span>, <span class="math">m</span>)</code></li>
          </ul>
          <p>
            the following hold:
          </p>

          <ul>
            <li>
              <div style="float:left;" class="code function">satisfies(</div>
              <div style="float:left;" class="code"><span class="math">n</span>,<br>
                <div class="inline json">
                  <pre aria-busy="false" aria-live="polite" class="hljs json">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ShapeAnd"</span>, <span class="hljs-attr">"shapeExprs"</span>: [ SE1, SE2 ] }</pre>
                </div>,<br> <span class="math">G</span>, <span class="math">m</span>)</div>
              <div style="clear:both;"></div>
            </li>
            <li>
              <div style="float:left;" class="code function">satisfies(</div>
              <div style="float:left;" class="code"><span class="math">n</span>,<br>
                <div class="inline json">
                  <pre aria-busy="false" aria-live="polite" class="hljs json">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ShapeOr"</span>, <span class="hljs-attr">"shapeExprs"</span>: [ SE1, SE2, SE3 ] }</pre>
                </div>,<br> <span class="math">G</span>, <span class="math">m</span>)</div>
              <div style="clear:both;"></div>
            </li>
            <li>
              <div style="float:left;" class="code function">notSatisfies(</div>
              <div style="float:left;" class="code"><span class="math">n</span>,<br>
                <div class="inline json code">
                  <pre aria-busy="false" aria-live="polite" class="hljs javascript">{ <span class="hljs-string">"type"</span>: <span class="hljs-string">"ShapeNot"</span>, <span class="hljs-string">"shapeExpr"</span>: {
    { <span class="hljs-string">"type"</span>: <span class="hljs-string">"ShapeOr"</span>, <span class="hljs-string">"shapeExprs"</span>: [
        SE1,
        { <span class="hljs-string">"type"</span>: <span class="hljs-string">"ShapeAnd"</span>, <span class="hljs-string">"shapeExprs"</span>: [ SE2, SE3 ] }
      ] }
  } }</pre>
                </div>,<br> <span class="math">G</span>, <span class="math">m</span>)</div>
              <div style="clear:both;"></div>
            </li>
          </ul>

          <p>
            If <span class="math">Sch</span>'s <a class="param internalDFN" href="#dfn-shapes" data-link-type="dfn">shapes</a> maps "<code>http://schema.example/shape1</code>" to <span class="math">SE<sub>1</sub></span> then the following holds:
          </p>
          <ul>
            <li>
              <div style="float:left;" class="code function">satisfies(</div>
              <div style="float:left;" class="code"><span class="math">n</span>,<br>
                <div class="inline json">
                  <pre aria-busy="false" aria-live="polite" class="hljs javascript">http:<span class="hljs-comment">//schema.example/shape1"</span></pre>
                </div>,<br> <span class="math">G</span>, <span class="math">m</span>)</div>
              <div style="clear:both;"></div>
            </li>
          </ul>
        </div>
      </section>
    </section>

    <section id="node-constraints" typeof="bibo:Chapter" resource="#node-constraints" property="bibo:hasPart">
      <h3 id="h-node-constraints" resource="#h-node-constraints"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.4 </span>Node Constraints</span>
      </h3>
      <div class="shexjTable">
        <table class="shexj">
          <tbody>
            <tr class="obj">
              <th class="obj"><dfn data-dfn-type="dfn" id="dfn-nodeconstraint">NodeConstraint</dfn></th>
              <td>{</td>
              <td><span class="param">id</span>:<a class="nobref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a>? <span class="param">nodeKind</span>:(<span class="literal">"iri"</span> | <span class="literal">"bnode"</span> | <span class="literal">"nonliteral"</span> | <span class="literal">"literal"</span>)? <span class="param">datatype</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>? <a class="nobref internalDFN" href="#dfn-xsfacet" data-link-type="dfn">xsFacet</a>* <span class="param">values</span>:[<a class="nobref internalDFN" href="#dfn-valuesetvalue" data-link-type="dfn">valueSetValue</a>]? }</td>
            </tr>
            <tr class="nob">
              <th class="nob"><dfn data-dfn-type="dfn" id="dfn-xsfacet">xsFacet</dfn></th>
              <td>=</td>
              <td><a class="nobref internalDFN" href="#dfn-stringfacet" data-link-type="dfn">stringFacet</a> | <a class="nobref internalDFN" href="#dfn-numericfacet" data-link-type="dfn">numericFacet</a> ;</td>
            </tr>
            <tr class="nob">
              <th class="nob"><dfn data-dfn-type="dfn" id="dfn-stringfacet">stringFacet</dfn></th>
              <td>=</td>
              <td>(<span class="param">"length"</span>|<span class="param">"minlength"</span>|<span class="param">"maxlength"</span>):<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a> | <span class="param">pattern</span>:<a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a> <span class="param">flags</span>:<a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a>? ;</td>
            </tr>
            <tr class="nob">
              <th class="nob"><dfn data-dfn-type="dfn" id="dfn-numericfacet">numericFacet</dfn></th>
              <td>=</td>
              <td>(<span class="param">"mininclusive"</span>|<span class="param">"minexclusive"</span>|<span class="param">"maxinclusive"</span>|<span class="param">"maxexclusive"</span>):<a class="nobref internalDFN" href="#dfn-numericliteral" data-link-type="dfn">numericLiteral</a> </td>
            </tr>
            <tr>
              <th></th>
              <td>|</td>
              <td>(<span class="param">"totaldigits"</span>|<span class="param">"fractiondigits"</span>):<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a> ;</td>
            </tr>
            <tr class="nob">
              <th class="nob"><dfn data-dfn-type="dfn" id="dfn-numericliteral">numericLiteral</dfn></th>
              <td>=</td>
              <td><a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a> | <a href="#dfn-decimal" class="internalDFN" data-link-type="dfn">DECIMAL</a> | <a href="#dfn-double" class="internalDFN" data-link-type="dfn">DOUBLE</a> ;</td>
            </tr>
            <tr class="nob">
              <th class="nob"><dfn data-dfn-type="dfn" id="dfn-objectvalue">objectValue</dfn></th>
              <td>=</td>
              <td><a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> | <a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a> | <a href="#dfn-datatype_string" class="internalDFN" data-link-type="dfn">DATATYPE_STRING</a> | <a href="#dfn-lang_string" class="internalDFN" data-link-type="dfn">LANG_STRING</a> ;</td>
            </tr>
            <tr class="nob">
              <th class="nob"><dfn data-dfn-type="dfn" id="dfn-valuesetvalue">valueSetValue</dfn></th>
              <td>=</td>
              <td><a class="nobref internalDFN" href="#dfn-objectvalue" data-link-type="dfn">objectValue</a> | <a class="objref internalDFN" href="#dfn-stem" data-link-type="dfn">Stem</a> | <a class="objref internalDFN" href="#dfn-stemrange" data-link-type="dfn">StemRange</a> ;</td>
            </tr>
            <tr class="obj">
              <th class="obj"><dfn data-dfn-type="dfn" id="dfn-stem">Stem</dfn></th>
              <td>{</td>
              <td><span class="param">stem</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> }</td>
            </tr>
            <tr class="obj">
              <th class="obj"><dfn data-dfn-type="dfn" id="dfn-stemrange">StemRange</dfn></th>
              <td>{</td>
              <td><span class="param">stem</span>:(<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> | <a class="objref internalDFN" href="#dfn-wildcard" data-link-type="dfn">Wildcard</a>) <span class="param">exclusions</span>:[<a class="nobref internalDFN" href="#dfn-objectvalue" data-link-type="dfn">objectValue</a>|<a class="nobref internalDFN" href="#dfn-stem" data-link-type="dfn">Stem</a>]? }</td>
            </tr>
            <tr class="obj">
              <th class="obj"><dfn data-dfn-type="dfn" id="dfn-wildcard">Wildcard</dfn></th>
              <td>{</td>
              <td><span class="comment">/* empty */</span> }</td>
            </tr>
          </tbody>
        </table>
      </div>

      <section id="node-constraint-semantics" typeof="bibo:Chapter" resource="#node-constraint-semantics" property="bibo:hasPart">
        <h4 id="h-node-constraint-semantics" resource="#h-node-constraint-semantics"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.4.1 </span>Semantics</span>
        </h4>
        <p id="satisfies2-NodeConstraint">
          For a node <span class="param">n</span> and constraint <span class="param">nc</span>, <code class="function">satisfies2(<span class="math">n</span>, <span class="math">nc</span>)</code> if and only if for every <span class="param">nodeKind</span>, <span class="param">datatype</span>, <span class="param">xsFacet</span> and <span class="param">values</span> constraint value <span class="math">v</span> present in <span class="param">nc</span> <code class="function">nodeSatisfies(<span class="math">n</span>, <span class="math">v</span>)</code>. The following sections define <code class="function">nodeSatisfies</code> for each of these types of constraints:
        </p>
        <ul>
          <li><a href="#nodeKind">Node Kind Constraints</a></li>
          <li><a href="#datatype">Datatype Constraints</a></li>
          <li><a href="#xs-string">XML Schema String Facet Constraints</a></li>
          <li><a href="#xs-numeric">XML Schema Numeric Facet Constraints</a></li>
          <li><a href="#values">Values Constraints</a></li>
        </ul>
      </section>

      <section id="nodeKind" typeof="bibo:Chapter" resource="#nodeKind" property="bibo:hasPart">
        <h4 id="h-nodekind" resource="#h-nodekind"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.4.2 </span>Node Kind Constraints</span>
        </h4>
        <p id="nodeSatisfies-nodeKind">
          For a node <span class="math">n</span> and constraint value <span class="math">v</span>, <code class="function">nodeSatisfies(<span class="math">n</span>, <span class="math">v</span>)</code> if:
        </p>
        <ul>
          <li><span class="math">v</span> = "iri" and <span class="math">n</span> is an <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>.</li>
          <li><span class="math">v</span> = "bnode" and <span class="math">n</span> is a <a href="#dfn-blank-node" class="internalDFN" data-link-type="dfn">blank node</a>.</li>
          <li><span class="math">v</span> = "literal" and <span class="math">n</span> is a <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">Literal</a>.</li>
          <li><span class="math">v</span> = "nonliteral" and <span class="math">n</span> is an <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> or <a href="#dfn-blank-node" class="internalDFN" data-link-type="dfn">blank node</a>.</li>
        </ul>
        <div class="example">
          <div class="example-title marker"><span>Node Kind example 1</span></div>
          <p>
            The following examples use a <span class="jobjref"><a href="#dfn-tripleconstraint" class="internalDFN" data-link-type="dfn">TripleConstraint</a></span> object described later in the document. The
          </p>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>, <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/state"</span>,
      <span class="hljs-attr">"valueExpr"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>, <span class="hljs-attr">"nodeKind"</span>: <span class="hljs-string">"iri"</span> } } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                     
    ex:IssueShape {                                                          
      ex:state IRI
    }
              </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;issue1&gt; ex:state ex:HunkyDory .
&lt;issue2&gt; ex:taste ex:GoodEnough .
&lt;issue3&gt; ex:state "just fine" .</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>reason</th>
              </tr>
              <tr class="pass">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue1&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="fail">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue2&gt;</td>
                <td>fail</td>
                <td class="fail">expected 1 <code>ex:state</code> property.</td>
              </tr>
              <tr class="fail">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue3&gt;</td>
                <td>fail</td>
                <td class="fail"><code>ex:state</code> expected to be an IRI, literal found.</td>
              </tr>
            </tbody>
          </table>
          <p>
            Note that &lt;issue2&gt; <span class="fail">fails</span> not because of a nodeKind violation but instead because of a <a href="#cardinality">Cardinality</a> violation described below.
          </p>
        </div>
      </section>

      <section id="datatype" typeof="bibo:Chapter" resource="#datatype" property="bibo:hasPart">
        <h4 id="h-datatype" resource="#h-datatype"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.4.3 </span>Datatype Constraints</span>
        </h4>
        <p id="nodeSatisfies-datatype">
          For a node <span class="math">n</span> and constraint value <span class="math">v</span>, <code class="function">nodeSatisfies(<span class="math">n</span>, <span class="math">v</span>)</code> if <span class="math">n</span> is an Literal with the datatype <span class="math">v</span> and, if <span class="math">v</span> is in the set of <a href="https://www.w3.org/TR/sparql11-query/#operandDataTypes">SPARQL operand data types</a>[<cite><a class="bibref" href="#bib-sparql11-query">sparql11-query</a></cite>], an XML schema string with a value of the lexical form of <span class="math">n</span> can be cast to the target type <span class="math">v</span> per <a href="https://www.w3.org/TR/xpath-functions-31/#casting">XPath Functions 3.1 section 19 Casting</a>[<cite><a class="bibref" href="#bib-xpath-functions">xpath-functions</a></cite>]. Only datatypes supported by SPARQL <em class="rfc2119" title="MUST">MUST</em> be tested but ShEx extensions <em class="rfc2119" title="MAY">MAY</em> add support for other datatypes.
        </p>

        <div class="example">
          <div class="example-title marker"><span>Datatype example 1</span></div>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>, <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/submittedOn"</span>,
      <span class="hljs-attr">"valueExpr"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
        <span class="hljs-attr">"datatype"</span>: <span class="hljs-string">"http://www.w3.org/2001/XMLSchema#date"</span>
      } } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                                   
    ex:IssueShape {                                                          
      ex:submittedOn xsd:date
    }

    
    
              </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;issue1&gt; ex:submittedOn "2016-07-08"^^xsd:date .
&lt;issue2&gt; ex:submittedOn "2016-07-08T01:23:45Z"^^xsd:dateTime .
&lt;issue3&gt; ex:submittedOn "2016-07"^^xsd:date .</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>reason</th>
              </tr>
              <tr class="pass">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue1&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="fail">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue2&gt;</td>
                <td>fail</td>
                <td class="fail"><code>ex:submittedOn</code> expected to be an <code>xsd:date</code>, <code>xsd:dateTime</code> found.</td>
              </tr>
              <tr class="fail">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue3&gt;</td>
                <td>fail</td>
                <td class="fail"><code>2016-07</code> is not a valid <code>xsd:date</code>.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="note">
          <div class="note-title marker" aria-level="5" role="heading" id="h-note2"><span>Note</span></div>
          <div class="">
            <p>
              In RDF 1.1, <dfn data-dfn-type="dfn" id="dfn-language-tagged-strings"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string">language-tagged strings</a></dfn>[<cite><a class="bibref" href="#bib-rdf11-concepts">rdf11-concepts</a></cite>] have the datatype <code>http://www.w3.org/1999/02/22-rdf-syntax-ns#langString</code>.
            </p>
            <p>
              RDF 1.0 included <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">RDF literals</a> with no datatype or language tag. These are called "<a href="https://www.w3.org/TR/sparql11-query/#simple_literal">simple literals</a>" in SPARQL11[<cite><a class="bibref" href="#bib-sparql11-query">sparql11-query</a></cite>]. In RDF 1.1, these literals have the datatype <code>http://www.w3.org/2001/XMLSchema#string</code>.
            </p>
          </div>
        </div>
        <div class="example">
          <div class="example-title marker"><span>Datatype example 2</span></div>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://www.w3.org/2000/01/rdf-schema#label"</span>,
      <span class="hljs-attr">"valueExpr"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
        <span class="hljs-attr">"datatype"</span>: <span class="hljs-string">"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"</span>
      } } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                           
  ex:IssueShape {
    rdfs:label rdf:langString
  }




              </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;issue3&gt; rdfs:label "emits dense black smoke"@en .
&lt;issue4&gt; rdfs:label "unexpected odor" .</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>reason</th>
              </tr>
              <tr class="pass">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue3&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="fail">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue4&gt;</td>
                <td>fail</td>
                <td class="fail"><code>rdfs:label</code> expected to be an <code>rdf:langString</code>, <code>xsd:string</code> found.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="xs-string" typeof="bibo:Chapter" resource="#xs-string" property="bibo:hasPart">
        <h4 id="h-xs-string" resource="#h-xs-string"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.4.4 </span>XML Schema String Facet Constraints</span>
        </h4>
        <!-- ul>
          <li><a href="#length">XML Schema Length Constraints</a></li>
          <li><a href="#minlength">XML Schema Minlength Constraints</a></li>
          <li><a href="#maxlength">XML Schema Maxlength Constraints</a></li>
          <li><a href="#pattern">XML Schema Pattern Constraints</a></li>
        </ul -->
        <p>
          String facet constraints apply to the lexical form of the <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">RDF Literals</a> and <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRIs</a> and <a href="#dfn-blank-node-identifier" class="internalDFN" data-link-type="dfn">blank node identifiers</a> (see <a href="#blank-node-label">note below</a> regarding access to <a href="#dfn-blank-node-identifier" class="internalDFN" data-link-type="dfn">blank node identifiers</a>).<br> Let <span class="math">lex</span> =
        </p>
        <ul>
          <li>if the value <span class="math">n</span> is an <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">RDF Literal</a>, the <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form">lexical form</a> of the literal (see [<cite><a class="bibref" href="#bib-rdf11-concepts">rdf11-concepts</a></cite>] <a href="https://www.w3.org/TR/rdf11-concepts/#section-Graph-Literal">section 3.3 Literals</a>).</li>
          <li>if the value <span class="math">n</span> is an <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>, the <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI string</a> (see [<cite><a class="bibref" href="#bib-rdf11-concepts">rdf11-concepts</a></cite>] <a href="https://www.w3.org/TR/rdf11-concepts/#section-iris">section 3.2 IRIs</a>).</li>
          <li>if the value <span class="math">n</span> is a <a href="#dfn-blank-node" class="internalDFN" data-link-type="dfn">blank node</a>, the <a href="#dfn-blank-node-identifier" class="internalDFN" data-link-type="dfn">blank node identifier</a> (see [<cite><a class="bibref" href="#bib-rdf11-concepts">rdf11-concepts</a></cite>] <a href="https://www.w3.org/TR/rdf11-concepts/#section-blank-nodes">section 3.4 Blank Nodes</a>).</li>
        </ul>
        <p>
          Let <span class="math">len</span> = the number of unicode codepoints in <span class="math">lex</span><br> For a node <span class="math">n</span> and constraint value <span class="math">v</span>, <code class="function">nodeSatisfies(<span class="math">n</span>, <span class="math">v</span>)</code>:
        </p>
        <ul>
          <li id="nodeSatisfies-length">for "<code>length</code>" constraints, <span class="math">v = len</span>,</li>
          <li id="nodeSatisfies-minlength">for "<code>minlength</code>" constraints, <span class="math">v &gt;= len</span>,</li>
          <li id="nodeSatisfies-maxlength">for "<code>maxlength</code>" constraints, <span class="math">v &lt;= len</span>,</li>
          <li id="nodeSatisfies-pattern">
            for "<code>pattern</code>" constraints, <span class="math">v</span> is unescaped into a valid <a href="https://www.w3.org/TR/xpath-functions-31/#regex-syntax">XPath 3.1 regular expression</a>[<cite><a class="bibref" href="#bib-xpath-functions-31">xpath-functions-31</a></cite>] <span class="math">re</span> and invoking <code class="function"><a href="https://www.w3.org/TR/xpath-functions-31/#func-matches">fn:matches</a>(<span class="math">lex</span>, <span class="math">re</span>)</code> returns <code>fn:true</code>. If the <span class="param">flags</span> parameter is present, is it passed as a second argument to <code class="function">fn:matches</code>. The pattern may have XPath 3.1 regular expression escape sequences per the modified production [10] in <a href="https://www.w3.org/TR/xpath-functions-31/#matching-start-and-end">section 5.6.1.1</a> as well as numeric escape sequences of the form 'u' HEX HEX HEX HEX or 'U' HEX HEX HEX HEX HEX HEX HEX HEX. Unescaping replaces numeric escape sequences with the corresponding unicode codepoint.
          </li>
        </ul>
        <div class="example">
          <div class="example-title marker"><span>String Facets example 1</span></div>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/submittedBy"</span>,
      <span class="hljs-attr">"valueExpr"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>, <span class="hljs-attr">"minlength"</span>: <span class="hljs-number">10</span> } } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                        
  ex:IssueShape {
    ex:submittedBy MINLENGTH 10
  }

            </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;issue1&gt; ex:submittedBy &lt;http://a.example/bob&gt; . # 20 characters
&lt;issue2&gt; ex:submittedBy "Bob" . # 3 characters</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>reason</th>
              </tr>
              <tr class="pass">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue1&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="fail">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue2&gt;</td>
                <td>fail</td>
                <td class="fail"><code>ex:submittedOn</code> expected to be &gt;= 10 characters,<br> 3 characters found.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="note">
          <div class="note-title marker" aria-level="5" role="heading" id="h-note3"><span>Note</span></div>
          <div class="" id="blank-node-label">
            <p>
              Access to <a href="#dfn-blank-node-identifier" class="internalDFN" data-link-type="dfn">blank node identifiers</a> may be impossible or unadvisable for many use cases. For instance, the SPARQL Query and SPARQL Update languages treat blank nodes in the query, labeled or otherwise, as variables. Lexical constraints on <a href="#dfn-blank-node-identifier" class="internalDFN" data-link-type="dfn">blank node identifiers</a> can only be implemented in systems which preserve such labels on data import.
            </p>
          </div>
        </div>
        <div class="example">
          <div class="example-title marker"><span>String Facets example 2</span></div>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/submittedBy"</span>,
      <span class="hljs-attr">"valueExpr"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
                     <span class="hljs-attr">"pattern"</span>: <span class="hljs-string">"genuser[0-9]+"</span>, <span class="hljs-attr">"flags"</span>: <span class="hljs-string">"i"</span> }
} } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                               
  ex:IssueShape {
    ex:submittedBy ~/genuser[0-9]+/i
  }



            </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;issue6&gt; ex:submittedBy _:genUser218 .
&lt;issue7&gt; ex:submittedBy _:genContact817 .</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>reason</th>
              </tr>
              <tr class="pass">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue6&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="fail">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue7&gt;</td>
                <td>fail</td>
                <td class="fail"><code>_:genContact817</code> expected to match <code>genuser[0-9]+</code>.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <p>
          When expressed as JSON strings, regular expressions are subject to the JSON string escaping rules.
        </p>

        <div class="example">
          <div class="example-title marker"><span>String Facets example 3</span></div>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/ProductShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/trademark"</span>,
      <span class="hljs-attr">"valueExpr"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
                     <span class="hljs-attr">"pattern"</span>: <span class="hljs-string">"^/\\t\\\\\\U0001D4B8\\?$"</span> }
} } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                            
  ex:ProductShape {
    ex:trademark /^\/\t\\\U0001D4B8\?$/
  }



            </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;product6&gt; ex:trademark "	\\ùí∏?" .
&lt;product7&gt; ex:trademark "\t\\\U0001D4B8?" . # Turtle literals have escape characters [tbnrf"'\].
&lt;product8&gt; ex:trademark "\t\\\\U0001D4B8?" .</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>reason</th>
              </tr>
              <tr class="pass">
                <td>&lt;ProductShape&gt;</td>
                <td>&lt;product6&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="pass">
                <td>&lt;ProductShape&gt;</td>
                <td>&lt;product7&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="fail">
                <td>&lt;ProductShape&gt;</td>
                <td>&lt;product8&gt;</td>
                <td>fail</td>
                <td class="fail">found "<code>\U0001D4B8</code>" instead of "<code>ùí∏</code>" (codepoint U+1D4B8).</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="xs-numeric" typeof="bibo:Chapter" resource="#xs-numeric" property="bibo:hasPart">
        <h4 id="h-xs-numeric" resource="#h-xs-numeric"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.4.5 </span>XML Schema Numeric Facet Constraints</span>
        </h4>
        <!-- ul>
          <li><a href="#mininclusive">XML Schema Mininclusive Constraints</a></li>
          <li><a href="#minexclusive">XML Schema Minexclusive Constraints</a></li>
          <li><a href="#maxinclusive">XML Schema Maxinclusive Constraints</a></li>
          <li><a href="#maxexclusive">XML Schema Maxexclusive Constraints</a></li>
          <li><a href="#totaldigits">XML Schema Totaldigits Constraints</a></li>
          <li><a href="#fractiondigits">XML Schema Fractiondigits Constraints</a></li>
        </ul -->
        <p>
          Numeric facet constraints apply to the numeric value of <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">RDF Literals</a> with datatypes listed in <a href="https://www.w3.org/TR/sparql11-query/#operandDataTypes">SPARQL 1.1 Operand Data Types</a>[<cite><a class="bibref" href="#bib-sparql11-query">sparql11-query</a></cite>]. Numeric constraints on non-numeric values fail.
          <code>totaldigits</code> and <code>fractiondigits</code> constraints on values not derived from <code>xsd:decimal</code> fail.
        </p>
        <p>
          Let <span class="math">num</span> be the numeric value of <span class="math">n</span>.<br> For a node <span class="math">n</span> and constraint value <span class="math">v</span>, <code class="function">nodeSatisfies(<span class="math">n</span>, <span class="math">v</span>)</code>:
        </p>
        <ul>
          <li id="nodeSatisfies-mininclusive">for "<code>mininclusive</code>" constraints, <span class="math">v &lt;= num</span>,</li>
          <li id="nodeSatisfies-minexclusive">for "<code>minexclusive</code>" constraints, <span class="math">v &lt; num</span>,</li>
          <li id="nodeSatisfies-maxinclusive">for "<code>maxinclusive</code>" constraints, <span class="math">v &gt;= num</span>,</li>
          <li id="nodeSatisfies-maxexclusive">for "<code>maxexclusive</code>" constraints, <span class="math">v &gt; num</span>,</li>
          <li id="nodeSatisfies-totaldigits">for "<code>totaldigits</code>" constraints, <span class="math">v</span> equals the number of digits in the <a href="https://www.w3.org/TR/xmlschema-2/#dt-canonical-representation">XML Schema canonical form</a>[<cite><a class="bibref" href="#bib-xmlschema-2">xmlschema-2</a></cite>] of the value of <span class="math">n</span>,</li>
          <li id="nodeSatisfies-fractiondigits">for "<code>fractiondigits</code>" constraints, <span class="math">v</span> is less than or equals the number of digits to the right of the decimal place in the <a href="https://www.w3.org/TR/xmlschema-2/#dt-canonical-representation">XML Schema canonical form</a>[<cite><a class="bibref" href="#bib-xmlschema-2">xmlschema-2</a></cite>] of the value of <span class="math">n</span>, ignoring trailing zeros.</li>
        </ul>
        <p>
          The operators <span class="math">&lt;=</span>, <span class="math">&lt;</span>, <span class="math">&gt;=</span> and <span class="math">&gt;</span> are evaluated after performing <a href="https://www.w3.org/TR/xpath20#promotion">numeric type promotion</a>[<cite><a class="bibref" href="#bib-xpath20">xpath20</a></cite>].
        </p>
        <div class="example">
          <div class="example-title marker"><span>Numeric Facets example 1</span></div>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/confirmations"</span>,
      <span class="hljs-attr">"valueExpr"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>, <span class="hljs-attr">"mininclusive"</span>: <span class="hljs-number">1</span> } } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                          
  ex:IssueShape {
    ex:confirmations MININCLUSIVE 1
  }

            </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;issue1&gt; ex:confirmations 1 .
&lt;issue2&gt; ex:confirmations 2^^xsd:byte .
&lt;issue3&gt; ex:confirmations 0 .
&lt;issue4&gt; ex:confirmations "ii"^^ex:romanNumeral .</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>reason</th>
              </tr>
              <tr class="pass">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue1&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="pass">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue2&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="fail">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue3&gt;</td>
                <td>fail</td>
                <td class="fail"><code>0</code> is less than <code>1</code>.</td>
              </tr>
              <tr class="fail">
                <td>&lt;IssueShape&gt;</td>
                <td>&lt;issue4&gt;</td>
                <td>fail</td>
                <td class="fail"><code>ex:romanNumeral</code> is not a numeric datatype.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="values" typeof="bibo:Chapter" resource="#values" property="bibo:hasPart">
        <h4 id="h-values" resource="#h-values"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.4.6 </span>Values Constraint</span>
        </h4>
        <p>
          The <code><a href="#nodeSatisfies">nodeSatisfies</a></code> semantics for <span class="jobjref"><a class="obj internalDFN" href="#dfn-nodeconstraint" data-link-type="dfn">NodeConstraint</a></span> <span class="param">values</span> depends on a <code>nodeIn</code> function <a href="#nodeIn">defined below</a>.
        </p>
        <p>
          For a node <span class="math">n</span> and constraint value <span class="math">v</span>, <code class="function">nodeSatisfies(<span class="math">n</span>, <span class="math">v</span>)</code> if <span class="math">n</span> matches some <a class="nobref internalDFN" href="#dfn-valuesetvalue" data-link-type="dfn">valueSetValue</a> <span class="math">vsv</span> in <span class="math">v</span>. A term matches a valueSetValue if:
        </p>
        <ul>
          <li><span class="math" id="nodeSatisfies-objectValue">vsv</span> is an <a class="nobref internalDFN" href="#dfn-objectvalue" data-link-type="dfn">objectValue</a> and <span class="math">n = vsv</span>.</li>
          <li><span class="math" id="nodeSatisfies-Stem">vsv</span> is a <a class="nobref internalDFN" href="#dfn-stem" data-link-type="dfn">Stem</a> with <span class="param">stem</span> <span class="math">st</span> and <span class="math">nodeIn(n, st)</span>.</li>
          <li><span class="math" id="nodeSatisfies-StemRange">vsv</span> is a <a class="nobref internalDFN" href="#dfn-stemrange" data-link-type="dfn">StemRange</a> with <span class="param">stem</span> <span class="math">st</span> and <span class="param">exclusions</span> <span class="math">excls</span> and <span class="math function">nodeIn(n, st)</span> and there is no <span class="math">x</span> in <span class="math">excls</span> such that <span class="math function">nodeIn(n, excl)</span>.</li>
          <li><span class="math" id="nodeSatisfies-Wildcard">vsv</span> is a <a class="nobref internalDFN" href="#dfn-wildcard" data-link-type="dfn">Wildcard</a> with <span class="param">exclusions</span> <span class="math">excls</span> and there is no <span class="math">x</span> in <span class="math">excls</span> such that <span class="math function">nodeIn(n, excl)</span>.</li>
        </ul>
        <p>
          <span class="label" id="nodeIn">nodeIn</span>: asserts that an RDF node <span class="math">n</span> is equal to an IRI or is in a set defined by a <span class="jobjref"><a class="obj internalDFN" href="#dfn-stem" data-link-type="dfn">Stem</a></span>.<br> The expression <code class="function">nodeIn(<span class="math">n</span>, <span class="math">s</span>)</code> is satisfied if:
        </p>
        <ul>
          <li><span class="math">s</span> is an IRI and <span class="math">n = s</span>.</li>
          <li><span class="math">s</span> is a <span class="jobjref"><a class="obj internalDFN" href="#dfn-stem" data-link-type="dfn">Stem</a></span> with <span class="param">stem</span> <span class="math">st</span> and:
            <ul>
              <li><span class="math">n</span> is an IRI and <span class="math function"><a href="https://www.w3.org/TR/xpath-functions-31/#func-starts-with">fn:starts-with</a>(n, st)</span>.</li>
              <li><span class="math">n</span> is a <a href="#dfn-blank-node" class="internalDFN" data-link-type="dfn">blank node</a> with identifier <span class="math">l</span> and <span class="math function"><a href="https://www.w3.org/TR/xpath-functions-31/#func-starts-with">fn:starts-with</a>(l, st)</span>.</li>
            </ul>
          </li>
        </ul>
        <div class="example">
          <div class="example-title marker"><span>Values Constraint example 1</span></div>
          <p>NoActionIssueShape requires a state of Resolved or Rejected:</p>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/NoActionIssueShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/state"</span>,
      <span class="hljs-attr">"valueExpr"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>, <span class="hljs-attr">"values"</span>: [
          <span class="hljs-string">"http://schema.example/Resolved"</span>,
          <span class="hljs-string">"http://schema.example/Rejected"</span> ] } } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                      
  ex:NoActionIssueShape {
    ex:state [ ex:Resolved ex:Rejected ]
  }




            </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;issue1&gt; ex:state ex:Resolved .
&lt;issue2&gt; ex:state ex:Unresolved .</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>reason</th>
              </tr>
              <tr class="pass">
                <td>&lt;NoActionIssueShape&gt;</td>
                <td>&lt;issue1&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="fail">
                <td>&lt;NoActionIssueShape&gt;</td>
                <td>&lt;issue2&gt;</td>
                <td>fail</td>
                <td class="fail"><code>ex:state</code> expected to be <code>ex:Resolved</code> or <code>ex:Rejected</code>, <code>ex:Unresolved</code> found.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="example">
          <div class="example-title marker"><span>Values Constraint example 2</span></div>
          <p>An employee must have an email address that is the string "N/A" or starts with "engineering-" or "sales-" but not "sales-contacts" or "sales-interns":</p>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/EmployeeShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/mbox"</span>,
      <span class="hljs-attr">"valueExpr"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>, <span class="hljs-attr">"values"</span>: [
          {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"N/A"</span>},
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"StemRange"</span>, <span class="hljs-attr">"stem"</span>: <span class="hljs-string">"mailto:engineering-"</span> },
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"StemRange"</span>, <span class="hljs-attr">"stem"</span>: <span class="hljs-string">"mailto:sales-"</span>, <span class="hljs-attr">"exclusions"</span>: [
              { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Stem"</span>, <span class="hljs-attr">"stem"</span>: <span class="hljs-string">"mailto:sales-contacts"</span> },
              { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Stem"</span>, <span class="hljs-attr">"stem"</span>: <span class="hljs-string">"mailto:sales-interns"</span> }
            ] }
        ] } } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                         
  ex:EmployeeShape {
    foaf:mbox [ "N/A"
                &lt;mailto:engineering-&gt;~
                &lt;mailto:sales-&gt;~
                    - &lt;mailto:sales-contacts&gt;~
                    - &lt;mailto:sales-interns&gt;~ ]
  }





            </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;issue3&gt; foaf:mbox "N/A" .
&lt;issue4&gt; foaf:mbox &lt;mailto:engineering-2112@a.example&gt; .
&lt;issue5&gt; foaf:mbox &lt;mailto:sales-835@a.example&gt; .
&lt;issue6&gt; foaf:mbox "missing" .
&lt;issue7&gt; foaf:mbox &lt;mailto:sales-contacts-999@a.example&gt; .</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>reason</th>
              </tr>
              <tr class="pass">
                <td>&lt;EmployeeShape&gt;</td>
                <td>&lt;issue3&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="pass">
                <td>&lt;EmployeeShape&gt;</td>
                <td>&lt;issue4&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="pass">
                <td>&lt;EmployeeShape&gt;</td>
                <td>&lt;issue5&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="fail">
                <td>&lt;EmployeeShape&gt;</td>
                <td>&lt;issue6&gt;</td>
                <td>fail</td>
                <td class="fail"><code>"missing"</code> is not in value set.</td>
              </tr>
              <tr class="fail">
                <td>&lt;EmployeeShape&gt;</td>
                <td>&lt;issue7&gt;</td>
                <td>fail</td>
                <td class="fail"><code>&lt;mailto:sales-contacts-999@a.example&gt;</code> is excluded.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="example">
          <div class="example-title marker"><span>Values Constraint example 3</span></div>
          <p>An employee must not have an email address that starts with "engineering-" or "sales-":</p>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/EmployeeShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/mbox"</span>,
      <span class="hljs-attr">"valueExpr"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>, <span class="hljs-attr">"values"</span>: [
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"StemRange"</span>, <span class="hljs-attr">"stem"</span>: {<span class="hljs-attr">"type"</span>: <span class="hljs-string">"Wildcard"</span>},
            <span class="hljs-attr">"exclusions"</span>: [
              { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Stem"</span>, <span class="hljs-attr">"stem"</span>: <span class="hljs-string">"mailto:engineering-"</span> },
              { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Stem"</span>, <span class="hljs-attr">"stem"</span>: <span class="hljs-string">"mailto:sales-"</span> }
            ] }
        ] } } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                
  ex:EmployeeShape {
    foaf:mbox [ . - &lt;mailto:engineering-&gt;~ - &lt;mailto:sales-&gt;~ ]
  }








            </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;issue8&gt; foaf:mbox 123 .
&lt;issue9&gt; foaf:mbox &lt;mailto:core-engineering-2112@a.example&gt; .
&lt;issue10&gt; foaf:mbox &lt;mailto:engineering-2112@a.example&gt; .</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>reason</th>
              </tr>
              <tr class="pass">
                <td>&lt;EmployeeShape&gt;</td>
                <td>&lt;issue8&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="pass">
                <td>&lt;EmployeeShape&gt;</td>
                <td>&lt;issue9&gt;</td>
                <td>pass</td>
                <td class="noreason"></td>
              </tr>
              <tr class="fail">
                <td>&lt;EmployeeShape&gt;</td>
                <td>&lt;issue10&gt;</td>
                <td>fail</td>
                <td class="fail"><code>&lt;mailto:engineering-2112@a.example&gt;</code> is excluded.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <p>
          A value set can have a single value in it. This is used to indicate that a specific value is required, e.g. that an ex:state must be equal to &lt;http://schema.example/Resolved&gt; or the rdf:type of some node must be foaf:Person.
        </p>
      </section>
    </section>

    <section id="shapes-and-TEs" typeof="bibo:Chapter" resource="#shapes-and-TEs" property="bibo:hasPart">
      <h3 id="h-shapes-and-tes" resource="#h-shapes-and-tes"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.5 </span>Shapes and Triple Expressions</span>
      </h3>

      <p>
        Triple expressions are used for defining patterns composed of triple constraints. Shapes associate <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expressions</a> with flags indicating whether triples match if they do not correspond to triple constraints in the <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a>. A <dfn data-dfn-type="dfn" id="dfn-triple-expression">triple expression</dfn> is composed of <span class="jobjref"><a href="#dfn-tripleconstraint" class="internalDFN" data-link-type="dfn">TripleConstraint</a></span> and <span class="jobjref"><a href="#dfn-tripleexprref" class="internalDFN" data-link-type="dfn">tripleExprRef</a></span> objects composed with grouping and choice operators.
      </p>

      <section id="triple-expressions-abstract-syntax" typeof="bibo:Chapter" resource="#triple-expressions-abstract-syntax" property="bibo:hasPart">
        <h4 id="h-triple-expressions-abstract-syntax" resource="#h-triple-expressions-abstract-syntax"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.5.1 </span>JSON Syntax</span>
        </h4>

        <div class="shexjTable">
          <table class="shexj">
            <tbody>
              <tr class="obj">
                <th class="obj"><dfn data-dfn-type="dfn" id="dfn-shape">Shape</dfn></th>
                <td>{</td>
                <td><span class="param">id</span>:<a class="nobref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a>?
                  <!-- <span class="param">virtual</span>:<a>BOOL</a>?  --><span class="param">closed</span>:<a href="#dfn-bool" class="internalDFN" data-link-type="dfn">BOOL</a>? <span class="param">extra</span>:[<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>]? <span class="param">expression</span>:<a class="nobref internalDFN" href="#dfn-tripleexpr" data-link-type="dfn">tripleExpr</a>?
                  <!-- <span class="param">inherit</span>:[<a class="nobref">shapeExprLabel</a>]? --><span class="param">semActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? }</td>
              </tr>
              <tr class="nob">
                <th class="nob"><dfn data-dfn-type="dfn" id="dfn-tripleexpr">tripleExpr</dfn></th>
                <td>=</td>
                <td><a class="objref internalDFN" href="#dfn-eachof" data-link-type="dfn">EachOf</a> | <a class="objref internalDFN" href="#dfn-oneof" data-link-type="dfn">OneOf</a> | <a class="objref internalDFN" href="#dfn-tripleconstraint" data-link-type="dfn">TripleConstraint</a> | <a class="objref internalDFN" href="#dfn-tripleexprref" data-link-type="dfn">tripleExprRef</a> ;</td>
              </tr>
              <tr class="obj">
                <th class="obj"><dfn data-dfn-type="dfn" id="dfn-eachof">EachOf</dfn></th>
                <td>{</td>
                <td><span class="param">id</span>:<a class="nobref internalDFN" href="#dfn-tripleexprlabel" data-link-type="dfn">tripleExprLabel</a>? <span class="param">expressions</span>:[<a class="nobref internalDFN" href="#dfn-tripleexpr" data-link-type="dfn">tripleExpr</a>] <span class="param">min</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">max</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">semActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? <span class="param">annotations</span>:[<a class="objref internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a>]? }</td>
              </tr>
              <tr class="obj">
                <th class="obj"><dfn data-dfn-type="dfn" id="dfn-oneof">OneOf</dfn></th>
                <td>{</td>
                <td><span class="param">id</span>:<a class="nobref internalDFN" href="#dfn-tripleexprlabel" data-link-type="dfn">tripleExprLabel</a>? <span class="param">expressions</span>:[<a class="nobref internalDFN" href="#dfn-tripleexpr" data-link-type="dfn">tripleExpr</a>] <span class="param">min</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">max</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">semActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? <span class="param">annotations</span>:[<a class="objref internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a>]? }</td>
              </tr>
              <tr class="obj">
                <th class="obj"><dfn data-dfn-type="dfn" id="dfn-tripleconstraint">TripleConstraint</dfn></th>
                <td>{</td>
                <td><span class="param">id</span>:<a class="nobref internalDFN" href="#dfn-tripleexprlabel" data-link-type="dfn">tripleExprLabel</a>? <span class="param">inverse</span>:<a href="#dfn-bool" class="internalDFN" data-link-type="dfn">BOOL</a>? <a class="param internalDFN" href="#dfn-predicate" data-link-type="dfn">predicate</a>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> <span class="param">valueExpr</span>:<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>? <span class="param">min</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">max</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">semActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? <span class="param">annotations</span>:[<a class="objref internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a>]? }</td>
              </tr>
              <tr class="nob">
                <th class="nob"><dfn data-dfn-type="dfn" id="dfn-tripleexprref">tripleExprRef</dfn></th>
                <td>=</td>
                <td><a class="objref internalDFN" href="#dfn-tripleexprlabel" data-link-type="dfn">tripleExprLabel</a> ;</td>
              </tr>
              <tr class="nob">
                <th class="nob"><dfn data-dfn-type="dfn" id="dfn-tripleexprlabel">tripleExprLabel</dfn></th>
                <td>=</td>
                <td><a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> | <a href="#dfn-bnode" class="internalDFN" data-link-type="dfn">BNODE</a> ;</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="triple-expressions-semantics" typeof="bibo:Chapter" resource="#triple-expressions-semantics" property="bibo:hasPart">
        <h4 id="h-triple-expressions-semantics" resource="#h-triple-expressions-semantics"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.5.2 </span>Semantics</span>
        </h4>
        <p id="satisfies-Shape">
          The <code><a href="#satisfies">satisfies</a></code> semantics for a <span class="jobjref"><a class="obj internalDFN" href="#dfn-shape" data-link-type="dfn">Shape</a></span> depend on a <code>matches</code> function <a href="#matches">defined below</a>. For a <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a> <span class="math">n</span>, <a href="#dfn-shape" class="internalDFN" data-link-type="dfn">shape</a> <span class="math">S</span>, <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> <span class="math">G</span>, and <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">shapeMap</a> <span class="math">m</span>, <code class="function">satisfies(<span class="math">n</span>, <span class="math">S</span>, <span class="math">G</span>, <span class="math">m</span>)</code> if and only if:
        </p>
        <ul>
          <li>
            <code class="function"><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(<span class="math">G</span>, <span class="math">n</span>)</code> can be partitioned into two sets <span class="math">matched</span> and <span class="math">remainder</span> such that <code class="function">matches(<span class="math">matched</span>, <span class="param">expression</span>, <span class="math">m</span>)</code>. If <span class="param">expression</span> is absent, <code class="function"><span class="math">remainder</span> = <a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(<span class="math">G</span>, <span class="math">n</span>)</code>.<br> Let <span class="label">outs</span> be the <span class="math"><a href="#dfn-arcsout" class="internalDFN" data-link-type="dfn">arcsOut</a></span> in <span class="math">remainder</span>:
            <code class="function"><span class="math">outs</span> = <span class="math">remainder</span> ‚à© <a href="#dfn-arcsout" class="internalDFN" data-link-type="dfn">arcsOut</a>(<span class="math">G</span>, <span class="math">n</span>)</code>.<br> Let <span class="label">matchables</span> be the triples in <span class="math">outs</span> whose <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a> appears in a <span class="jobjref"><a class="obj internalDFN" href="#dfn-tripleconstraint" data-link-type="dfn">TripleConstraint</a></span> in <span class="param">expression</span>. If <span class="param">expression</span> is absent, <code class="function"><span class="math">matchables</span> = <span class="math">√ò</span> (the empty set)</code>.<br> The complexity of partitioning is described briefly in the <a href="http://shex.io/primer/#partition-complexity">ShEx2 Primer</a>.
          </li>
          <li>
            There is no triple in <span class="label">matchables</span> which matches a <span class="jobjref"><a class="obj internalDFN" href="#dfn-tripleconstraint" data-link-type="dfn">TripleConstraint</a></span> in <span class="param">expression</span>.<br> Let <span class="label">unmatchables</span> be the triples in <span class="math">outs</span> which are not in <span class="math">matchables</span>.
            <code class="function"><span class="math">matchables</span> ‚à™ <span class="math">unmatchables</span> = <span class="math">outs</span></code>.
          </li>
          <li>
            There is no triple in <span class="math">matchables</span> whose <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a> does not appear in <span class="param">extra</span>.
          </li>
          <li><span class="param">closed</span> is false or <span class="math">unmatchables</span> is empty.</li>
        </ul>
        <p>
          <span class="label" id="matches">matches</span>: asserts that a <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> is matched by a set of triples that come from the neighbourhood of a node in an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF graph</a>. The expression <code>matches(<span class="math">T</span>, <span class="math">expr</span>, <span class="math">m</span>)</code> indicates that a set of triples <span class="math">T</span> can satisfy these rules:
        </p>
        <ul>
          <li>
            <p id="matches-semActs"><span class="math">expr</span> has <span class="param">semActs</span> and <code class="function">matches(<span class="math">T</span>, <span class="math">expr</span>, <span class="math">m</span>)</code> by the remaining rules in this list and the evaluation of <span class="param">semActs</span> succeeds according to the section below on <a href="#semantic-actions">Semantic Actions</a>.</p>
            <div class="example">
              <div class="math">
                <div style="float:left;">matches(</div>
                <div style="float:left;">T,<br>
                  <div class="inline repchoice">
                    <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"OneOf"</span>, <span class="hljs-attr">"shapeExprs"</span>: [te1, te2, ‚Ä¶], <span class="hljs-attr">"min"</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">"semActs"</span>: [SemAct1, SemAct2, ‚Ä¶] }</pre>
                    <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">(te1 | te2 ‚Ä¶) {2,3}                                                
        %&lt;SemAct1&gt;% %&lt;SemAct2&gt;% ‚Ä¶
</pre>
                  </div>,<br> m)
                </div>
              </div>
              <div style="clear:both;">evaluates as:</div>
              <div class="math">
                <div style="float:left;">matches(</div>
                <div style="float:left;">T,<br>
                  <div class="inline repchoice">
                    <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"OneOf"</span>, <span class="hljs-attr">"shapeExprs"</span>: [te1, te2, ‚Ä¶], <span class="hljs-attr">"min"</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">3</span> }</pre>
                    <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">(te1 | te2 ‚Ä¶) {2,3}                                                 </pre>
                  </div>,<br> m)
                </div>
              </div>
              <div style="clear:both;"></div>
              <span class="math function">and <a href="#semActsSatisfied">semActsSatisfied</a>(<span class="inline json">[<span class="comment">SemAct<sub>1</sub></span>, <span class="comment">SemAct<sub>2</sub>, ‚Ä¶</span>]</span>)</span>
            </div>
          </li>
          <li>
            <p id="matches-cardinality"><span class="math">expr</span> has a <dfn data-dfn-type="dfn" id="dfn-cardinality">cardinality</dfn> of <span class="param">min</span> and/or <span class="param">max</span> not equal to 1, where a <span class="param">max</span> of -1 is treated as unbounded, and <span class="math">T</span> can be partitioned into <span class="math">k</span> subsets <span class="math function">T<sub>1</sub></span>, <span class="math">T<sub>2</sub></span>,‚Ä¶<span class="math">T<sub>k</sub></span> such that <span class="math">min ‚â§ k ‚â§ max</span> and for each <span class="math">T<sub>n</sub></span>, <code class="function">matches(<span class="math">T<sub>n</sub></span>, <span class="math">expr</span>, <span class="math">m</span>)</code> by the remaining rules in this list.</p>
            <div class="example">
              <div class="math">
                <div style="float:left;">matches(</div>
                <div style="float:left;">T,<br>
                  <div class="inline repchoice">
                    <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"OneOf"</span>, <span class="hljs-attr">"shapeExprs"</span>: [te1, te2, ‚Ä¶], <span class="hljs-attr">"min"</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">3</span> }</pre>
                    <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">(te1 | te2 ‚Ä¶) {2,3}                                                 </pre>
                  </div>,<br> m)
                </div>
              </div>
              <div style="clear:both;">evaluates as:</div>
              <div class="math">
                <div style="float:left;">Let e =&nbsp;</div>
                <div style="float:left;">
                  <div class="inline repchoice">
                    <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"OneOf"</span>, <span class="hljs-attr">"shapeExprs"</span>: [te1, te2, ‚Ä¶] }</pre>
                    <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">(te1 | te2 ‚Ä¶)                                   </pre>
                  </div>
                </div>
                <div style="clear:both;"></div> (<span class="math function">matches(T<sub>1</sub>, e, m)</span> and
                <span class="math function">matches(T<sub>2</sub>, e, m)</span><br> &nbsp;and T = T<sub>1</sub> ‚à™ T<sub>2</sub>)<br> or
                <br> (<span class="math function">matches(T<sub>1</sub>, e, m)</span> and
                <span class="math function">matches(T<sub>2</sub>, e, m)</span> and
                <span class="math function">matches(T<sub>3</sub>, e, m)</span><br> &nbsp;and T = T<sub>1</sub> ‚à™ T<sub>2</sub> ‚à™ T<sub>3</sub>)</div>
            </div>
            <!-- div class="example">
            <div class="math"><div style="float:left;">matches(</div><div style="float:left;">T,<br/>
            <div class="inline json">
              <pre>{ "type": "OneOf", "shapeExprs": [<span class="comment">te<sub>1</sub></span>, <span class="comment">te<sub>2</sub>, ‚Ä¶</span>], "min": 2, "max": 2 }</pre></div>,<br/>
              m)</div>
            </div>
            <div style="clear:both;">evaluates as:</div>
            <div class="math"><div style="float:left;">Let subExpr = </div><div style="float:left;">
            <div class="inline json">
              <pre>{ "type": "OneOf", "shapeExprs": [<span class="comment">te<sub>1</sub></span>, <span class="comment">te<sub>2</sub>, ‚Ä¶</span>] }</pre></div></div>
            </div>
            <div style="clear:both;"></div>
            <div class="math"><div style="float:left;">matches(</div><div style="float:left;"><span class="math">T<sub>1</sub></span>,<br/>
            <div class="inline json">
              <pre>{ "type": "OneOf", "shapeExprs": [<span class="comment">te<sub>1</sub></span>, <span class="comment">te<sub>2</sub>, ‚Ä¶</span>] }</pre></div>,<br/>
              m)</div>
            </div>
            <div style="clear:both;"></div>
            <div class="math"><div style="float:left;">and matches(</div><div style="float:left;"><span class="math">T<sub>2</sub></span>,<br/>
            <div class="inline json">
              <pre>{ "type": "OneOf", "shapeExprs": [<span class="comment">te<sub>1</sub></span>, <span class="comment">te<sub>2</sub>, ‚Ä¶</span>] }</pre></div>,<br/>
              m)</div>
            </div>
            <div style="clear:both;"></div>
            <div class="math function" >and T = T<sub>1</sub> ‚à™ T<sub>2</sub></div>
          </div -->
          </li>
          <li>
            <p id="matches-OneOf"><span class="math">expr</span> is a <span class="jobjref"><a class="obj internalDFN" href="#dfn-oneof" data-link-type="dfn">OneOf</a></span> and there is some <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> <span class="math">se2</span> in <span class="param">shapeExprs</span> such that a <code class="function">matches(<span class="math">T</span>, <span class="math">se2</span>, <span class="math">m</span>)</code>.</p>
            <div class="example">
              <div class="math">
                <div style="float:left;">matches(</div>
                <div style="float:left;">T,<br>
                  <div class="inline repchoice">
                    <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"OneOf"</span>, <span class="hljs-attr">"shapeExprs"</span>: [
  { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"shapeExprs"</span>: [te3, te4, ‚Ä¶] },
  { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleExpression"</span>, <span class="hljs-attr">"min"</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">-1</span>,
    <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/name"</span> }
] }</pre>
                    <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                             
  (te3 ; te4 ; ‚Ä¶)
  | &lt;http://xmlns.com/foaf/0.1/name&gt; . +

 </pre>
                  </div>,<br> m)
                </div>
              </div>
              <div style="clear:both;">evaluates as:</div>
              <div class="math">
                <div style="float:left;">matches(</div>
                <div style="float:left;">T,<br>
                  <div class="inline repchoice">
                    <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"shapeExprs"</span>: [te3, te4, ‚Ä¶] }</pre>
                    <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">te3 ; te4 ; ‚Ä¶                                    </pre>
                  </div>,<br> m)
                </div>
              </div>
              <div style="clear:both;"></div>
              <div class="math">
                <div style="float:left;">or matches(</div>
                <div style="float:left;">T,<br>
                  <div class="inline repchoice">
                    <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleExpression"</span>, <span class="hljs-attr">"min"</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">-1</span>,
    <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/name"</span> }</pre>
                    <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">&lt;http://xmlns.com/foaf/0.1/name&gt; . +                       
 </pre>
                  </div>,<br> m)
                </div>
              </div>
            </div>
          </li>
          <li>
            <p id="matches-EachOf"><span class="math">expr</span> is an <span class="jobjref"><a class="obj internalDFN" href="#dfn-eachof" data-link-type="dfn">EachOf</a></span> and there is some partition of <span class="math">T</span> into <span class="math">T<sub>1</sub></span>, <span class="math">T<sub>2</sub></span>,‚Ä¶ such that for every expression <span class="function"><span class="math">expr<sub>1</sub></span>, <span class="math">expr<sub>2</sub></span>,‚Ä¶</span> in <span class="param">shapeExprs</span>, <code class="function">matches(<span class="math">T<sub>n</sub></span>, <span class="math">expr<sub>n</sub></span>, <span class="math">m</span>)</code>.</p>
            <div class="example">
              <div class="math">
                <div style="float:left;">matches(</div>
                <div style="float:left;">T,<br>
                  <div class="inline repchoice">
                    <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"shapeExprs"</span>: [
  { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleExpression"</span>,
    <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/givenName"</span> },
  { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleExpression"</span>,
    <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/familyName"</span> }
] }</pre>
                    <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                         
&lt;http://xmlns.com/foaf/0.1/givenName&gt; . ;

&lt;http://xmlns.com/foaf/0.1/familyName&gt; .

 </pre>
                  </div>,<br> m)
                </div>
              </div>
              <div style="clear:both;">evaluates as:</div>
              <div class="math">
                <div style="float:left;">matches(</div>
                <div style="float:left;">T<sub>1</sub>,<br>
                  <div class="inline repchoice">
                    <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleExpression"</span>,
    <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/givenName"</span> }</pre>
                    <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">&lt;http://xmlns.com/foaf/0.1/givenName&gt; .                 
 </pre>
                  </div>,<br> m)
                </div>
              </div>
              <div style="clear:both;"></div>
              <div class="math">
                <div style="float:left;">and matches(</div>
                <div style="float:left;">T<sub>2</sub>,<br>
                  <div class="inline repchoice">
                    <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleExpression"</span>,
    <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/familyName"</span> }</pre>
                    <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">&lt;http://xmlns.com/foaf/0.1/familyName&gt; .                 
 </pre>
                  </div>,<br> m)
                </div>
              </div>
              <div style="clear:both;"></div>
              <span class="math">and T = T<sub>1</sub> ‚à™ T<sub>2</sub></span>
            </div>
          </li>
          <li>
            <p id="matches-TripleConstraint"><span class="math">expr</span> is a <span class="jobjref"><a class="obj internalDFN" href="#dfn-tripleconstraint" data-link-type="dfn">TripleConstraint</a></span> and:</p>
            <ul>
              <li>
                <span class="math">T</span> is a set of one triple.<br> Let <span class="label">t</span> be the soul triple in <span class="math">T</span>.
              </li>
              <li>
                <span class="math">t</span>'s <a class="param internalDFN" href="#dfn-predicate" data-link-type="dfn">predicate</a> equals <span class="math">expr</span>'s <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a>.<br> Let <span class="label">value</span> be <span class="math">t</span>'s subject if <span class="param">inverse</span> is true, else <span class="math">t</span>'s object.
              </li>
              <li>
                if <span class="param">inverse</span> is true, <span class="math">t</span> is in <span class="math"><a href="#dfn-arcsin" class="internalDFN" data-link-type="dfn">arcsIn</a></span>, else <span class="math">t</span> is in <span class="math"><a href="#dfn-arcsout" class="internalDFN" data-link-type="dfn">arcsOut</a></span>.
              </li>
              <li>either
                <ul>
                  <li>
                    <p><span class="math">expr</span> has no <span class="param">valueExpr</span></p>
                    <div class="example">
                      <div class="math">
                        <div style="float:left;">matches(</div>
                        <div style="float:left;">T,<br>
                          <div class="inline repchoice">
                            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleExpression"</span>,
  <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/givenName"</span> }</pre>
                            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">&lt;http://xmlns.com/foaf/0.1/givenName&gt; . ;             
 </pre>
                          </div>,<br> m)
                        </div>
                      </div>
                      <div style="clear:both;">holds if
                        <ul class="tight">
                          <li><span class="math">T</span> has exactly one triple <span class="math">t</span>.</li>
                          <li><span class="math">t</span> has the <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a> "<code>http://xmlns.com/foaf/0.1/givenName</code>"</li>
                        </ul>
                      </div>
                    </div>
                  </li>
                  <li>
                    <p>or <code class="function">satisfies(<span class="math">value</span>, <span class="param">valueExpr</span>, <span class="math">G</span>, <span class="math">m</span>)</code>.</p>
                    <div class="example">
                      <div class="math">
                        <div style="float:left;">matches(</div>
                        <div style="float:left;">T,<br>
                          <div class="inline repchoice">
                            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>, <span class="hljs-attr">"inverse"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://purl.org/dc/elements/1.1/author"</span>,
  <span class="hljs-attr">"valueExpr"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span> }</pre>
                            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                        
^&lt;http://purl.org/dc/elements/1.1/author&gt;
        @&lt;http://schema.example/IssueShape&gt;</pre>
                          </div>,<br> m)
                        </div>
                      </div>
                      <div style="clear:both;">holds if
                        <ul class="tight">
                          <li><span class="math">T</span> has exactly one triple <span class="math">t</span>.</li>
                          <li><span class="math">t</span> has the <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a> "<code>http://purl.org/dc/elements/1.1/author</code>"</li>
                          <li><span class="math">t</span> has a subject <span class="math">n2</span></li>
                          <li>The schema's <a class="param internalDFN" href="#dfn-shapes" data-link-type="dfn">shapes</a> maps "<code>http://schema.example/IssueShape</code>" to <span class="math">se2</span></li>
                          <li><span class="math function">satisfies(n2, se2, G, m)</span></li>
                        </ul>
                      </div>
                    </div>
                    <!--
                <p class="issue">[Editorial] The following is a more verbose description of the above. Which is preferred?</p>
                <div class="example">
                  For the schema<br/>
                  <div class="inline json">
                    <pre>{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/UserShape",
    "type": "Shape", "expression": {
      "type": "TripleConstraint", "inverse": true,
      "predicate": "http://purl.org/dc/elements/1.1/author",
      "valueExpr": {
        "type": "ShapeAnd", "shapeExprs": [
          { "type": "NodeConstraint", "nodeKind": "iri", "pattern": "http:.*" },
          "http://schema.example/IssueShape"
        ] } } },
  { "id": "http://schema.example/IssueShape", "type": "Shape" } ] }</pre>
                  </div><div style="clear:both;"></div>
                  <span class="math"><div style="float:left;">matches(</div><div style="float:left;">T,<br/>
                  <div class="inline json">
                    <pre>{ "type": "TripleConstraint", "inverse": true,
  "predicate": "http://purl.org/dc/elements/1.1/author",
  "valueExpr": { ‚Ä¶ } }</pre></div>,<br/>
              m)</div>
                  </span>
                  <div style="clear:both;">holds if
                  <ul class="tight">
                    <li><span class="math">T</span> has exactly one triple <span class="math">t</span>.</li>
                    <li><span class="math">t</span> has the predicate "<code>http://purl.org/dc/elements/1.1/author</code>"</li>
                    <li><span class="math">t</span> has a subject <span class="math">n2</span></li>
                    <li>The schema's <a class="param">shapes</a> maps "<code>http://schema.example/IssueShape</code>" to <span class="math">se2</span></li>
                    <li><span class="math function" >satisfies(n2, se2, G, m)</span></li>
                  </ul></div>
                </div>
                -->
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <p id="matches-tripleExprRef">
              <span class="math">expr</span> is an <span class="jobjref"><a class="obj internalDFN" href="#dfn-tripleexprref" data-link-type="dfn">tripleExprRef</a></span> and <code class="function">satisfies(<span class="math">value</span>, tripleExprWithId(<span class="param">tripleExprRef</span>), <span class="math">G</span>, <span class="math">m</span>)</code>.<br> The <code class="function">tripleExprWithId</code> function is defined in <a href="#tripleExprRef-requirement">Triple Expression Reference Requirement</a> below.
            </p>
            <div class="example">
              For the schema<br>
              <div class="inline repchoice">
                <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/EmployeeShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"expressions"</span>: [
        <span class="hljs-string">"http://schema.example/nameExpr"</span>,
        { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
          <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/empID"</span>,
          <span class="hljs-attr">"valueExpr"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
            <span class="hljs-attr">"datatype"</span>: <span class="hljs-string">"http://www.w3.org/2001/XMLSchema#integer"</span> } } ] } },
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/PersonShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/nameExpr"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/name"</span> } } ] }</pre>
                <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                             
&lt;http://schema.example/EmployeeShape&gt; {
    &amp;&lt;http://schema.example/nameExpr&gt; ;
    &lt;http://schema.example/empID&gt;
          &lt;http://www.w3.org/2001/XMLSchema#integer&gt;



}
&lt;http://schema.example/PersonShape&gt; {

  $&lt;http://schema.example/nameExpr&gt;
    &lt;http://xmlns.com/foaf/0.1/name&gt; ;
}</pre>
              </div>
              <div style="clear:both;"></div>
              <div class="math">
                <div style="float:left;">matches(</div>
                <div style="float:left;">T,<br>
                  <div class="inline json">
                    <pre aria-busy="false" aria-live="polite" class="hljs javascript"><span class="hljs-string">"http://schema.example/PersonShape"</span></pre>
                  </div>,<br> m)
                </div>
              </div>
              <div style="clear:both;">holds if
                <ul class="tight">
                  <li>The schema has a shape <span class="math">se2</span> with the <span class="param">id</span> "<code>http://schema.example/PersonShape</code>"</li>
                  <li><span class="math function">satisfies(n, se2, G, m)</span></li>
                </ul>
              </div>
            </div>
          </li>
        </ul>
      </section>
    </section>

    <section id="schema-requirements" typeof="bibo:Chapter" resource="#schema-requirements" property="bibo:hasPart">
      <h3 id="h-schema-requirements" resource="#h-schema-requirements"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.6 </span>Schema Requirements</span>
      </h3>
      <p>
        The semantics defined above assume two structural requirements beyond those imposed by the grammar of the abstract syntax. These ensure referential integrity and eliminate logical paradoxes such as those that arrise through the use of negation. These are not constraints expressed by the schema but instead those imposed on the schema.
      </p>

      <section id="validation-requirement" typeof="bibo:Chapter" resource="#validation-requirement" property="bibo:hasPart">
        <h4 id="h-validation-requirement" resource="#h-validation-requirement"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.6.1 </span>Schema Validation Requirement</span>
        </h4>

        <p>A <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> <span class="math">G</span> is said to <dfn data-dfn-type="dfn" id="dfn-conform">conform</dfn> with a <a href="#dfn-schema" class="internalDFN" data-link-type="dfn">schema</a> <span class="math">S</span> with a <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a> <span class="math">m</span> when:</p>
        <ol class="algorithm">
          <li>Every, <a href="#dfn-semact" class="internalDFN" data-link-type="dfn">SemAct</a> in the <a href="#dfn-startacts" class="internalDFN" data-link-type="dfn">startActs</a> of <span class="math">S</span> has a successful evaluation of <a href="#sumActsSatisfied">semActsSatisfied</a>.</li>
          <li>Every <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a> <span class="math">n</span> in <span class="math">m</span> <a href="#dfn-conform" class="internalDFN" data-link-type="dfn">conforms</a> to its associated
            <a href="#dfn-shapeexprref" class="internalDFN" data-link-type="dfn">shapeExprRefs</a> <span class="math">se<sub>n</sub></span> where for each <a href="#dfn-shapeexprref" class="internalDFN" data-link-type="dfn">shapeExprRef</a> <span class="math">se<sub>i</sub></span> in <span class="math">se<sub>n</sub></span>:
            <ol class="algorithm">
              <li><span class="math">se<sub>i</sub></span> references a <a href="#dfn-shapeexpr" class="internalDFN" data-link-type="dfn">ShapeExpr</a> in <a href="#dfn-shapes" class="internalDFN" data-link-type="dfn">shapes</a>, and</li>
              <li><code class="function">satisfies(<span class="math">n</span>, <span class="math">se<sub>i</sub></span>, <span class="math">G</span>, <span class="math">m</span>)</code> for each <a href="#dfn-shape" class="internalDFN" data-link-type="dfn">shape</a> <span class="math">se<sub>i</sub></span> in <span class="math">se<sub>n</sub></span>.</li>
            </ol>
          </li>
          <li>Each optional focus node <span class="math">f<sub>i</sub></span> in <a data-link-for="ShExOptions" href="#dom-shexoptions-focusnodes" class="internalDFN" data-link-type="dfn"><code>focusNodes</code></a>,
            <span class="math">m</span> has a <a href="#dfn-start" class="internalDFN" data-link-type="dfn">start</a> <a href="#dfn-shapeexpr" class="internalDFN" data-link-type="dfn">shapeExpr</a> <span class="math">se</span>, and
            <code class="function">satisfies(<span class="math">f<sub>i</sub></span>, <span class="math">se</span>, <span class="math">G</span>, <span class="math">m</span>)</code>.</li>
        </ol>
      </section>

      <section id="shapeExprRef-requirement" typeof="bibo:Chapter" resource="#shapeExprRef-requirement" property="bibo:hasPart">
        <h4 id="h-shapeexprref-requirement" resource="#h-shapeexprref-requirement"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.6.2 </span>Shape Expression Reference Requirement</span>
        </h4>
        <p>An <span class="jobjref"><a href="#dfn-shapeexprref" class="internalDFN" data-link-type="dfn">shapeExprRef</a></span> <em class="rfc2119" title="MUST">MUST</em> appear in the schema's <a class="param internalDFN" href="#dfn-shapes" data-link-type="dfn">shapes</a> map and the corresponding <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> <em class="rfc2119" title="MUST">MUST</em> be a <span class="jobjref"><a href="#dfn-shape" class="internalDFN" data-link-type="dfn">Shape</a></span> with a <span class="param">shapeExpr</span>. The function <code>shapeExprWithId(<span class="param">shapeExprRef</span>)</code> returns the shape's <span class="param">shapeExpr</span>.
        </p>

        <div class="example">
          <p>
            Following are two valid shapeExprRefs:
          </p>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/PersonShape"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/nameExpr"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
        <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/name"</span>
      } },
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/EmployeeShape"</span>, <span class="hljs-attr">"type"</span>:<span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"shapeExprs"</span>: [
        <span class="hljs-string">"http://schema.example/nameExpr"</span>,
        {
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
          <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/employeeNumber"</span> }
} ] } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                             
    ex:PersonShape {
      foaf:name .
    }

    ex:EmployeeShape ex:PersonShape AND {
      ex:employeeNumber .
    }




          </pre>
          </div>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/PersonShape"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/nameExpr"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
        <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/name"</span>
      } },
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/EmployeeShape"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
          <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/dependent"</span>,
          <span class="hljs-attr">"valueExpr"</span>: <span class="hljs-string">"http://schema.example/PersonShape"</span> } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                  
    ex:PersonShape {
      foaf:name .
    }



    ex:EmployeeShape {
      ex:dependent ex:PersonShape*
    }
          </pre>
          </div>
          <p>
            This shapeExprRef is invalid because there is no corresponding <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a>:
          </p>
          <div class="repchoice error">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/S1"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>:
        <span class="hljs-string">"http://schema.example/MissingShapeExpr"</span>
} ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                
    S1 {
      &amp;MissingShapeExpr
    }
          </pre>
          </div>
          <p>This shapeExprRef is invalid because the referenced object is a <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> instead of a <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a>:</p>
          <div class="repchoice error">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/CustomerShape"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
          <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/discountExpr"</span>,
          <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/discount"</span> } },
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/EmployeeShape"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
        <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/contactFor"</span>,
        <span class="hljs-attr">"valueExpr"</span>: <span class="hljs-string">"http://schema.example/CustomerShape"</span>
} } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                 
    ex:CustomerShape {
      $ex:discountExpr ex:discount .
    }

    ex:EmployeeShape {
      ex:contactFor @ex:CustomerShape
    }

          </pre>
          </div>
        </div>
      </section>

      <section id="tripleExprRef-requirement" typeof="bibo:Chapter" resource="#tripleExprRef-requirement" property="bibo:hasPart">
        <h4 id="h-tripleexprref-requirement" resource="#h-tripleexprref-requirement"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.6.3 </span>Triple Expression Reference Requirement</span>
        </h4>
        <p>An <span class="jobjref"><a href="#dfn-tripleexprref" class="internalDFN" data-link-type="dfn">tripleExprRef</a></span> <em class="rfc2119" title="MUST">MUST</em> identify a <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> in the schema. The function <code>tripleExprWithId(<span class="param">tripleExprRef</span>)</code> returns the <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> with the id <span class="param">tripleExprRef</span>.
        </p>

        <div class="example">
          <p>
            Following is a valid <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> reference:
          </p>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/PersonShape"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/nameExpr"</span>,
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
        <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/name"</span>
      } },
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/EmployeeShape"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: { <span class="hljs-attr">"type"</span>:<span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"shapeExprs"</span>: [
        <span class="hljs-string">"http://schema.example/nameExpr"</span>,
        { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
          <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/employeeNumber"</span> }
] } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                      
    ex:PersonShape {
      foaf:name .
    }



    ex:EmployeeShape {
      &amp;ex:PersonShape ;
      ex:employeeNumber .
    }

          </pre>
          </div>
          <p>
            This <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> reference is invalid because there is no corresponding triple expression:
          </p>
          <div class="repchoice error">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/S1"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>:
        <span class="hljs-string">"http://schema.example/missingTripleExpr"</span>
} ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                 
    S1 {
      &amp;missingTripleExpr
    }
          </pre>
          </div>
          <p>This triple expression reference is invalid because the referenced object is a <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> instead of a triple expression:</p>
          <div class="repchoice error">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/CustomerShape"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"ShapeAnd"</span>, <span class="hljs-attr">"shapeExprs"</span>: [ ‚Ä¶ ]
    },
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/PreferredCustomerShape"</span>,
      <span class="hljs-attr">"type"</span>:<span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: { <span class="hljs-attr">"type"</span>:<span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"expressions"</span>: [
        <span class="hljs-string">"http://schema.example/CustomerShape"</span>,
        { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
          <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/discount"</span> }
] } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                       
    ex:CustomerShape {
      ‚Ä¶; ‚Ä¶
    }
    ex:PreferredCustomerShape {
      &amp;ex:CustomerShape ;
      ex:discount .
    }

          </pre>
          </div>
        </div>
      </section>

      <section id="negation-requirement" typeof="bibo:Chapter" resource="#negation-requirement" property="bibo:hasPart">
        <h4 id="h-negation-requirement" resource="#h-negation-requirement"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.6.4 </span>Negation Requirement</span>
        </h4>
        <p>
          A schema <em class="rfc2119" title="MUST NOT">MUST NOT</em> contain any <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> <span class="math">S</span> with negated references, either directly or transitively, to <span class="math">S</span>. A reference to <span class="math">S</span> is negated if it containes an odd number of nested negations. A nested negation is any of:
        </p>
        <ul>
          <li>
            <p>a <span class="param">shapeExpr</span> in a <span class="jobjref"><a href="#dfn-shapenot" class="internalDFN" data-link-type="dfn">ShapeNot</a></span></p>
            <div class="example">
              <p>
                This negated self-reference violates the negation requirement:
              </p>
              <div class="repchoice error">
                <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/#S"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ShapeNot"</span>&gt;, <span class="hljs-attr">"shapeExpr"</span>:
      <span class="hljs-string">"http://schema.example/#S"</span>
} ] }</pre>
                <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                       
    ex:S NOT @ex:S


                </pre>
              </div>
              <p>
                This negated, indirect self-reference violates the negation requirement:
              </p>
              <div class="repchoice error">
                <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/#S"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ShapeNot"</span>&gt;, <span class="hljs-attr">"shapeExpr"</span>:
      <span class="hljs-string">"http://schema.example/#T"</span> },
    <span class="hljs-string">"http://schema.example/#T"</span>: <span class="hljs-string">"http://schema.example/#S"</span>
] }</pre>
                <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                          
    ex:S NOT @ex:T


    ex:T @ex:S
                </pre>
              </div>
              <p>
                This doubly-negated self-reference does not violate the negation requirement:
              </p>
              <div class="repchoice">
                <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/#S"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ShapeNot"</span>, <span class="hljs-attr">"shapeExpr"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ShapeOr"</span>, <span class="hljs-attr">"shapeExprs"</span>: [
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>, <span class="hljs-attr">"nodeKind"</span>: <span class="hljs-string">"iri"</span> },
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ShapeNot"</span>,
            <span class="hljs-attr">"shapeExpr"</span>: <span class="hljs-string">"http://schema.example/#S"</span> }
] } } ] }</pre>
                <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                          
    ex:S NOT (IRI OR NOT @ex:S)





                </pre>
              </div>
            </div>
          </li>
          <li>
            a <span class="param">valueExpr</span> in a <span class="jobjref"><a href="#dfn-tripleconstraint" class="internalDFN" data-link-type="dfn">TripleConstraint</a></span> with <a class="param internalDFN" href="#dfn-predicate" data-link-type="dfn">predicate</a> <span class="math">p</span> inside a <span class="jobjref"><a href="#dfn-shape" class="internalDFN" data-link-type="dfn">Shape</a></span> with <span class="param">extra</span> <span class="math">p</span>
            <div class="example">
              <p>
                This self-reference on a <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a> designated as <span class="param">extra</span> violates the negation requirement:
              </p>
              <div class="repchoice error">
                <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/#S"</span>:
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"Shape"</span>,
      <span class="hljs-attr">"extra"</span>: [ <span class="hljs-string">"http://schema.example/#p"</span> ], <span class="hljs-attr">"expression"</span>:
      { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
        <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/#p"</span>,
        <span class="hljs-attr">"valueExpr"</span>: <span class="hljs-string">"http://schema.example/#S"</span>
} } ] }</pre>
                <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                            
  ex:S EXTRA ex:p {
    ex:p @ex:S
  }



              </pre>
              </div>
              <p>
                The same shape with a negated self-reference still violates the negation requirement because the reference occurs with a <span class="jobjref"><a href="#dfn-shapenot" class="internalDFN" data-link-type="dfn">ShapeNot</a></span>:
              </p>
              <div class="repchoice error">
                <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/#S"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>,
      <span class="hljs-attr">"extra"</span>: [ <span class="hljs-string">"http://schema.example/#p"</span> ],
      <span class="hljs-attr">"expression"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
        <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/#p"</span>,
        <span class="hljs-attr">"valueExpr"</span>: {
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"ShapeNot"</span>, <span class="hljs-attr">"shapeExpr"</span>: <span class="hljs-string">"http://schema.example/#S"</span>
} } } ] }</pre>
                <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                     
    ex:S EXTRA ex:p {
      ex:p NOT @ex:S
    }





              </pre>
              </div>
            </div>
          </li>
        </ul>
      </section>

    </section>

    <section id="semantic-actions" typeof="bibo:Chapter" resource="#semantic-actions" property="bibo:hasPart">
      <h3 id="h-semantic-actions" resource="#h-semantic-actions"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.7 </span>Semantic Actions</span>
      </h3>
      <p>
        Semantic actions serve as an extension point for Shape Expressions. They appear in lists in <span class="jobjref"><a href="#dfn-schema" class="internalDFN" data-link-type="dfn">Schema</a></span>'s <span class="param">startActs</span> and <span class="jobjref"><a href="#dfn-shape" class="internalDFN" data-link-type="dfn">Shape</a></span>, <span class="jobjref"><a href="#dfn-oneof" class="internalDFN" data-link-type="dfn">OneOf</a></span>, <span class="jobjref"><a href="#dfn-eachof" class="internalDFN" data-link-type="dfn">EachOf</a></span> and <span class="jobjref"><a href="#dfn-tripleconstraint" class="internalDFN" data-link-type="dfn">TripleConstraint</a></span>'s <span class="param">semActs</span>.
      </p>
      <p>
        A semantic action is a tuple of an identifier and some optional code:
      </p>
      <div class="shexjTable">
        <table class="shexj">
          <tbody>
            <tr class="obj">
              <th class="obj"><dfn data-dfn-type="dfn" id="dfn-semact">SemAct</dfn></th>
              <td>{</td>
              <td><span class="param">name</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> <span class="param">code</span>:<a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a>? }</td>
            </tr>
          </tbody>
        </table>
      </div>

      <section id="semantic-actions-semantics" typeof="bibo:Chapter" resource="#semantic-actions-semantics" property="bibo:hasPart">
        <h4 id="h-semantic-actions-semantics" resource="#h-semantic-actions-semantics"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.7.1 </span>Semantics</span>
        </h4>
        <p>
          The evaluation <span id="semActsSatisfied" class="label">semActsSatisfied</span> on a list of <span class="jobjref"><a href="#dfn-semact" class="internalDFN" data-link-type="dfn">SemAct</a></span>s returns success or failure. The evaluation of an individual <span class="jobjref"><a href="#dfn-semact" class="internalDFN" data-link-type="dfn">SemAct</a></span> is implementation-dependent.
        </p>
      </section>

      <section id="semantic-actions-uses" typeof="bibo:Chapter" resource="#semantic-actions-uses" property="bibo:hasPart">
        <h4 id="h-semantic-actions-uses" resource="#h-semantic-actions-uses"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.7.2 </span>Use - informative</span>
        </h4>
        <p>
          A practical evaluation of a <span class="jobjref"><a href="#dfn-semact" class="internalDFN" data-link-type="dfn">SemAct</a></span> will provide access to some context. For instance, the <a href="http://shex.io/extensions/Test/#def">http://shex.io/extensions/Test/</a> extension requires access to the subject, <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a> and object of a triple matching a <span class="jobjref"><a href="#dfn-tripleconstraint" class="internalDFN" data-link-type="dfn">TripleConstraint</a></span>. These are used in a <code>print</code> function.
        </p>
        <div class="example">
          <div class="example-title marker"><span>Semantic Actions example 1</span></div>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://a.example/S1"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>, <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://a.example/p1"</span>,
        <span class="hljs-attr">"min"</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">-1</span>,
        <span class="hljs-attr">"semActs"</span>: [
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"SemAct"</span>, <span class="hljs-attr">"code"</span>: <span class="hljs-string">" print(s) "</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"http://shex.io/extensions/Test/"</span> },
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"SemAct"</span>, <span class="hljs-attr">"code"</span>: <span class="hljs-string">" print(o) "</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"http://shex.io/extensions/Test/"</span> } ] } } ] }
</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                       
    ex:S1 {
      ex:p1 .+ %Test:{ print(s) %} %Test:{ print(o) %}
    }





              </pre>
          </div>
          <pre class="data hljs undefined" aria-busy="false" aria-live="polite">&lt;http://a.example/n1&gt; &lt;http://a.example/p1&gt; &lt;http://a.example/o1&gt; .
&lt;http://a.example/n2&gt; &lt;http://a.example/p1&gt; "a", "b" .
&lt;http://a.example/n3&gt; &lt;http://a.example/p2&gt; &lt;http://a.example/o2&gt; .</pre>
          <table>
            <tbody>
              <tr>
                <th class="schema">shape</th>
                <th class="data">node</th>
                <th>result</th>
                <th>print arguments</th>
              </tr>
              <tr class="pass">
                <td>&lt;S1&gt;</td>
                <td>&lt;n1&gt;</td>
                <td>pass</td>
                <td>http://a.example/s1<br>http://a.example/o1</td>
              </tr>
              <tr class="pass">
                <td>&lt;S1&gt;</td>
                <td>&lt;n2&gt;</td>
                <td>pass</td>
                <td>http://a.example/s1<br>"a"<br>http://a.example/s1<br>"b"</td>
              </tr>
              <tr class="fail">
                <td>&lt;S1&gt;</td>
                <td>&lt;n3&gt;</td>
                <td>fail</td>
                <td class="noreason"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </section>

    <section id="annotations" typeof="bibo:Chapter" resource="#annotations" property="bibo:hasPart">
      <h3 id="h-annotations" resource="#h-annotations"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.8 </span>Annotations</span>
      </h3>
      <p>
        Annotations provide a format-independent way to provide additional information about elements in a schema. They appear in lists in <span class="jobjref"><a href="#dfn-shape" class="internalDFN" data-link-type="dfn">Shape</a></span>, <span class="jobjref"><a href="#dfn-oneof" class="internalDFN" data-link-type="dfn">OneOf</a></span>, <span class="jobjref"><a href="#dfn-eachof" class="internalDFN" data-link-type="dfn">EachOf</a></span> and <span class="jobjref"><a href="#dfn-tripleconstraint" class="internalDFN" data-link-type="dfn">TripleConstraint</a></span>'s <span class="param">annotations</span>.
      </p>
      <div class="shexjTable">
        <table class="shexj">
          <tbody>
            <tr class="obj">
              <th class="obj"><dfn data-dfn-type="dfn" id="dfn-annotation">Annotation</dfn></th>
              <td>{</td>
              <td><span class="param"><a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a></span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> <span class="param">object</span>:<a class="nobref internalDFN" href="#dfn-objectvalue" data-link-type="dfn">objectValue</a> }</td>
            </tr>
          </tbody>
        </table>
      </div>

      <section id="annotations-semantics" typeof="bibo:Chapter" resource="#annotations-semantics" property="bibo:hasPart">
        <h4 id="h-annotations-semantics" resource="#h-annotations-semantics"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.8.1 </span>Semantics - informative</span>
        </h4>
        <p>
          Annotations do not affect whether a node conforms to some shape. Because they are part of the structure of the schema, they can be parsed in one ShEx format and emitted in that format or another.
        </p>
        <div class="example">
          <div class="example-title marker"><span>Annotations example 1</span></div>
          <div class="repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
        <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/status"</span>,
        <span class="hljs-attr">"annotations"</span>: [
           { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Annotation"</span>,
             <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://www.w3.org/2000/01/rdf-schema#comment"</span>,
             <span class="hljs-attr">"object"</span>: {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"Represents reported software issues."</span>} },
           { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Annotation"</span>,
             <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://www.w3.org/2000/01/rdf-schema#label"</span>,
             <span class="hljs-attr">"object"</span>: {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"software issue"</span>} } ] } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                         
    ex:IssueShape {
      ex:status .
          // rdfs:comment "Represents reported software issues."
          // rdfs:label "software issue"
    }




              </pre>
          </div>
        </div>
      </section>
    </section>

    <section id="validation-examples" typeof="bibo:Chapter" resource="#validation-examples" property="bibo:hasPart">
      <h3 id="h-validation-examples" resource="#h-validation-examples"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.9 </span>Validation Examples</span>
      </h3>
      <p>
        The following examples demonstrate proofs for validations in the form of a nested list of invocations of the evaluation functions defined above.
      </p>

      <section id="example-simple" typeof="bibo:Chapter" resource="#example-simple" property="bibo:hasPart">
        <h4 id="h-example-simple" resource="#h-example-simple"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.9.1 </span>Simple Examples</span>
        </h4>
        <!--
              BASE <http://schema.example/>
              PREFIX ex: <http://schema.example/>
              PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
              PREFIX foaf: <http://xmlns.com/foaf/0.1/>
              PREFIX dc: <http://purl.org/dc/elements/1.1/>
              <IntConstraint> xsd:integer
          -->
        <div class="example">
          <span class="exsec">Schema:</span><br>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">

S1

</pre>
          <div class="inline repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IntConstraint"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
      <span class="hljs-attr">"datatype"</span>: <span class="hljs-string">"http://www.w3.org/2001/XMLSchema#integer"</span>
    } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                            

  ex:IntConstraint
    xsd:integer
              </pre>
          </div>
          <div style="clear:both;"></div>
          <!--             Data:<br/>
            <pre class="line-labels">


<span class="lineno data">t1</span></pre>
            <div class="inline json">
              <pre>PREFIX ex: &lt;http://schema.example/&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
ex:someNode ex:somePredicate "30"^^xsd:integer .
</pre>
            </div>
            <div style="clear:both;"></div> -->
          <p>
            Here the shape identified by <code>http://schema.example/IntConstraint</code> is a <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> consisting of a single <span class="jobjref"><a class="obj internalDFN" href="#dfn-nodeconstraint" data-link-type="dfn">NodeConstraint</a></span>. Per <a href="#shape-expression-semantics">Shape Expression Semantics</a>, "30"^^&lt;http://www.w3.org/2001/XMLSchema#integer&gt; satisfies <span class="lineno schema">IntConstraint</span>.
          </p>
          <p>
            This document uses this nested tree convention to indicate that the dependency of an evaluation on those nested inside it. Nesting is expressed as indentation. Here, the evaluation of <span class="math function">satisfies NodeConstraint ("30"^^xsd:integer, S1, G, m)</span> depends on <span class="math function">satisfies2 NodeConstraint ("30"^^xsd:integer, S1)</span>.
          </p>
          <div class="validation"><span>Validate</span> <span>"30"^^&lt;http://www.w3.org/2001/XMLSchema#integer&gt;</span> as <span class="hljs-string">IntConstraint</span>:</div>
          <ul class="trace followup">
            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("30"^^xsd:integer, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("30"^^xsd:integer, <span class="lineno schema">S1</span>)</li>
              </ul>
            </li>
          </ul>
        </div>

        <p class="leadup">
          Validating a shape requires evaluating it's <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> as well as the variables and functions <span class="math"><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, n)</span>, <span class="math">matched</span>, <span class="math">remainder</span>, <span class="math">outs</span>, <span class="math">matchables</span> and <span class="math">unmatchables</span>:<br>
        </p>
        <div class="example">
          <!--
                BASE &lt;http://schema.example/&gt;
                PREFIX ex: &lt;http://schema.example/&gt;
                PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt;
                PREFIX foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
                PREFIX dc: &lt;http://purl.org/dc/elements/1.1/&gt;
                &lt;UserShape&gt; { ex:shoeSize . }
            -->
          <span class="exsec">Schema:</span><br>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

S1
tc1
</pre>
          <div class="inline repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/UserShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>:
    { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/shoeSize"</span>
      } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                   

  ex:UserShape {
    ex:shoeSize .
  }
              </pre>
          </div>
          <div style="clear:both;" class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

t1</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs xml">BASE <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">a.example</span>/&gt;</span>
PREFIX xsd: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.w3.org</span>/<span class="hljs-attr">2001</span>/<span class="hljs-attr">XMLSchema</span>#&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> ex:shoeSize "30"^^xsd:integer .
</pre>
          </div>
          <div style="clear:both;" class="validation"><span>Validate</span> <span class="hljs-name">&lt;Alice&gt;</span> as <span class="hljs-string">http://schema.example/UserShape</span>:</div>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t1</span>] <span class="comment">The <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> G consists of one <a href="#dfn-triples" class="internalDFN" data-link-type="dfn">triple</a>.</span></li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t1</span>] <span class="comment">/* The neighborhood around &lt;Alice&gt; consists of one triple. */</span></li>
                <li>matched = [<span class="lineno data">t1</span>] <span class="comment">/* That triple is matched in the nested evaluation. */</span></li>
                <li>remainder = √ò <span class="comment">/* The remainder is the empty set. */</span></li>
                <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)</li>
                <li>outs = [<span class="lineno data">t1</span>] <span class="comment">/* There is one arc out. */</span></li>
                <li>matchables = √ò <span class="comment">/* There are no remaining arcs out of &lt;Alice&gt; with <a data-lt="predicate" href="#dfn-predicates" class="internalDFN" data-link-type="dfn">predicates</a> appearing in tc1. */</span></li>
                <li>unmatchables = √ò <span class="comment">/* There are no other arcs out of &lt;Alice&gt;. */</span></li>
                <li><span class="parameter">closed</span> is false <span class="comment">/* The <span class="jobjref"><a href="#dfn-shape" class="internalDFN" data-link-type="dfn">Shape</a></span>'s closed paramater has a value of false. */</span>
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <p class="leadup">
          It is quite common that Shapes will constrain their nested TripleConstraints with NodeConstraints. Here is an example including that, extra triples and a closed shape:
        </p>
        <div class="example">
          <!--
                BASE <http://schema.example/>
                PREFIX ex: <http://schema.example/>
                PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                PREFIX foaf: <http://xmlns.com/foaf/0.1/>
                PREFIX dc: <http://purl.org/dc/elements/1.1/>
                <UserShape> CLOSED EXTRA a {
                  a [ex:Teacher]
                }
            -->
          <span class="exsec">Schema:</span><br>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

S1
tc1



nc1
</pre>
          <div class="inline repchoice">
            <pre class="json repchosen hljs undefined" aria-busy="false" aria-live="polite">{ "type": "Schema", "shapes": [
  { "id": "http://schema.example/UserShape",
    "type": "Shape", "expression":
    "extra": ["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"],
    { "type": "TripleConstraint",
      "predicate": "http://www.w3.org/1999/02/22-rdf-syntax-ns#type",
      "valueExpr":
      { "type": "NodeConstraint",
        "values": ["http://schema.example/Teacher"]
      } } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                     

  ex:UserShape EXTRA a {
    a



      [ex:Teacher]
  }
              </pre>
          </div>
          <div style="clear:both;" class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

t1
t2
t3
t4
t5</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs xml">BASE <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">a.example</span>/&gt;</span>
PREFIX xsd: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.w3.org</span>/<span class="hljs-attr">2001</span>/<span class="hljs-attr">XMLSchema</span>#&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> ex:shoeSize "30"^^xsd:integer .
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> a ex:Teacher .
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> a ex:Person .
<span class="hljs-tag">&lt;<span class="hljs-name">SomeHat</span>&gt;</span> ex:owner <span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> .
<span class="hljs-tag">&lt;<span class="hljs-name">TheMoon</span>&gt;</span> ex:madeOf <span class="hljs-tag">&lt;<span class="hljs-name">GreenCheese</span>&gt;</span> .
</pre>
          </div>
          <div style="clear:both;" class="validation"><span>Validate</span> <span class="hljs-name">&lt;Alice&gt;</span> as <span class="hljs-string">http://schema.example/UserShape</span>:</div>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t1,t2,t3,t4,t5</span>]</li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t1,t2,t3,t4</span>], matched = [<span class="lineno data">t2</span>], remainder = [<span class="lineno data">t1,t3</span>]</li>
                <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> (ex:Teacher, <span class="lineno schema">nc1</span>, G, m)
                      <ul>
                        <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> (ex:Teacher, <span class="lineno schema">nc1</span>)</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = [<span class="lineno data">t1,t2,t3</span>]</li>
                <li>matchables = [<span class="lineno data">t3</span>], unmatchables = [<span class="lineno data">t1</span>], <span class="parameter">closed</span> is false</li>
              </ul>
            </li>
          </ul>
          <p>
            The non-empty matchables is permitted because the triple <code>t3</code> has a <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a> which appears in the "extra" list: <span class="json">["http://schema.example/Teacher"]</span>.
          </p>
        </div>
      </section>

      <section id="example-disjunction" typeof="bibo:Chapter" resource="#example-disjunction" property="bibo:hasPart">
        <h4 id="h-example-disjunction" resource="#h-example-disjunction"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.9.2 </span>Disjunction Example</span>
        </h4>
        <!--
              BASE <http://schema.example/>
              PREFIX ex: <http://schema.example/>
              PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
              PREFIX foaf: <http://xmlns.com/foaf/0.1/>
              PREFIX dc: <http://purl.org/dc/elements/1.1/>
              <UserShape> {
                foaf:name LITERAL | foaf:givenName LITERAL +; foaf:familyName LITERAL
              }
          -->
        <div class="example">
          <div class="exsec">Schema:</div><br>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

S1
te1
tc1


nc1
te2
tc2


nc2
tc3


nc3
</pre>
          <div class="inline repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/UserShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>:
     {<span class="hljs-attr">"type"</span>: <span class="hljs-string">"OneOf"</span>, <span class="hljs-attr">"expressions"</span>: [
        { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
          <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/name"</span>,
          <span class="hljs-attr">"valueExpr"</span>:
            { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>, <span class="hljs-attr">"nodeKind"</span>: <span class="hljs-string">"literal"</span> } },
        { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"expressions"</span>: [
            { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>, <span class="hljs-attr">"min"</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">-1</span> ,
              <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/givenName"</span>,
              <span class="hljs-attr">"valueExpr"</span>:
                { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>, <span class="hljs-attr">"nodeKind"</span>: <span class="hljs-string">"literal"</span> } },
            { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
              <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://xmlns.com/foaf/0.1/familyName"</span>,
              <span class="hljs-attr">"valueExpr"</span>:
                { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>, <span class="hljs-attr">"nodeKind"</span>: <span class="hljs-string">"literal"</span> } }
        ] }
     ] }
 } ] }
</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                      
  ex:UserShape
    {
     (              # extra ()s to clarify alignment with ShExJ
      foaf:name


              LITERAL |
      (             # extra ()s to clarify alignment with ShExJ
       foaf:givenName


               LITERAL+ ;
       foaf:familyName


               LITERAL
      )
     )
    }
</pre>
          </div>
          <div style="clear:both;" class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">

t1
t2
t3
t4
t5
t6</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs xml">BASE <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">a.example</span>/&gt;</span>
PREFIX foaf: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">xmlns.com</span>/<span class="hljs-attr">foaf</span>/<span class="hljs-attr">0.1</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> foaf:givenName "Alice" .
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> foaf:givenName "Malsenior" .
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> foaf:familyName "Walker" .
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> foaf:mbox <span class="hljs-tag">&lt;<span class="hljs-name">mailto:alice@example.com</span>&gt;</span> .
<span class="hljs-tag">&lt;<span class="hljs-name">Bob</span>&gt;</span> foaf:knows <span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> .
<span class="hljs-tag">&lt;<span class="hljs-name">Bob</span>&gt;</span> foaf:mbox <span class="hljs-tag">&lt;<span class="hljs-name">mailto:bob@example.com</span>&gt;</span> .
</pre>
          </div>
          <div style="clear:both;"></div>
          <p class="leadup">Per <a href="#shape-expression-semantics">Shape Expression Semantics</a>, &lt;Alice&gt; satisfies <span class="lineno">S1</span> with the simple <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a></p>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">m:</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs javascript">{ <span class="hljs-string">"http://a.example/Alice"</span>: <span class="hljs-string">"http://a.example/UserShape }</span></pre>
          </div>
          <div style="clear:both;"></div>
          <p class="leadup followup">as seen in this validation.</p>
          <div class="validation"><span>Validate</span> <span class="hljs-name">&lt;Alice&gt;</span> as <span class="hljs-string">http://schema.example/UserShape</span>:</div>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t1,t2,t3,t4,t5,t6</span>]</li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t1,t2,t3,t4,t5</span>], matched = [<span class="lineno data">t1,t2,t3</span>], remainder = [<span class="lineno data">t4,t5</span>]</li>
                <li><a href="#matches-OneOf">matches OneOf</a> ([<span class="lineno data">t1,t2,t3</span>], <span class="lineno schema">te1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#matches-EachOf">matches EachOf</a> ([<span class="lineno data">t1,t2,t3</span>], <span class="lineno schema">te2</span>, m)
                      <ul style="border-left:solid thin brown">
                        <li><a href="#matches-cardinality">matches cardinality</a> ([<span class="lineno data">t1,t2</span>], <span class="lineno schema">tc2</span>, m)
                          <ul style="border-left:solid thin brown">
                            <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc2</span>, m)
                              <ul>
                                <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("Alice", <span class="lineno schema">nc2</span>, G, m)
                                  <ul>
                                    <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("Alice", <span class="lineno schema">nc2</span>)</li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                            <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc2</span>, m)
                              <ul>
                                <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("Malsenior", <span class="lineno schema">nc2</span>, G, m)
                                  <ul>
                                    <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("Malsenior", <span class="lineno schema">nc2</span>)</li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc3</span>, m)
                          <ul>
                            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>, G, m)
                              <ul>
                                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>)</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = [<span class="lineno data">t4</span>] <span class="comment">/* <span class="lineno data">t5</span> is in <span class="math"><a href="#dfn-arcsin" class="internalDFN" data-link-type="dfn">ArcsIn</a>(G, &lt;Alice&gt;)&gt;</span>, <span class="lineno data">t6</span> is not in <span class="math"><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, &lt;Alice&gt;)&gt;</span>. */</span>
                </li>
                <li>matchables = √ò, unmatchables = [<span class="lineno data">t5</span>], <span class="parameter">closed</span> is false</li>
              </ul>
            </li>
          </ul>

          <p class="leadup">
            Replacing triples 1-3 with a single foaf:name property will also satisfy the schema.
          </p>
          <div class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">

t4
t5
t6
t7</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs xml">BASE <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">a.example</span>/&gt;</span>
PREFIX foaf: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">xmlns.com</span>/<span class="hljs-attr">foaf</span>/<span class="hljs-attr">0.1</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> foaf:mbox <span class="hljs-tag">&lt;<span class="hljs-name">mailto:alice@example.com</span>&gt;</span> .
<span class="hljs-tag">&lt;<span class="hljs-name">Bob</span>&gt;</span> foaf:knows <span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> .
<span class="hljs-tag">&lt;<span class="hljs-name">Bob</span>&gt;</span> foaf:mbox <span class="hljs-tag">&lt;<span class="hljs-name">mailto:bob@example.com</span>&gt;</span> .
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> foaf:name "Alice Malsenior Walker" .
</pre>
          </div>
          <div style="clear:both;" class="validation"><span>Validate</span> <span class="hljs-name">&lt;Alice&gt;</span> as <span class="hljs-string">http://schema.example/UserShape</span>:</div>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t4,t5,t6,t7</span>]</li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t4,t5,t7</span>], matched = [<span class="lineno data">t7</span>], remainder = [<span class="lineno data">t4,t5</span>]</li>
                <li><a href="#matches-OneOf">matches OneOf</a> ([<span class="lineno data">t7</span>], <span class="lineno schema">te1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t7</span>], <span class="lineno schema">tc1</span>, m)
                      <ul>
                        <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>, G, m)
                          <ul>
                            <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>)</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = [<span class="lineno data">t4</span>]</li>
                <li>matchables = √ò, unmatchables = [<span class="lineno data">t5</span>], <span class="parameter">closed</span> is false</li>
              </ul>
            </li>
          </ul>

          <p class="leadup">
            Any mixure of <code>foaf:name</code> with <code>foaf:givenName</code> or <code>foaf:familyName</code> will fail to satisfy the schema as there will be a matchable triple <span class="lineno data">t3</span> that's not used in the <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> <span class="lineno schema">te1</span>.
          </p>
          <div class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">

t3
t4
t5
t6
t7</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs xml">BASE <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">a.example</span>/&gt;</span>
PREFIX foaf: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">xmlns.com</span>/<span class="hljs-attr">foaf</span>/<span class="hljs-attr">0.1</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> foaf:familyName "Walker" .
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> foaf:mbox <span class="hljs-tag">&lt;<span class="hljs-name">mailto:alice@example.com</span>&gt;</span> .
<span class="hljs-tag">&lt;<span class="hljs-name">Bob</span>&gt;</span> foaf:knows <span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> .
<span class="hljs-tag">&lt;<span class="hljs-name">Bob</span>&gt;</span> foaf:mbox <span class="hljs-tag">&lt;<span class="hljs-name">mailto:bob@example.com</span>&gt;</span> .
<span class="hljs-tag">&lt;<span class="hljs-name">Alice</span>&gt;</span> foaf:name "Alice Malsenior Walker" .
</pre>
          </div>
          <div style="clear:both;" class="validation"><span>Validate</span> <span class="hljs-name">&lt;Alice&gt;</span> as <span class="hljs-string">http://schema.example/UserShape</span>:</div>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t4,t5,t6,t7</span>]</li>
            <li><span class="fail"><a href="#satisfies-Shape">satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G, m)</span>
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t4,t5,t7</span>], matched = [<span class="lineno data">t7</span>], remainder = [<span class="lineno data">t4,t5</span>]</li>
                <li><a href="#matches-OneOf">matches OneOf</a> ([<span class="lineno data">t7</span>], <span class="lineno schema">te1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t7</span>], <span class="lineno schema">tc1</span>, m)
                      <ul>
                        <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>, G, m)
                          <ul>
                            <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("Walker", <span class="lineno schema">nc3</span>)</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = [<span class="lineno data">t4</span>]</li>
                <li><span class="fail">matchables = [<span class="lineno data">t3</span>]</span>, unmatchables = [<span class="lineno data">t5</span>], <span class="parameter">closed</span> is false</li>
              </ul>
            </li>
          </ul>

          <p class="leadup">
            Adding a <code>foaf:familyName</code> to <span class="math"><span class="lineno schema">S1</span></span>'s <span class="param">extra</span> would allow this <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">graph</a> to satisfy the schema.
          </p>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

S1
</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs json">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/UserShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"extra"</span>: [<span class="hljs-string">"http://xmlns.com/foaf/0.1/familyName"</span>] ‚Ä¶
   } ] }</pre>
          </div>
          <div style="clear:both;"></div>

          <p class="leadup">
            Closing <span class="math"><span class="lineno schema">S1</span></span> would also cause a validation failure if <span class="math">unmatchables</span> were not empty:
          </p>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

S1
</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs json">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/UserShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"closed"</span>: <span class="hljs-literal">true</span> ‚Ä¶
   } ] }</pre>
          </div>
          <div style="clear:both;"></div>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t4,t5,t6,t7</span>]</li>
            <li><span class="fail"><a href="#satisfies-Shape">satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G, m)</span>
              <ul>
                <li>‚Ä¶</li>
                <li><span class="fail">unmatchables = [<span class="lineno data">t5</span>], <span class="parameter">closed</span> is true</span>
                </li>
              </ul>
            </li>
          </ul>

        </div>
      </section>

      <section id="example-dependent-shape" typeof="bibo:Chapter" resource="#example-dependent-shape" property="bibo:hasPart">
        <h4 id="h-example-dependent-shape" resource="#h-example-dependent-shape"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.9.3 </span>Dependent Shape Example</span>
        </h4>
        <!--
BASE <http://schema.example/>
PREFIX ex: <http://schema.example/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
<IssueShape> {
  ex:reproducedBy @<TesterShape>;
}
<TesterShape> {
  ex:role [ex:testingRole]
}
          -->
        <div class="example">
          <div class="exsec">Schema:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

S1
tc1


nc1


S2
tc2


nc2


</pre>
          <div class="inline repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>:
    { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/reproducedBy"</span>,
      <span class="hljs-attr">"valueExpr"</span>:
      <span class="hljs-string">"http://schema.example/TesterShape"</span> } },
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/TesterShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>:
    { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/role"</span>,
      <span class="hljs-attr">"valueExpr"</span>:
      { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
        <span class="hljs-attr">"values"</span>: [ <span class="hljs-string">"http://schema.example/testingRole"</span> ] } } }
  ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">ex:IssueShape {
  ex:reproducedBy @ex:TesterShape
}
ex:TesterShape {
  ex:role [ex:testingRole]
}
              </pre>
          </div>
          <div style="clear:both;" class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">
t1
t2</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs javascript">PREFIX ex: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">schema.example</span>/&gt;</span></span>
PREFIX inst: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">inst.example</span>/&gt;</span></span>
inst:Issue1 ex:reproducedBy inst:Tester2 .
inst:Tester2 ex:role ex:testingRole .</pre>
          </div>
          <div style="clear:both;"></div>
          <p class="leadup">inst:Issue1 satisfies <span class="lineno schema">S1</span> with the <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a></p>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">m:</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs json">{ <span class="hljs-attr">"http://inst.example/Issue1"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
  <span class="hljs-attr">"http://inst.example/Tester2"</span>: <span class="hljs-string">"http://schema.example/TesterShape"</span>,
  <span class="hljs-attr">"http://inst.example/Testgrammer23"</span>: <span class="hljs-string">"http://schema.example/ProgrammerShape"</span> }</pre>
          </div>
          <div style="clear:both;" class="validation"><span>Validate</span> <span>inst:Issue1</span> as <span class="hljs-string">http://schema.example/IssueShape</span>:</div>
          <p class="leadup followup">as seen in this evaluation:</p>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t1</span>]</li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (inst:Issue1, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, inst:Issue1) = [<span class="lineno data">t1,t2</span>], matched = [<span class="lineno data">t1,t2</span>], remainder = √ò</li>
                <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> (inst:Tester2, <span class="lineno schema">nc1</span>, G, m)
                      <ul>
                        <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> (inst:Tester2, <span class="lineno schema">nc1</span>)
                          <ul>
                            <li><a href="#satisfies-Shape">satisfies Shape</a> (inst:Tester2. <span class="lineno schema">S2</span>, G, m)
                              <ul>
                                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, inst:Tester2) = [<span class="lineno data">t2</span>], matched = [<span class="lineno data">t2</span>], remainder = √ò</li>
                                <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc2</span>, m)
                                  <ul style="border-left:solid thin brown">
                                    <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> (ex:testingRole, <span class="lineno schema">nc2</span>, G, m)
                                      <ul>
                                        <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> (ex:testingRole, <span class="lineno schema">nc2</span>)</li>
                                      </ul>
                                    </li>
                                  </ul>
                                </li>
                                <li>outs = √ò</li>
                                <li>matchables = √ò, unmatchables = √ò, closed is false</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = √ò</li>
                <li>matchables = √ò, unmatchables = √ò, closed is false</li>
              </ul>
            </li>
          </ul>
          <div style="clear:both;"></div>
        </div>
      </section>

      <section id="example-recursion" typeof="bibo:Chapter" resource="#example-recursion" property="bibo:hasPart">
        <h4 id="h-example-recursion" resource="#h-example-recursion"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.9.4 </span>Recursion Example</span>
        </h4>
        <!--
BASE <http://schema.example/>
PREFIX ex: <http://schema.example/>
<IssueShape> {
  ex:related @<IssueShape>*
}
          -->
        <div class="example">
          <div class="exsec">Schema:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

S1
tc1


nc1

</pre>
          <div class="inline repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>:
    { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>, <span class="hljs-attr">"min"</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">-1</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/related"</span>,
      <span class="hljs-attr">"valueExpr"</span>:
      <span class="hljs-string">"http://schema.example/IssueShape"</span>
    } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                               
  ex:IssueShape {


    ex:related

      @ex:IssueShape*
}</pre>
          </div>
          <div style="clear:both;" class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

t1
t2
t3</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs javascript">PREFIX ex: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">schema.example</span>/&gt;</span></span>
PREFIX inst: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">inst.example</span>/&gt;</span></span>
inst:Issue1 ex:related inst:Issue2 .
inst:Issue2 ex:related inst:Issue3 .
inst:Issue3 ex:related inst:Issue1 .</pre>
          </div>
          <div style="clear:both;"></div>
          <p class="leadup">inst:Issue1 satisfies <span class="lineno schema">S1</span> with the <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a></p>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">m:</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs json">{ <span class="hljs-attr">"http://inst.example/Issue1"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
  <span class="hljs-attr">"http://inst.example/Issue2"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
  <span class="hljs-attr">"http://inst.example/Issue3"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span> }</pre>
          </div>
          <div style="clear:both;" class="validation"><span>Validate</span> <span>inst:Issue1</span> as <span class="hljs-string">http://schema.example/IssueShape</span>:</div>
          <p class="leadup followup">as seen in this evaluation:</p>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t1,t2,t3</span>]</li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (inst:Issue1, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, inst:Issue1) = [<span class="lineno data">t1</span>], matched = [<span class="lineno data">t1</span>], remainder = √ò</li>
                <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> (inst:Issue2, <span class="lineno schema">nc1</span>, G, m)
                      <ul>
                        <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> (inst:Issue2, <span class="lineno schema">nc1</span>)
                          <ul>
                            <li><a href="#satisfies-Shape">satisfies Shape</a> (inst:Issue2. <span class="lineno schema">S2</span>, G, m)
                              <ul>
                                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, inst:Issue2) = [<span class="lineno data">t3</span>], matched = [<span class="lineno data">t3</span>], remainder = √ò</li>
                                <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc3</span>, m)
                                  <ul style="border-left:solid thin brown">
                                    <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> (inst:Issue3, <span class="lineno schema">nc3</span>, G, m)
                                      <ul>
                                        <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> (inst:Issue3, <span class="lineno schema">nc3</span>)
                                          <ul>
                                            <li><a href="#satisfies-Shape">satisfies Shape</a> (inst:Issue3. <span class="lineno schema">S2</span>, G, m)
                                              <ul>
                                                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, inst:Issue3) = [<span class="lineno data">t3</span>], matched = [<span class="lineno data">t3</span>], remainder = √ò</li>
                                                <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc3</span>, m)
                                                  <ul style="border-left:solid thin brown">
                                                    <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> (inst:Issue1, <span class="lineno schema">nc3</span>, G, m)
                                                      <ul>
                                                        <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> (inst:Issue1, <span class="lineno schema">nc3</span>)<br> This is known to be true or the initial typing would not be satisfied.</li>
                                                      </ul>
                                                    </li>
                                                  </ul>
                                                </li>
                                                <li>outs = √ò</li>
                                                <li>matchables = √ò, unmatchables = √ò, closed is false</li>
                                              </ul>
                                            </li>
                                          </ul>
                                        </li>
                                      </ul>
                                    </li>
                                  </ul>
                                </li>
                                <li>outs = √ò</li>
                                <li>matchables = √ò, unmatchables = √ò, closed is false</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = √ò</li>
                <li>matchables = √ò, unmatchables = √ò, closed is false</li>
              </ul>
            </li>
          </ul>
          <div style="clear:both;"></div>
        </div>
      </section>

      <section id="example-simple-repeated-property" typeof="bibo:Chapter" resource="#example-simple-repeated-property" property="bibo:hasPart">
        <h4 id="h-example-simple-repeated-property" resource="#h-example-simple-repeated-property"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.9.5 </span>Simple Repeated Property Examples</span>
        </h4>
        <!--
              BASE <http://schema.example/>
              PREFIX ex: <http://schema.example/>
              PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
              PREFIX foaf: <http://xmlns.com/foaf/0.1/>
              PREFIX dc: <http://purl.org/dc/elements/1.1/>
              <S1> {
                ex:val ["a" "b" "c"]+;
                ex:val ["b" "c" "d"]+
              }
          -->
        <div class="example">
          <div class="exsec">Schema:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

S1
te1
tc1


nc1

tc2


nc2

</pre>
          <div class="inline repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/TestResultsShape"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"expressions"</span>: [
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>, <span class="hljs-attr">"min"</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">-1</span>,
            <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/val"</span>,
            <span class="hljs-attr">"valueExpr"</span>:
            { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
              <span class="hljs-attr">"values"</span>: [ {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"a"</span>}, {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"b"</span>}, {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"c"</span>} ] } },
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>, <span class="hljs-attr">"min"</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">-1</span>,
            <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/val"</span>,
            <span class="hljs-attr">"valueExpr"</span>:
            { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
              <span class="hljs-attr">"values"</span>: [ {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"b"</span>}, {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"c"</span>}, {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"d"</span>} ] } }
        ] } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                               
            &lt;http://schema.example/TestResultsShape&gt;
{


                         &lt;http://schema.example/val&gt;


                         ["a" "b" "c"]+ ;

                         &lt;http://schema.example/val&gt;


                         ["b" "c" "d"]+
}              </pre>
          </div>
          <div style="clear:both;" class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">

t1
t2
t3
t4</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs javascript">BASE &lt;http:<span class="hljs-comment">//a.example/&gt;</span>
PREFIX ex: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">schema.example</span>/&gt;</span></span>
&lt;s&gt; ex:val <span class="hljs-string">"a"</span> .
&lt;s&gt; ex:val <span class="hljs-string">"b"</span> .
&lt;s&gt; ex:val <span class="hljs-string">"c"</span> .
&lt;s&gt; ex:val <span class="hljs-string">"d"</span> .</pre>
          </div>
          <div style="clear:both;"></div>
          <p class="leadup">&lt;s&gt; satisfies <span class="lineno schema">S1</span> with:</p>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">m:</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs javascript">{ <span class="hljs-string">"http://a.example/s"</span>: <span class="hljs-string">"http://a.example/S1 }</span></pre>
          </div>
          <div style="clear:both;" class="validation"><span>Validate</span> <span class="hljs-name">&lt;s&gt;</span> as <span class="hljs-string">http://schema.example/TestResultShape</span>:</div>
          <p class="leadup followup">If <span class="math"><span class="lineno schema">tc1</span></span> consumes as many triples as it can, it consumes three and <span class="math"><span class="lineno schema">tc2</span></span> consumes one:</p>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t1,t2,t3,t4</span>]</li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (&lt;s&gt;, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, &lt;s&gt;) = [<span class="lineno data">t1,t2,t3,t4</span>], matched = [<span class="lineno data">t1,t2,t3,t4</span>], remainder = √ò</li>
                <li><a href="#matches-EachOf">matches EachOf</a> ([<span class="lineno data">t1,t2,t3,t4</span>], <span class="lineno schema">te1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#matches-cardinality">matches cardinality</a> ([<span class="lineno data">t1,t2,t3</span>], <span class="lineno schema">tc1</span>, m)
                      <ul style="border-left:solid thin brown">
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
                          <ul>
                            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>, G, m)
                              <ul>
                                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>)</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc1</span>, m)
                          <ul>
                            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("b", <span class="lineno schema">nc1</span>, G, m)
                              <ul>
                                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("b", <span class="lineno schema">nc1</span>)</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc1</span>, m)
                          <ul>
                            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("c", <span class="lineno schema">nc1</span>, G, m)
                              <ul>
                                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("c", <span class="lineno schema">nc1</span>)</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li><a href="#matches-cardinality">matches cardinality</a> ([<span class="lineno data">t4</span>], <span class="lineno schema">tc2</span>, m)
                      <ul style="border-left:solid thin brown">
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t4</span>], <span class="lineno schema">tc2</span>, m)
                          <ul>
                            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("d", <span class="lineno schema">nc2</span>, G, m)
                              <ul>
                                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("d", <span class="lineno schema">nc2</span>)</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = √ò</li>
                <li>matchables = √ò, unmatchables = √ò, <span class="parameter">closed</span> is false</li>
              </ul>
            </li>
          </ul>
          <div style="clear:both;"></div>

          <p class="leadup">If we eliminate <span class="math"><span class="lineno data">t4</span></span>, either <span class="math"><span class="lineno data">t2</span></span> or <span class="math"><span class="lineno data">t3</span></span> must be allocated to <span class="math"><span class="lineno schema">tc2</span></span>:</p>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t1,t2,t3</span>]</li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (&lt;Alice&gt;, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, &lt;Alice&gt;) = [<span class="lineno data">t1,t2,t3</span>], matched = [<span class="lineno data">t1,t2,t3</span>], remainder = √ò</li>
                <li><a href="#matches-EachOf">matches EachOf</a> ([<span class="lineno data">t1,t2,t3</span>], <span class="lineno schema">te1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#matches-cardinality">matches cardinality</a> ([<span class="lineno data">t1,t2</span>], <span class="lineno schema">tc1</span>, m)
                      <ul style="border-left:solid thin brown">
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
                          <ul>
                            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>, G, m)
                              <ul>
                                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>)</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc1</span>, m)
                          <ul>
                            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("b", <span class="lineno schema">nc1</span>, G, m)
                              <ul>
                                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("b", <span class="lineno schema">nc1</span>)</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li><a href="#matches-cardinality">matches cardinality</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc2</span>, m)
                      <ul style="border-left:solid thin brown">
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc2</span>, m)
                          <ul>
                            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("d", <span class="lineno schema">nc2</span>, G, m)
                              <ul>
                                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("d", <span class="lineno schema">nc2</span>)</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = √ò</li>
                <li>matchables = √ò, unmatchables = √ò, <span class="parameter">closed</span> is false</li>
              </ul>
            </li>
          </ul>
          <div style="clear:both;"></div>
        </div>
      </section>

      <section id="example-repeated-property-with-dependent-shapes" typeof="bibo:Chapter" resource="#example-repeated-property-with-dependent-shapes" property="bibo:hasPart">
        <h4 id="h-example-repeated-property-with-dependent-shapes" resource="#h-example-repeated-property-with-dependent-shapes"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.9.6 </span>Repeated Property With Dependent Shapes Example</span>
        </h4>
        <!--
BASE <http://schema.example/>
PREFIX ex: <http://schema.example/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
<IssueShape> {
  ex:reproducedBy @<TesterShape>;
  ex:reproducedBy @<ProgrammerShape>
}
<TesterShape> {          
  ex:role [ex:testingRole]
}                         

<ProgrammerShape> {                      
  ex:department [ex:ProgrammingDepartment]
}
          -->
        <div class="example">
          <div class="exsec">Schema:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

S1
te1

tc1

nc1

tc2

nc2

S2

tc3


nc3

S3

tc4


nc4
</pre>
          <div class="inline repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>:
    { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"expressions"</span>: [
        { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
          <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/reproducedBy"</span>,
          <span class="hljs-attr">"valueExpr"</span>:
          <span class="hljs-string">"http://schema.example/TesterShape"</span> },
        { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
          <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/reproducedBy"</span>,
          <span class="hljs-attr">"valueExpr"</span>:
          <span class="hljs-string">"http://schema.example/ProgrammerShape"</span> }
      ] } },
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/TesterShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>:
    { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/role"</span>,
      <span class="hljs-attr">"valueExpr"</span>:
      { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
        <span class="hljs-attr">"values"</span>: [ <span class="hljs-string">"http://schema.example/testingRole"</span> ] } } },
  { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/ProgrammerShape"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>:
    { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>,
      <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/department"</span>,
      <span class="hljs-attr">"valueExpr"</span>:
      { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
        <span class="hljs-attr">"values"</span>: [ <span class="hljs-string">"http://schema.example/ProgrammingDepartment"</span> ] } } }
  ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                         
ex:IssueShape {



  ex:reproducedBy

    @ex:TesterShape;

  ex:reproducedBy

    @ex:ProgrammerShape
}
ex:TesterShape {


  ex:role

    [ex:testingRole]
}
ex:ProgrammerShape {


  ex:department

    [ex:ProgrammingDepartment]
}

</pre>
          </div>
          <div style="clear:both;" class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 


t1
t2


t3


t4
t5</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs javascript">PREFIX ex: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">schema.example</span>/&gt;</span></span>
PREFIX inst: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">inst.example</span>/&gt;</span></span>
inst:Issue1
  ex:reproducedBy inst:Tester2 ;
  ex:reproducedBy inst:Testgrammer23 .

inst:Tester2              
  ex:role ex:testingRole .

inst:Testgrammer23                        
  ex:role ex:testingRole ;                
  ex:department ex:ProgrammingDepartment .</pre>
          </div>
          <div style="clear:both;"></div>
          <p class="leadup">inst:Issue1 satisfies <span class="lineno schema">S1</span> with the <a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a></p>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">m:</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs json">{ <span class="hljs-attr">"http://inst.example/Issue1"</span>: <span class="hljs-string">"http://schema.example/IssueShape"</span>,
  <span class="hljs-attr">"http://inst.example/Tester2"</span>: <span class="hljs-string">"http://schema.example/TesterShape"</span>,
  <span class="hljs-attr">"http://inst.example/Testgrammer23"</span>: <span class="hljs-string">"http://schema.example/ProgrammerShape"</span> }</pre>
          </div>
          <div style="clear:both;" class="validation"><span>Validate</span> <span>inst:Issue1</span> as <span class="hljs-string">http://schema.example/IssueShape</span>:</div>
          <p class="leadup followup">as seen in this evaluation:</p>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t1,t2,t3,t4,t5</span>]</li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (inst:Issue1, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, inst:Issue1) = [<span class="lineno data">t1,t2</span>], matched = [<span class="lineno data">t1,t2</span>], remainder = √ò</li>
                <li><a href="#matches-EachOf">matches EachOf</a> ([<span class="lineno data">t1,t2</span>], <span class="lineno schema">te1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
                      <ul>
                        <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> (inst:Tester2, <span class="lineno schema">nc1</span>, G, m)
                          <ul>
                            <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> (inst:Tester2, <span class="lineno schema">nc1</span>)
                              <ul>
                                <li><a href="#satisfies-Shape">satisfies Shape</a> (inst:Tester2. <span class="lineno schema">S2</span>, G, m)
                                  <ul>
                                    <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, inst:Tester2) = [<span class="lineno data">t3</span>], matched = [<span class="lineno data">t3</span>], remainder = √ò</li>
                                    <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t3</span>], <span class="lineno schema">tc3</span>, m)
                                      <ul style="border-left:solid thin brown">
                                        <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> (ex:testingRole, <span class="lineno schema">nc3</span>, G, m)
                                          <ul>
                                            <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> (ex:testingRole, <span class="lineno schema">nc3</span>)</li>
                                          </ul>
                                        </li>
                                      </ul>
                                    </li>
                                    <li>outs = √ò</li>
                                    <li>matchables = √ò, unmatchables = √ò, closed is false</li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc1</span>, m)
                      <ul>
                        <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> (inst:Testgrammer23, <span class="lineno schema">nc2</span>, G, m)
                          <ul>
                            <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> (inst:Testgrammer23, <span class="lineno schema">nc2</span>)
                              <ul>
                                <li><a href="#satisfies-Shape">satisfies Shape</a> (inst:Testgrammer23. <span class="lineno schema">S3</span>, G, m)
                                  <ul>
                                    <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, inst:Testgrammer23) = [<span class="lineno data">t5</span>], matched = [<span class="lineno data">t5</span>], remainder = √ò</li>
                                    <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t5</span>], <span class="lineno schema">tc3</span>, m)
                                      <ul style="border-left:solid thin brown">
                                        <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> (ex:testingRole, <span class="lineno schema">nc4</span>, G, m)
                                          <ul>
                                            <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> (ex:testingRole, <span class="lineno schema">nc4</span>)</li>
                                          </ul>
                                        </li>
                                      </ul>
                                    </li>
                                    <li>outs = √ò</li>
                                    <li>matchables = √ò, unmatchables = √ò, closed is false</li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = √ò</li>
                <li>matchables = √ò, unmatchables = √ò, closed is false</li>
              </ul>
            </li>
          </ul>
          <div style="clear:both;"></div>
        </div>
      </section>

      <section id="example-negation" typeof="bibo:Chapter" resource="#example-negation" property="bibo:hasPart">
        <h4 id="h-example-negation" resource="#h-example-negation"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.9.7 </span>Negation Example</span>
        </h4>
        <p>
          Setting the maximum <a href="#dfn-cardinality" class="internalDFN" data-link-type="dfn">cardinality</a> of a TripleConstraint with <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a> <span class="math">p</span> to zero (i.e. <span>"max": 0</span> in <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> or <code>{0}</code> or <code>{0, 0}</code> in <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a>) asserts that matching nodes must have no triples with <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a> <span class="math">p</span>.
        </p>
        <!--
              BASE <http://schema.example/>
              PREFIX ex: <http://schema.example/>
              PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
              PREFIX foaf: <http://xmlns.com/foaf/0.1/>
              PREFIX dc: <http://purl.org/dc/elements/1.1/>
              <S1> {
                ex:p1 ["a" "b"];
                ex:p2 . {0}
              }
          -->
        <div class="example">
          <div class="exsec">Schema:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite"> 

S1
te1
tc1


nc1

tc2


</pre>
          <div class="inline repchoice">
            <pre class="json repchosen hljs" aria-busy="false" aria-live="polite">{ <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Schema"</span>, <span class="hljs-attr">"shapes"</span>: [
    { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"http://schema.example/TestResultsShape"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Shape"</span>, <span class="hljs-attr">"expression"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"EachOf"</span>, <span class="hljs-attr">"expressions"</span>: [
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>, <span class="hljs-attr">"min"</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">-1</span>,
            <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/p1"</span>,
            <span class="hljs-attr">"valueExpr"</span>:
            { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"NodeConstraint"</span>,
              <span class="hljs-attr">"values"</span>: [ {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"a"</span>}, {<span class="hljs-attr">"value"</span>: <span class="hljs-string">"b"</span>} ] } },
          { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"TripleConstraint"</span>, <span class="hljs-attr">"min"</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">-1</span>,
            <span class="hljs-attr">"predicate"</span>: <span class="hljs-string">"http://schema.example/p2"</span>, <span class="hljs-attr">"min"</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">"max"</span>: <span class="hljs-number">0</span> }
        ] } } ] }</pre>
            <pre class="shexc rephidden hljs undefined" aria-busy="false" aria-live="polite">                                                                         
            &lt;http://schema.example/TestResultsShape&gt;
{


                         &lt;http://schema.example/p1&gt;


                         ["a" "b"] ;

                         &lt;http://schema.example/p2&gt; . {0}
}              </pre>
          </div>
          <div style="clear:both;" class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">

t1</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs javascript">BASE &lt;http:<span class="hljs-comment">//a.example/&gt;</span>
PREFIX ex: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">schema.example</span>/&gt;</span></span>
&lt;s&gt; ex:p1 <span class="hljs-string">"a"</span> .</pre>
          </div>
          <div style="clear:both;"></div>
          <p class="leadup">&lt;s&gt; satisfies <span class="lineno schema">S1</span> with:</p>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">m:</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs json">{ <span class="hljs-attr">"http://a.example/s"</span>: <span class="hljs-string">"http://a.example/S1"</span> }</pre>
          </div>
          <div style="clear:both;" class="validation"><span>Validate</span> <span class="hljs-name">&lt;s&gt;</span> as <span class="hljs-string">http://schema.example/TestResultShape</span>:</div>
          <p class="leadup followup">If <span class="math"><span class="lineno schema">tc1</span></span> consumes as many triples as it can, it consumes three and <span class="math"><span class="lineno schema">tc2</span></span> consumes one:</p>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t1</span>]</li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (&lt;s&gt;, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, &lt;s&gt;) = [<span class="lineno data">t1</span>], matched = [<span class="lineno data">t1</span>], remainder = √ò</li>
                <li><a href="#matches-EachOf">matches EachOf</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">te1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#matches-cardinality">matches cardinality</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
                      <ul style="border-left:solid thin brown">
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
                          <ul>
                            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>, G, m)
                              <ul>
                                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>)</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li><a href="#matches-cardinality">matches cardinality</a> ([<span class="lineno data"></span>], <span class="lineno schema">tc2</span>, m)
                      <ul style="border-left:solid thin brown">
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data"></span>], <span class="lineno schema">tc2</span>, m)</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = √ò</li>
                <li>matchables = √ò, unmatchables = √ò, <span class="parameter">closed</span> is false</li>
              </ul>
            </li>
          </ul>
          <div style="clear:both;"></div>

          <p class="leadup">If we add a <span class="math"><span class="lineno data">t2</span></span> which matches <span class="math"><span class="lineno schema">tc2</span></span>:</p>
          <div style="clear:both;" class="exsec">Data:</div>
          <pre class="line-labels hljs undefined" aria-busy="false" aria-live="polite">

t1
t2</pre>
          <div class="inline json">
            <pre aria-busy="false" aria-live="polite" class="hljs javascript">BASE &lt;http:<span class="hljs-comment">//a.example/&gt;</span>
PREFIX ex: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">schema.example</span>/&gt;</span></span>
&lt;s&gt; ex:p1 <span class="hljs-string">"a"</span> .
&lt;s&gt; ex:p2 <span class="hljs-number">5</span> .</pre>
          </div>
          <div style="clear:both;"></div>
          <p>
            every partition fails, either because matchables is non-empty or because the maximum cardinality on <span class="lineno schema">tc2</span> is exceeded:
          </p>
          <ul class="trace followup">
            <li>G = [<span class="lineno data">t1</span>]</li>
            <li><a href="#satisfies-Shape">satisfies Shape</a> (&lt;s&gt;, <span class="lineno schema">S1</span>, G, m)
              <ul>
                <li><a href="#dfn-neigh" class="internalDFN" data-link-type="dfn">neigh</a>(G, &lt;s&gt;) = [<span class="lineno data">t1</span>], matched = [<span class="lineno data">t1</span>], remainder = √ò</li>
                <li><a href="#matches-EachOf">matches EachOf</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">te1</span>, m)
                  <ul style="border-left:solid thin brown">
                    <li><a href="#matches-cardinality">matches cardinality</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
                      <ul style="border-left:solid thin brown">
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t1</span>], <span class="lineno schema">tc1</span>, m)
                          <ul>
                            <li><a href="#satisfies-NodeConstraint">satisfies NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>, G, m)
                              <ul>
                                <li><a href="#satisfies2-NodeConstraint">satisfies2 NodeConstraint</a> ("a", <span class="lineno schema">nc1</span>)</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li><span class="fail"><a href="#matches-cardinality">matches cardinality</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc2</span>, m)</span>
                      <ul style="border-left:solid thin brown">
                        <li><a href="#matches-TripleConstraint">matches TripleConstraint</a> ([<span class="lineno data">t2</span>], <span class="lineno schema">tc2</span>, m)</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>outs = √ò</li>
                <li>matchables = √ò, unmatchables = √ò, <span class="parameter">closed</span> is false</li>
              </ul>
            </li>
          </ul>
          <div style="clear:both;"></div>
        </div>
      </section>

    </section>
  </section>

  <section id="shexc" typeof="bibo:Chapter" resource="#shexc" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-shexc" resource="#h-shexc"><span property="xhv:role" resource="xhv:heading"><span class="secno">6. </span>ShEx Compact syntax (ShExC)</span>
    </h2>
    <div>
      <div class="grammarTable">
        <table style="border: 0; border-top: thick solid white; ">

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  The ShEx Compact Syntax expresses ShEx schemas in a compact, human-friendly form. Parsing <dfn data-dfn-type="dfn" id="dfn-shexc">ShExC</dfn> transforms a <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a> document into an equivalent <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> structure. This is defined as a BNF which accepts <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a> followed by instructions for tranlating the rules in the BNF production into their corresponding <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> objects. For example, "<span style="font-family: monospace; ">shapeExprDecl returns <span class="prod"><a class="grammarRef" href="#prod-shapeExpression">shapeExpression</a></span></span>" indicates that the result of matching the <code>shapeExprDecl</code> production is the object produced by parsing the <code>shapeExpression</code> production.
                </p>
                <p>
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod" style="">
            <tr style="border-top: thick solid white; border-left: thin solid white; border-right: thin solid white; ">
              <td colspan="4">Below is the <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a> grammar following the <a href="https://www.w3.org/TR/xml#sec-notation">notation in the XML specification</a>[<cite><a class="bibref" href="#bib-XML">XML</a></cite>]:</td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-shexDoc">[<span class="prodNo">1</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">shexDoc</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-directive">directive</a></span>* ((<span class="prod"><a class="grammarRef" href="#prod-notStartAction">notStartAction</a></span> | <span class="prod"><a class="grammarRef" href="#prod-startActions">startActions</a></span>) <span class="prod"><a class="grammarRef" href="#prod-statement">statement</a></span>*)?</code></td>
            </tr>
            <tr style="border-left: thin solid white; border-right: thin solid white; ">
              <td colspan="4" style="padding-top: 2ex; ">followed by the associated <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> object:</td>
            </tr>
            <tr class="obj">
              <td style="border-top: thick solid white; border-bottom: thick solid white; "></td>
              <td><a class="obj internalDFN" href="#dfn-schema" data-link-type="dfn">Schema</a></td>
              <td>{</td>
              <td>
                <a class="param internalDFN" href="#dfn-startacts" data-link-type="dfn">startActs</a>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]?
                <a class="param internalDFN" href="#dfn-start" data-link-type="dfn">start</a>:<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>?
                <a class="param internalDFN" href="#dfn-shapes" data-link-type="dfn">shapes</a>:[<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>+]? }
              </td>
            </tr>
            <tr style="border-left: thin solid white; border-right: thin solid white; ">
              <td colspan="4" style="padding-top: 2ex; ">and a description of the mapping of rules in the production to elements of the <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> object:</td>
            </tr>
            <tr class="params">
              <td style="border-top: thick solid white; border-bottom: thick solid white; "></td>
              <td colspan="3">
                <ul>
                  <li><a class="param internalDFN" href="#dfn-startacts" data-link-type="dfn">startActs</a> comes from <span class="prod"><a class="grammarRef" href="#prod-startActions">startActions</a></span> production.</li>
                  <li><a class="param internalDFN" href="#dfn-start" data-link-type="dfn">start</a> comes from the <span class="prod"><a class="grammarRef" href="#prod-start">start</a></span> production.</li>
                  <li><a class="param internalDFN" href="#dfn-shapes" data-link-type="dfn">shapes</a> come from the <span class="prod"><a class="grammarRef" href="#prod-shapeExprDecl">shapeExprDecl</a></span> production.</li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
        <p>
          Semantic actions before the first <span class="prod"><a class="grammarRef" href="#prod-shapeExprDecl">shape expression declaration</a></span> are <span class="param"><a href="#dfn-startacts" class="internalDFN" data-link-type="dfn">startActs</a></span>. After the first <span class="prod"><a class="grammarRef" href="#prod-shapeExprDecl">shape expression declaration</a></span>, semantic actions are associated with the previous declaration.
        </p>
        <table>
          <tbody>
            <tr style="vertical-align: baseline">
              <td id="prod-directive">[<span class="prodNo">2</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">directive</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-baseDecl">baseDecl</a></span> | <span class="prod"><a class="grammarRef" href="#prod-prefixDecl">prefixDecl</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-baseDecl">[<span class="prodNo">3</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">baseDecl</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"BASE" <span class="prod"><a class="grammarRef" href="#term-IRIREF">IRIREF</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-prefixDecl">[<span class="prodNo">4</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">prefixDecl</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"PREFIX" <span class="prod"><a class="grammarRef" href="#term-PNAME_NS">PNAME_NS</a></span> <span class="prod"><a class="grammarRef" href="#term-IRIREF">IRIREF</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-notStartAction">[<span class="prodNo">5</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">notStartAction</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-start">start</a></span> | <span class="prod"><a class="grammarRef" href="#prod-shapeExprDecl">shapeExprDecl</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-start">[<span class="prodNo">6</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">start</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"start" "=" <span class="prod"><a class="grammarRef" href="#prod-shapeExpression">shapeExpression</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-startActions">[<span class="prodNo">7</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">startActions</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-codeDecl">codeDecl</a></span>+</code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-statement">[<span class="prodNo">8</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">statement</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-directive">directive</a></span> | <span class="prod"><a class="grammarRef" href="#prod-notStartAction">notStartAction</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-shapeExprDecl">[<span class="prodNo">9</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">shapeExprDecl</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-shapeExprLabel">shapeExprLabel</a></span> (<span class="prod"><a class="grammarRef" href="#prod-shapeExpression">shapeExpression</a></span> | "EXTERNAL")</code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">If the "<code>EXTERNAL</code>" keyword is present, <span class="prod"><a class="grammarRef" href="#prod-shapeExprDecl">shapeExprDecl</a></span> returns a <a class="obj internalDFN" href="#dfn-shapeexternal" data-link-type="dfn">ShapeExternal</a> object:</td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-shapeexternal" data-link-type="dfn">ShapeExternal</a></td>
              <td>{</td>
              <td><span class="comment">/* empty */</span> }</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">otherwise <span class="prod"><a class="grammarRef" href="#prod-shapeExprDecl">shapeExprDecl</a></span> returns <span class="prod"><a class="grammarRef" href="#prod-shapeExpression">shapeExpression</a></span>.</td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  Shape expressions are logical combinations of shape atoms. Inline variants of <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expressions</a> are used in <span class="prod"><a class="grammarRef" href="#prod-tripleConstraint">tripleConstraint</a></span>s and are not permitted to have annotations or semantic actions.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-shapeExpression">[<span class="prodNo">10</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">shapeExpression</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-shapeOr">shapeOr</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-inlineShapeExpression">[<span class="prodNo">14</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">inlineShapeExpression</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-inlineShapeOr">inlineShapeOr</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-shapeOr">[<span class="prodNo">11</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">shapeOr</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-shapeAnd">shapeAnd</a></span> ("OR" <span class="prod"><a class="grammarRef" href="#prod-shapeAnd">shapeAnd</a></span>)*</code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-inlineShapeOr">[<span class="prodNo">15</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">inlineShapeOr</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-inlineShapeAnd">inlineShapeAnd</a></span> ("OR" <span class="prod"><a class="grammarRef" href="#prod-inlineShapeAnd">inlineShapeAnd</a></span>)*</code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                If the right <a class="grammarRef" href="#prod-shapeAnd">shapeAnd</a> matches one or more times, the result is a <a class="obj internalDFN" href="#dfn-shapeor" data-link-type="dfn">ShapeOr</a> object with <span class="param">shapeExprs</span> containing the first <a class="grammarRef" href="#prod-shapeAnd">shapeAnd</a> followed by the ordered list from the second <a class="grammarRef" href="#prod-shapeAnd">shapeAnd</a>:
              </td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-shapeor" data-link-type="dfn">ShapeOr</a></td>
              <td>{</td>
              <td><span class="param">shapeExprs</span>:[<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>] }</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                otherwise the result is the left <a class="grammarRef" href="#prod-shapeAnd">shapeAnd</a>.
              </td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-shapeAnd">[<span class="prodNo">12</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">shapeAnd</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-shapeNot">shapeNot</a></span> ("AND" <span class="prod"><a class="grammarRef" href="#prod-shapeNot">shapeNot</a></span>)*</code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-inlineShapeAnd">[<span class="prodNo">16</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">inlineShapeAnd</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-inlineShapeNot">inlineShapeNot</a></span> ("AND" <span class="prod"><a class="grammarRef" href="#prod-inlineShapeNot">inlineShapeNot</a></span>)*</code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                If the right <a class="grammarRef" href="#prod-shapeNot">shapeNot</a> matches one or more times, the result is a <a class="obj internalDFN" href="#dfn-shapeand" data-link-type="dfn">ShapeAnd</a> object with <span class="param">shapeExprs</span> containing the first <a class="grammarRef" href="#prod-shapeNot">shapeNot</a> followed by the ordered list from the second <a class="grammarRef" href="#prod-shapeNot">shapeNot</a>:
              </td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-shapeand" data-link-type="dfn">ShapeAnd</a></td>
              <td>{</td>
              <td><span class="param">shapeExprs</span>:[<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>] }</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                otherwise the result is the left <a class="grammarRef" href="#prod-shapeNot">shapeNot</a>.
              </td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-shapeNot">[<span class="prodNo">13</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">shapeNot</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"NOT"? <span class="prod"><a class="grammarRef" href="#prod-shapeAtom">shapeAtom</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-inlineShapeNot">[<span class="prodNo">17</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">inlineShapeNot</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"NOT"? <span class="prod"><a class="grammarRef" href="#prod-inlineShapeAtom">inlineShapeAtom</a></span></code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                If the left "<code>NOT</code>" matches, the result is a <a class="obj internalDFN" href="#dfn-shapenot" data-link-type="dfn">ShapeNot</a> object with <span class="param">shapeExpr</span> containing the <a class="grammarRef" href="#prod-shapeAtom">shapeAtom</a>:</td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-shapenot" data-link-type="dfn">ShapeNot</a></td>
              <td>{</td>
              <td><span class="param">shapeExpr</span>:<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a> }</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                otherwise the result is the <a class="grammarRef" href="#prod-shapeAtom">shapeAtom</a>.
              </td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  Shape atoms are shape references (indicated by "<code>@</code>"), definitions, or nested expressions.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-shapeAtom">[<span class="prodNo">29</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">shapeAtom</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content"><span class="prod"><a class="grammarRef" href="#prod-nodeConstraint">nodeConstraint</a></span> <span class="prod"><a class="grammarRef" href="#prod-shapeOrRef">shapeOrRef</a></span>?<br>
| <span class="prod"><a class="grammarRef" href="#prod-shapeOrRef">shapeOrRef</a></span><br>
| "(" <span class="prod"><a class="grammarRef" href="#prod-shapeExpression">shapeExpression</a></span> ")"<br>
| "."</code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-inlineShapeAtom">[<span class="prodNo">30</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">inlineShapeAtom</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content"><span class="prod"><a class="grammarRef" href="#prod-nodeConstraint">nodeConstraint</a></span> <span class="prod"><a class="grammarRef" href="#prod-inlineShapeOrRef">inlineShapeOrRef</a></span>?<br>
| <span class="prod"><a class="grammarRef" href="#prod-inlineShapeOrRef">inlineShapeOrRef</a></span> <span class="prod"><a class="grammarRef" href="#prod-nodeConstraint">nodeConstraint</a></span>?<br>
| "(" <span class="prod"><a class="grammarRef" href="#prod-shapeExpression">shapeExpression</a></span> ")"<br>
| "."</code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                <ul>
                  <li>If the matching production inludes both a <span class="prod"><a class="grammarRef" href="#prod-nodeConstraint">nodeConstraint</a></span> and a <span class="prod"><a class="grammarRef" href="#prod-shapeOrRef">shapeOrRef</a></span>, the result is a <a class="obj internalDFN" href="#dfn-shapeand" data-link-type="dfn">ShapeAnd</a> object with <span class="param">shapeExprs</span> containing the list of <span class="prod"><a class="grammarRef" href="#prod-nodeConstraint">nodeConstraint</a></span> and a <span class="prod"><a class="grammarRef" href="#prod-shapeOrRef">shapeOrRef</a></span>.</li>
                  <li>If the "(" <span class="prod"><a class="grammarRef" href="#prod-shapeExpression">shapeExpression</a></span> ")" production matches, the result is the result of <span class="prod"><a class="grammarRef" href="#prod-shapeExpression">shapeExpression</a></span>.</li>
                  <li>If the <code>"."</code> production matches, the result is an empty shape: <code>{"type": "Shape"}</code>.</li>
                </ul>
              </td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-shapeOrRef">[<span class="prodNo">46</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">shapeOrRef</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content">
<span class="prod"><a class="grammarRef" href="#prod-shapeDefinition">shapeDefinition</a></span><br>
| <span class="prod"><a class="grammarRef" href="#term-ATPNAME_LN">ATPNAME_LN</a></span> | <span class="prod"><a class="grammarRef" href="#term-ATPNAME_NS">ATPNAME_NS</a></span> | "@" <span class="prod"><a class="grammarRef" href="#prod-shapeExprLabel">shapeExprLabel</a></span><br>
</code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-inlineShapeOrRef">[<span class="prodNo">47</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">inlineShapeOrRef</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content"><span class="prod"><a class="grammarRef" href="#prod-inlineShapeDefinition">inlineShapeDefinition</a></span><br>
| <span class="prod"><a class="grammarRef" href="#term-ATPNAME_LN">ATPNAME_LN</a></span> | <span class="prod"><a class="grammarRef" href="#term-ATPNAME_NS">ATPNAME_NS</a></span> | "@" <span class="prod"><a class="grammarRef" href="#prod-shapeExprLabel">shapeExprLabel</a></span><br></code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                <ul>
                  <li>If the <span class="prod"><a class="grammarRef" href="#prod-shapeDefinition">shapeDefinition</a></span> production matches, the result is <span class="prod"><a class="grammarRef" href="#prod-shapeDefinition">shapeDefinition</a></span>.</li>
                  <li>Otherwise, the result is a <a class="obj internalDFN" href="#dfn-shapeexprref" data-link-type="dfn">shapeExprRef</a> to <a class="obj internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a>.</li>
                </ul>
              </td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="nob internalDFN" href="#dfn-shapeexprref" data-link-type="dfn">shapeExprRef</a></td>
              <td>=</td>
              <td><a class="objref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a> ;</td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  Node constraints identify a (possibly infinite) set of matching RDF nodes.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-nodeConstraint">[<span class="prodNo">31</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">nodeConstraint</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content">"LITERAL" <span class="prod"><a class="grammarRef" href="#prod-xsFacet">xsFacet</a></span>*<br>
| <span class="prod"><a class="grammarRef" href="#prod-nonLiteralKind">nonLiteralKind</a></span> <span class="prod"><a class="grammarRef" href="#prod-stringFacet">stringFacet</a></span>*<br>
| <span class="prod"><a class="grammarRef" href="#prod-datatype">datatype</a></span> <span class="prod"><a class="grammarRef" href="#prod-xsFacet">xsFacet</a></span>*<br>
| <span class="prod"><a class="grammarRef" href="#prod-valueSet">valueSet</a></span> <span class="prod"><a class="grammarRef" href="#prod-xsFacet">xsFacet</a></span>*<br>
| <span class="prod"><a class="grammarRef" href="#prod-xsFacet">xsFacet</a></span>+</code></td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-nodeconstraint" data-link-type="dfn">NodeConstraint</a></td>
              <td>{</td>
              <td><span class="param">nodeKind</span>:(<span class="literal">"iri"</span> | <span class="literal">"bnode"</span> | <span class="literal">"nonliteral"</span> | <span class="literal">"literal"</span>)? <span class="param">datatype</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>? <a class="nobref internalDFN" href="#dfn-xsfacet" data-link-type="dfn">xsFacet</a>* <span class="param">values</span>:[<a class="nobref internalDFN" href="#dfn-valuesetvalue" data-link-type="dfn">valueSetValue</a>]? }</td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-nonLiteralKind">[<span class="prodNo">32</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">nonLiteralKind</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"IRI" | "BNODE" | "NONLITERAL"</code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-xsFacet">[<span class="prodNo">33</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">xsFacet</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-stringFacet">stringFacet</a></span> | <span class="prod"><a class="grammarRef" href="#prod-numericFacet">numericFacet</a></span></code></td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="nob internalDFN" href="#dfn-xsfacet" data-link-type="dfn">xsFacet</a></td>
              <td>=</td>
              <td><a class="nobref internalDFN" href="#dfn-stringfacet" data-link-type="dfn">stringFacet</a> | <a class="nobref internalDFN" href="#dfn-numericfacet" data-link-type="dfn">numericFacet</a> ;</td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-stringFacet">[<span class="prodNo">34</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">stringFacet</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content"><span class="prod"><a class="grammarRef" href="#prod-stringLength">stringLength</a></span> <span class="prod"><a class="grammarRef" href="#term-INTEGER">INTEGER</a></span><br>
| <span class="prod"><a class="grammarRef" href="#term-REGEXP">REGEXP</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-stringLength">[<span class="prodNo">35</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">stringLength</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"LENGTH" | "MINLENGTH" | "MAXLENGTH"</code></td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="nob internalDFN" href="#dfn-stringfacet" data-link-type="dfn">stringFacet</a></td>
              <td>=</td>
              <td>(<span class="param">"length"</span>|<span class="param">"minlength"</span>|<span class="param">"maxlength"</span>):<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a> | <span class="param">pattern</span>:<a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a> <span class="param">flags</span>:<a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a>? ;</td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-numericFacet">[<span class="prodNo">36</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">numericFacet</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content"><span class="prod"><a class="grammarRef" href="#prod-numericRange">numericRange</a></span> <span class="prod"><a class="grammarRef" href="#prod-numericLiteral">numericLiteral</a></span><br>
| <span class="prod"><a class="grammarRef" href="#prod-numericLength">numericLength</a></span> <span class="prod"><a class="grammarRef" href="#term-INTEGER">INTEGER</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-numericRange">[<span class="prodNo">37</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">numericRange</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"MININCLUSIVE" | "MINEXCLUSIVE" | "MAXINCLUSIVE" | "MAXEXCLUSIVE"</code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-numericLength">[<span class="prodNo">38</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">numericLength</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"TOTALDIGITS" | "FRACTIONDIGITS"</code></td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-numericfacet" data-link-type="dfn">numericFacet</a></td>
              <td>{</td>
              <td>(<span class="param">"mininclusive"</span>|<span class="param">"minexclusive"</span>|<span class="param">"maxinclusive"</span>|<span class="param">"maxexclusive"</span>):<a class="nobref internalDFN" href="#dfn-numericliteral" data-link-type="dfn">numericLiteral</a> | (<span class="param">"totaldigits"</span>|<span class="param">"fractiondigits"</span>):<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a> ;</td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph" style="border-left:thin solid white; border-right:thin solid white;">
            <tr>
              <td colspan="4">
                <p>
                  Shape defintions associate a <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> with a closed flag and a list of partially constrained (extra) <a data-lt="predicate" href="#dfn-predicates" class="internalDFN" data-link-type="dfn">predicates</a>. Any <a href="#dfn-predicate" class="internalDFN" data-link-type="dfn">predicate</a> appearing in a <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> is fully constrained unless it appears in the list of extras.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-shapeDefinition">[<span class="prodNo">18</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">shapeDefinition</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">(<!-- <span class="prod"><a class="grammarRef" href="#prod-includeSet">includeSet</a></span> | --><span class="prod"><a class="grammarRef" href="#prod-extraPropertySet">extraPropertySet</a></span> | "CLOSED")* "{" <span class="prod"><a class="grammarRef" href="#prod-tripleExpression">tripleExpression</a></span>? "}" <span class="prod"><a class="grammarRef" href="#prod-annotation">annotation</a></span>* <span class="prod"><a class="grammarRef" href="#prod-semanticActions">semanticActions</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-inlineShapeDefinition">[<span class="prodNo">19</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">inlineShapeDefinition</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">(<!-- <span class="prod"><a class="grammarRef" href="#prod-includeSet">includeSet</a></span> | --><span class="prod"><a class="grammarRef" href="#prod-extraPropertySet">extraPropertySet</a></span> | "CLOSED")* "{" <span class="prod"><a class="grammarRef" href="#prod-tripleExpression">tripleExpression</a></span>? "}"</code></td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-shape" data-link-type="dfn">Shape</a></td>
              <td>{</td>
              <td>
                <!-- <span class="param">virtual</span>:<a>BOOL</a>? -->
                <span class="param">closed</span>:<a href="#dfn-bool" class="internalDFN" data-link-type="dfn">BOOL</a>?
                <span class="param">extra</span>:[<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>]?
                <span class="param">expression</span>:<a class="nobref internalDFN" href="#dfn-tripleexpr" data-link-type="dfn">tripleExpr</a>?
                <!-- <span class="param">inherit</span>:[<a class="nobref">shapeExprLabel</a>]? -->
                <span class="param">annotations</span>:[<a class="objref internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a>]?
                <span class="param">semActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? }</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                <ul>
                  <li><span class="param">closed</span> is true if the "<code>CLOSED</code>" choice was matched one or more times.</li>
                  <li><span class="param">extra</span> is the set of IRIs matching the <a class="grammarRef" href="#prod-extraPropertySet">extraPropertySet</a> production.</li>
                  <li><span class="param">expression</span> comes from the <a class="grammarRef" href="#prod-tripleExpression">tripleExpression</a> production.</li>
                  <li><span class="param">annotations</span> is the set of <a class="objref internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a>s matching the <span class="prod"><a class="grammarRef" href="#prod-annotation">annotation</a></span> production.</li>
                  <li><span class="param">semActs</span> is the set of semantic actions matching the <span class="prod"><a class="grammarRef" href="#prod-semanticActions">semanticActions</a></span> production.</li>
                </ul>
              </td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-extraPropertySet">[<span class="prodNo">20</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">extraPropertySet</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"EXTRA" <span class="prod"><a class="grammarRef" href="#prod-predicate">predicate</a></span>+</code></td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  Triple expressions are arrangements of triple constraints.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-tripleExpression">[<span class="prodNo">21</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">tripleExpression</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-oneOfTripleExpr">oneOfTripleExpr</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-oneOfTripleExpr">[<span class="prodNo">21</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">oneOfTripleExpr</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-groupTripleExpr">groupTripleExpr</a></span> | <span class="prod"><a class="grammarRef" href="#prod-multiElementOneOf">multiElementOneOf</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-multiElementOneOf">[<span class="prodNo">22</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">multiElementOneOf</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-groupTripleExpr">groupTripleExpr</a></span> ("|" <span class="prod"><a class="grammarRef" href="#prod-groupTripleExpr">groupTripleExpr</a></span>)+</code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                If the right <a class="grammarRef" href="#prod-groupTripleExpr">groupTripleExpr</a> matches one or more times, the result is a <a class="obj internalDFN" href="#dfn-oneof" data-link-type="dfn">OneOf</a> object with <span class="param">expressions</span> containing the first <a class="grammarRef" href="#prod-groupTripleExpr">groupTripleExpr</a> followed by the ordered list from the second <a class="grammarRef" href="#prod-groupTripleExpr">groupTripleExpr</a>:
              </td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-oneof" data-link-type="dfn">OneOf</a></td>
              <td>{</td>
              <td><span class="param">expressions</span>:[<a class="nobref internalDFN" href="#dfn-tripleexpr" data-link-type="dfn">tripleExpr</a>] }</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                otherwise the result is the left <a class="grammarRef" href="#prod-groupTripleExpr">groupTripleExpr</a>.
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-innerTripleExpr">[<span class="prodNo">23</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">innerTripleExpr</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-multiElementGroup">multiElementGroup</a></span> | <span class="prod"><a class="grammarRef" href="#prod-multiElementOneOf">multiElementOneOf</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-groupTripleExpr">[<span class="prodNo">24</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">groupTripleExpr</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-singleElementGroup">singleElementGroup</a></span> | <span class="prod"><a class="grammarRef" href="#prod-multiElementGroup">multiElementGroup</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-singleElementGroup">[<span class="prodNo">25</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">singleElementGroup</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-unaryTripleExpr">unaryTripleExpr</a></span> ";"?</code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-multiElementGroup">[<span class="prodNo">26</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">multiElementGroup</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-unaryTripleExpr">unaryTripleExpr</a></span> (";" <span class="prod"><a class="grammarRef" href="#prod-unaryTripleExpr">unaryTripleExpr</a></span>)+ ";"?</code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                If the right <a class="grammarRef" href="#prod-unaryTripleExpr">unaryTripleExpr</a> matches one or more times, the result is a <a class="obj internalDFN" href="#dfn-eachof" data-link-type="dfn">EachOf</a> object with <span class="param">expressions</span> containing the first <a class="grammarRef" href="#prod-unaryTripleExpr">unaryTripleExpr</a> followed by the ordered list from the second <a class="grammarRef" href="#prod-unaryTripleExpr">unaryTripleExpr</a>:
              </td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-eachof" data-link-type="dfn">EachOf</a></td>
              <td>{</td>
              <td><span class="param">expressions</span>:[<a class="nobref internalDFN" href="#dfn-tripleexpr" data-link-type="dfn">tripleExpr</a>] }</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                otherwise the result is the left <a class="grammarRef" href="#prod-unaryTripleExpr">unaryTripleExpr</a>.
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-unaryTripleExpr">[<span class="prodNo">27</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">unaryTripleExpr</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content">("$" <span class="prod"><a class="grammarRef" href="#prod-tripleExprLabel">tripleExprLabel</a></span>)? (<span class="prod"><a class="grammarRef" href="#prod-tripleConstraint">tripleConstraint</a></span> | <span class="prod"><a class="grammarRef" href="#prod-bracketedTripleExpr">bracketedTripleExpr</a></span>)<br>
| <span class="prod"><a class="grammarRef" href="#prod-include">include</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-bracketedTripleExpr">[<span class="prodNo">28</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">bracketedTripleExpr</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"(" <span class="prod"><a class="grammarRef" href="#prod-innerTripleExpr">innerTripleExpr</a></span> ")" <span class="prod"><a class="grammarRef" href="#prod-cardinality">cardinality</a></span>? <span class="prod"><a class="grammarRef" href="#prod-annotation">annotation</a></span>* <span class="prod"><a class="grammarRef" href="#prod-semanticActions">semanticActions</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  Triple constraints are matched against RDF triples.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-tripleConstraint">[<span class="prodNo">39</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">tripleConstraint</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-senseFlags">senseFlags</a></span>? <span class="prod"><a class="grammarRef" href="#prod-predicate">predicate</a></span> <span class="prod"><a class="grammarRef" href="#prod-inlineShapeExpression">inlineShapeExpression</a></span> <span class="prod"><a class="grammarRef" href="#prod-cardinality">cardinality</a></span>? <span class="prod"><a class="grammarRef" href="#prod-annotation">annotation</a></span>* <span class="prod"><a class="grammarRef" href="#prod-semanticActions">semanticActions</a></span></code></td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-tripleconstraint" data-link-type="dfn">TripleConstraint</a></td>
              <td>{</td>
              <td><span class="param">inverse</span>:<a href="#dfn-bool" class="internalDFN" data-link-type="dfn">BOOL</a>? <span class="param">predicate</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> <span class="param">valueExpr</span>:<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>? <span class="param">min</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">max</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">semActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? <span class="param">annotations</span>:[<a class="objref internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a>]? }</td>
            </tr>

            <tr class="params">
              <td></td>
              <td colspan="3">
                <ul>
                  <li><span class="param">inverse</span> is true if the <span class="prod"><a class="grammarRef" href="#prod-senseFlags">senseFlags</a></span> matched "<code>^</code>".</li>
                  <li><a class="param internalDFN" href="#dfn-predicate" data-link-type="dfn">predicate</a> comes from the <a class="grammarRef" href="#prod-predicate">predicate</a> production.</li>
                  <li><span class="param">valueExpr</span> comes from the <a class="grammarRef" href="#prod-inlineShapeExpression">inlineShapeExpression</a> production. It it is an empty shape <code>{"type": "Shape"}</code>, <span class="param">valueExpr</span> is not assigned.</li>
                  <li><span class="param">min</span> comes from the <a class="grammarRef" href="#prod-cardinality">cardinality</a> production.</li>
                  <li><span class="param">max</span> comes from the <a class="grammarRef" href="#prod-cardinality">cardinality</a> production.</li>
                  <li><span class="param">annotations</span> is the set of <a class="objref internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a>s matching the <span class="prod"><a class="grammarRef" href="#prod-annotation">annotation</a></span> production.</li>
                  <li><span class="param">semActs</span> is the set of semantic actions matching the <span class="prod"><a class="grammarRef" href="#prod-semanticActions">semanticActions</a></span> production.</li>

                </ul>
              </td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-cardinality">[<span class="prodNo">53</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">cardinality</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"*" | "+" | "?" | <span class="prod"><a class="grammarRef" href="#term-REPEAT_RANGE">REPEAT_RANGE</a></span></code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">
                In <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a>, <code>"*"</code> is represented as <code>-1</code>, standing for the unbounded cardinality..
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-senseFlags">[<span class="prodNo">40</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">senseFlags</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"^"</code></td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  Value sets identify ranges of RDF nodes by explicit inclusion or by range (indicated by "<code>~</code>"). Ranges may include exclusions, which may also be ranges but must not in turn contain exclusions. A <a class="param internalDFN" href="#dfn-valuesetvalue" data-link-type="dfn">valueSetValue</a> may be an <a class="param internalDFN" href="#dfn-objectvalue" data-link-type="dfn">objectValue</a> or a <a class="param internalDFN" href="#dfn-stem" data-link-type="dfn">Stem</a> or a <a class="param internalDFN" href="#dfn-stemrange" data-link-type="dfn">StemRange</a>.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-valueSet">[<span class="prodNo">41</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">valueSet</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"[" <span class="prod"><a class="grammarRef" href="#prod-valueSetValue">valueSetValue</a></span>* "]"</code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-valueSetValue">[<span class="prodNo">42</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">valueSetValue</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-iriRange">iriRange</a></span> | <span class="prod"><a class="grammarRef" href="#prod-literal">literal</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-iriRange">[<span class="prodNo">43</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">iriRange</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content"><span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> ("~" <span class="prod"><a class="grammarRef" href="#prod-exclusion">exclusion</a></span>*)?<br>
| "." <span class="prod"><a class="grammarRef" href="#prod-exclusion">exclusion</a></span>+</code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">If <span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> matches with no "<code>~</code>", iriRange returns <span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span>.</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">If <span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> and "<code>~</code>" match with no <span class="prod"><a class="grammarRef" href="#prod-exclusion">exclusion</a></span>, iriRange returns a <a class="obj internalDFN" href="#dfn-stem" data-link-type="dfn">Stem</a> object:</td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-stem" data-link-type="dfn">Stem</a></td>
              <td>{</td>
              <td><span class="param">stem</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> }</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">If <span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> and "<code>~</code>" match and <span class="prod"><a class="grammarRef" href="#prod-exclusion">exclusion</a></span> matches one or more times, iriRange returns a <a class="obj internalDFN" href="#dfn-stemrange" data-link-type="dfn">StemRange</a> object with <span class="param">exclusions</span> equal to the set of results of <span class="prod"><a class="grammarRef" href="#prod-exclusion">exclusion</a></span>:</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">If "<code>.</code>" matches and <span class="prod"><a class="grammarRef" href="#prod-exclusion">exclusion</a></span> matches one or more times, iriRange returns a <a class="obj internalDFN" href="#dfn-stemrange" data-link-type="dfn">StemRange</a> object with <span class="param">exclusions</span> equal to the set of results of <span class="prod"><a class="grammarRef" href="#prod-exclusion">exclusion</a></span>:</td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-stemrange" data-link-type="dfn">StemRange</a></td>
              <td>{</td>
              <td><span class="param">stem</span>:(<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> | <a class="objref internalDFN" href="#dfn-wildcard" data-link-type="dfn">Wildcard</a>) <span class="param">exclusions</span>:[<a class="nobref internalDFN" href="#dfn-valuesetvalue" data-link-type="dfn">valueSetValue</a>]? }</td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">If "<code>~</code>" matches with no <span class="prod"><a class="grammarRef" href="#prod-exclusion">exclusion</a></span>, iriRange returns a <a class="obj internalDFN" href="#dfn-wildcard" data-link-type="dfn">Wildcard</a> object:</td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-wildcard" data-link-type="dfn">Wildcard</a></td>
              <td>{</td>
              <td><span class="comment">/* contains no properties */</span> }</td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-exclusion">[<span class="prodNo">44</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">exclusion</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"-" <span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> "~"?</code></td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  Triple expressions can include the <span class="prod"><a class="grammarRef" href="#prod-shapeExpression">shapeExpression</a></span> in a <span class="prod"><a class="grammarRef" href="#prod-shapeExprDecl">shapeExprDecl</a></span>.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-include">[<span class="prodNo">48</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">include</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"&amp;" <span class="prod"><a class="grammarRef" href="#prod-tripleExprLabel">tripleExprLabel</a></span></code></td>
            </tr>
            <tr class="params">
              <td></td>
              <td colspan="3">Per the <a href="#tripleExprRef-constraint">triple expression refrence requirement</a>, <span class="param">tripleExprLabel</span> property <em class="rfc2119" title="MUST">MUST</em> appear in the schema's <a class="param internalDFN" href="#dfn-shapes" data-link-type="dfn">shapes</a> map and the corresponding <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> <em class="rfc2119" title="MUST">MUST</em> be a <span class="jobjref"><a href="#dfn-shape" class="internalDFN" data-link-type="dfn">Shape</a></span> with a <span class="param">tripleExpr</span>.</td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-tripleexprref" data-link-type="dfn">tripleExprRef</a></td>
              <td>=</td>
              <td><span class="param">include</span>:<a class="nobref internalDFN" href="#dfn-tripleexprlabel" data-link-type="dfn">tripleExprLabel</a> ;</td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  Triple expressions can include annotations in the form of a tuple of a <span class="prod"><a class="grammarRef" href="#prod-predicate">predicate</a></span> and an <span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> or <span class="prod"><a class="grammarRef" href="#prod-literal">literal</a></span>.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-annotation">[<span class="prodNo">50</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">annotation</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"//" <span class="prod"><a class="grammarRef" href="#prod-predicate">predicate</a></span> (<span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> | <span class="prod"><a class="grammarRef" href="#prod-literal">literal</a></span>)</code></td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a></td>
              <td>{</td>
              <td><a class="param internalDFN" href="#dfn-predicate" data-link-type="dfn">predicate</a>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> <span class="param">object</span>:<a class="nobref internalDFN" href="#dfn-objectvalue" data-link-type="dfn">objectValue</a> }</td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  Triple expressions can include semantic actions consisting of an <span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> and an optional code string.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-semanticActions">[<span class="prodNo">49</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">semanticActions</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-codeDecl">codeDecl</a></span>*</code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-codeDecl">[<span class="prodNo">62</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">codeDecl</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"%" <span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> (<span class="prod"><a class="grammarRef" href="#term-CODE">CODE</a></span> | "%")</code></td>
            </tr>
            <tr class="obj">
              <td></td>
              <td><a class="obj internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a></td>
              <td>{</td>
              <td><span class="param">name</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> <span class="param">code</span>:<a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a>? }</td>
            </tr>
          </tbody>

          <!-- 
<tbody class="prod">
<tr style="vertical-align: baseline">
<td id="prod-includeSet">[<span class="prodNo">64</span>]   </td>
<td><code class="production prod">includeSet</code></td>
<td>   ::=   </td>
<td><code class="content">"&amp;" <span class="prod"><a class="grammarRef" href="#prod-shapeExprLabel">shapeExprLabel</a></span>+</code></td>
</tr>
</tbody>
-->

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <p>
                  The remaining productions come from the specifications for SPARQL and Turtle.
                </p>
              </td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-literal">[<span class="prodNo">45</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">literal</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-rdfLiteral">rdfLiteral</a></span> | <span class="prod"><a class="grammarRef" href="#prod-numericLiteral">numericLiteral</a></span> | <span class="prod"><a class="grammarRef" href="#prod-booleanLiteral">booleanLiteral</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-predicate">[<span class="prodNo">51</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">predicate</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> | <span class="prod"><a class="grammarRef" href="#term-RDF_TYPE">RDF_TYPE</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-datatype">[<span class="prodNo">52</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">datatype</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-shapeExprLabel">[<span class="prodNo">54</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">shapeExprLabel</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> | <span class="prod"><a class="grammarRef" href="#prod-blankNode">blankNode</a></span></code></td>
            </tr>
            <tr style="vertical-align: baseline">
              <td id="prod-tripleExprLabel">[<span class="prodNo">63</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">tripleExprLabel</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-iri">iri</a></span> | <span class="prod"><a class="grammarRef" href="#prod-blankNode">blankNode</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-numericLiteral">[<span class="prodNo">55</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">numericLiteral</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#term-INTEGER">INTEGER</a></span> | <span class="prod"><a class="grammarRef" href="#term-DECIMAL">DECIMAL</a></span> | <span class="prod"><a class="grammarRef" href="#term-DOUBLE">DOUBLE</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-rdfLiteral">[<span class="prodNo">56</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">rdfLiteral</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#prod-string">string</a></span> (<span class="prod"><a class="grammarRef" href="#term-LANGTAG">LANGTAG</a></span> | "^^" <span class="prod"><a class="grammarRef" href="#prod-datatype">datatype</a></span>)?</code></td>
            </tr>
            <tr id="handle-RDFLiteral" class="params">
              <td></td>
              <td>returns: <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">            literal     </a></td>
              <td></td>
              <td>The literal has a lexical form of the first rule argument, <code>String</code>. If the <code>'^^' iri</code> rule matched, the datatype is <code>iri</code> and the literal has no <a href="#dfn-language-tag" class="internalDFN" data-link-type="dfn">language tag</a>. If the <code>LANGTAG</code> rule matched, the datatype is <code>rdf:langString</code> and the <a href="#dfn-language-tag" class="internalDFN" data-link-type="dfn">language tag</a> is <code>LANGTAG</code>. If neither matched, the datatype is <code>xsd:string</code> and the literal has no <a href="#dfn-language-tag" class="internalDFN" data-link-type="dfn">language tag</a>.</td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-booleanLiteral">[<span class="prodNo">57</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">booleanLiteral</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"true" | "false"</code></td>
            </tr>
            <tr id="handle-BooleanLiteral" class="params">
              <td></td>
              <td>returns: <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">            literal     </a></td>
              <td></td>
              <td>The literal has a lexical form of the <code>true</code> or <code>false</code>, depending on which matched the input, and a datatype of <code>xsd:boolean</code>.</td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-string">[<span class="prodNo">58</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">string</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content"><span class="prod"><a class="grammarRef" href="#term-STRING_LITERAL1">STRING_LITERAL1</a></span> | <span class="prod"><a class="grammarRef" href="#term-STRING_LITERAL_LONG1">STRING_LITERAL_LONG1</a></span><br>
| <span class="prod"><a class="grammarRef" href="#term-STRING_LITERAL2">STRING_LITERAL2</a></span> | <span class="prod"><a class="grammarRef" href="#term-STRING_LITERAL_LONG2">STRING_LITERAL_LONG2</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-iri">[<span class="prodNo">59</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">iri</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#term-IRIREF">IRIREF</a></span> | <span class="prod"><a class="grammarRef" href="#prod-prefixedName">prefixedName</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-prefixedName">[<span class="prodNo">60</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">prefixedName</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#term-PNAME_LN">PNAME_LN</a></span> | <span class="prod"><a class="grammarRef" href="#term-PNAME_NS">PNAME_NS</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="prod">
            <tr style="vertical-align: baseline">
              <td id="prod-blankNode">[<span class="prodNo">61</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production prod">blankNode</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#term-BLANK_NODE_LABEL">BLANK_NODE_LABEL</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="grammarParagraph">
            <tr>
              <td colspan="4">
                <h2 id="terminals">Terminals</h2>
                <p>
                  Terminals return:
                </p>
                <ul>
                  <li>the RDF abstract types <a class="math internalDFN" href="#dfn-iri" data-link-type="dfn">IRI</a>, <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form">lexical form</a>, <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">literal</a>, <dfn data-dfn-type="dfn" id="dfn-language-tag"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag">language tag</a></dfn>.</li>
                  <li>a string of unicode codepoints for <a href="#term-CODE">CODE</a>.</li>
                  <li>a <code>repeat range</code> for <a href="#term-REPEAT_RANGE">REPEAT_RANGE</a>. A <code>repeat range</code> is a tuple of non-negative integers or a non-negative integer and a token for <code>*</code>.</li>
                </ul>
              </td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-CODE">[<span class="prodNo">65</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">CODE</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"{" ([^%\\] | "\\" [%\\] | <span class="prod"><a class="grammarRef" href="#term-UCHAR">UCHAR</a></span>)* "%" "}"</code></td>
            </tr>
            <tr id="handle-IRIREF-2" class="params">
              <td></td>
              <td>returns: a string of unicode codepoints</td>
              <td></td>
              <td>The characters between "{" and "%}" are taken, with the <a href="https://www.w3.org/TR/turtle/#numeric">numeric escape sequences</a> unescaped, to form the unicode string of the IRI.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-REPEAT_RANGE">[<span class="prodNo">66</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">REPEAT_RANGE</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"{" <span class="prod"><a class="grammarRef" href="#term-INTEGER">INTEGER</a></span> ( "," (<span class="prod"><a class="grammarRef" href="#term-INTEGER">INTEGER</a></span> | "*")? )? "}"</code></td>
            </tr>
            <tr id="handle-REPEAT_RANGE" class="params">
              <td></td>
              <td>returns: repeat range</td>
              <td></td>
              <td>The base-10 numeric values of <span class="prod"><a class="grammarRef" href="#term-INTEGER">INTEGER</a></span> are taken or a non-negative integer and an <code>*</code> token if "<code>*</code>" was matched.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-RDF_TYPE">[<span class="prodNo">67</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">RDF_TYPE</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"a"</code></td>
            </tr>
            <tr id="handle-RDF_TYPE" class="params">
              <td></td>
              <td> returns: <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">      IRI </a></td>
              <td></td>
              <td>The <code>iri</code> <code>http://www.w3.org/1999/02/22-rdf-syntax-ns#</code> is returned.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-IRIREF">[<span class="prodNo">68</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">IRIREF</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"&lt;" ([^#0000- &lt;&gt;\"{}|^`\\] | <span class="prod"><a class="grammarRef" href="#term-UCHAR">UCHAR</a></span>)* "&gt;"</code></td>
            </tr>
            <tr id="handle-IRIREF" class="params">
              <td></td>
              <td>returns: <a class="math internalDFN" href="#dfn-iri" data-link-type="dfn">IRI</a></td>
              <td></td>
              <td>The characters between "&lt;" and "&gt;" are taken, with the <a href="https://www.w3.org/TR/turtle/#numeric">numeric escape sequences</a> unescaped, to form the unicode string of the IRI. Relative IRI resolution is performed per Turtle <a class="sectionRef" href="https://www.w3.org/TR/turtle/#sec-iri-references">Section 6.3</a>.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PNAME_NS">[<span class="prodNo">69</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">PNAME_NS</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#term-PN_PREFIX">PN_PREFIX</a></span>? ":"</code></td>
            </tr>
            <tr id="handle-PNAME_NS" class="params">
              <td></td>
              <td>returns: <a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">                                 PREFIX      </a></td>
              <td></td>
              <td>When used in a <a href="#prod-prefixDecl">prefixDecl</a> production, the <a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">prefix</a> is a potentially empty unicode string matching the first argument of the rule and serves as a key into the <a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">prefixes map</a>.</td>
            </tr>
            <tr id="handle-PNAME_NS2" class="params">
              <td></td>
              <td> returns: <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">      IRI </a></td>
              <td></td>
              <td>When used elsewhere, the <code>iri</code> is the value in the <a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">prefixes map</a> corresponding to the first argument of the rule.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PNAME_LN">[<span class="prodNo">70</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">PNAME_LN</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#term-PNAME_NS">PNAME_NS</a></span> <span class="prod"><a class="grammarRef" href="#term-PN_LOCAL">PN_LOCAL</a></span></code></td>
            </tr>
            <tr id="handle-PNAME_LN" class="params">
              <td></td>
              <td>returns: <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">      IRI         </a></td>
              <td></td>
              <td>A potentially empty <a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">prefix</a> is identified by the first token, <code>PNAME_NS</code>. The <a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">prefixes map</a> <em class="rfc2119"><em class="rfc2119" title="MUST"><em class="rfc2119" title="MUST">MUST</em></em>
                </em> have a corresponding <code>namespace</code>. The unicode string of the IRI is formed by unescaping the <a href="#reserved">reserved characters</a> in the second argument, <code>PN_LOCAL</code>, and concatenating this onto the <code>namespace</code>.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-ATPNAME_NS">[<span class="prodNo">71</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">ATPNAME_NS</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"@" <span class="prod"><a class="grammarRef" href="#term-PN_PREFIX">PN_PREFIX</a></span>? ":"</code></td>
            </tr>
            <tr id="handle-ATPNAME_NS" class="params">
              <td></td>
              <td> returns: <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">      IRI </a></td>
              <td></td>
              <td>The <code>iri</code> is the value in the <a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">prefixes map</a> corresponding to the second token of the rule.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-ATPNAME_LN">[<span class="prodNo">72</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">ATPNAME_LN</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"@" <span class="prod"><a class="grammarRef" href="#term-PNAME_NS">PNAME_NS</a></span> <span class="prod"><a class="grammarRef" href="#term-PN_LOCAL">PN_LOCAL</a></span></code></td>
            </tr>
            <tr id="handle-ATPNAME_LN" class="params">
              <td></td>
              <td>returns: <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">      IRI         </a></td>
              <td></td>
              <td>A potentially empty <a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">prefix</a> is identified by the second token, <code>PNAME_NS</code>. The <a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">prefixes map</a> <em class="rfc2119"><em class="rfc2119" title="MUST"><em class="rfc2119" title="MUST">MUST</em></em>
                </em> have a corresponding <code>namespace</code>. The unicode string of the IRI is formed by unescaping the <a href="#reserved">reserved characters</a> in the third token, <code>PN_LOCAL</code>, and concatenating this onto the <code>namespace</code>.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-REGEXP">[<span class="prodNo">63</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">REGEXP</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">'/' ([^/\\\n\r] | '\\' [nrt\\|.?*+(){}$-\[\]^/] | <span class="prod"><a class="grammarRef" href="#term-UCHAR">UCHAR</a></span>)+ '/' [smix]*</code></td>
            </tr>
            <tr class="obj">
              <td></td>
              <td></td>
              <td>{</td>
              <td><span class="param">pattern</span>:<a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a> <span class="param">flags</span>:<a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a>? }</td>
            </tr>
            <tr id="handle-PNAME_LN" class="params">
              <td></td>
              <td>returns: <a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-terms-and-definitions-object">JSON object</a></td>
              <td></td>
              <td><span class="param">pattern</span> is a unicode string formed from the characters between the outermost '/'s by unescaping matches of '\\' '/' in the terminal pattern as well as the <a href="https://www.w3.org/TR/turtle/#numeric">numeric escape sequences</a> matched by <span class="prod"><a class="grammarRef" href="#term-UCHAR">UCHAR</a></span>. The remaining escape sequences are included verbatim in <span class="param">pattern</span>, e.g.
                <div class="inline shexc">
                  <pre aria-busy="false" aria-live="polite" class="hljs undefined">^\/\t\\\U0001D4B8$</pre>
                </div> would become
                <div class="inline json">
                  <pre aria-busy="false" aria-live="polite" class="hljs undefined">^/\t\\\U0001D4B8$</pre>
                </div>.<br>
                <span class="param">flags</span> is a sequence of the characters [smix] if any were matched. Otherwise no <span class="param">flags</span> attribute is returned.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-BLANK_NODE_LABEL">[<span class="prodNo">73</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">BLANK_NODE_LABEL</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"_:" (<span class="prod"><a class="grammarRef" href="#term-PN_CHARS_U">PN_CHARS_U</a></span> | [0-9]) ((<span class="prod"><a class="grammarRef" href="#term-PN_CHARS">PN_CHARS</a></span> | ".")* <span class="prod"><a class="grammarRef" href="#term-PN_CHARS">PN_CHARS</a></span>)?</code></td>
            </tr>
            <tr id="handle-BLANK_NODE_LABEL" class="params">
              <td></td>
              <td>returns: <a href="#dfn-bnode" class="internalDFN" data-link-type="dfn">BNode</a></td>
              <td></td>
              <td>The characters following the "<code>_:</code>" form a <a href="#dfn-blank-node-identifier" class="internalDFN" data-link-type="dfn">blank node identifier</a>. This corresponds to any <a href="#dfn-blank-node" class="internalDFN" data-link-type="dfn">blank node</a> in the input dataset that had the same label.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-LANGTAG">[<span class="prodNo">74</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">LANGTAG</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"@" ([a-zA-Z])+ ("-" ([a-zA-Z0-9])+)*</code></td>
            </tr>
            <tr id="handle-LANGTAG" class="params">
              <td></td>
              <td>returns: <a href="#dfn-language-tag" class="internalDFN" data-link-type="dfn">language tag</a></td>
              <td></td>
              <td>The characters following the <code>@</code> form the unicode string of the <a href="#dfn-language-tag" class="internalDFN" data-link-type="dfn">language tag</a>.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-INTEGER">[<span class="prodNo">75</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">INTEGER</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">[+-]? [0-9]+</code></td>
            </tr>
            <tr id="handle-INTEGER" class="params">
              <td></td>
              <td>returns: <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">            literal     </a></td>
              <td></td>
              <td>The literal has a lexical form of the input string, and a datatype of <code>xsd:integer</code>.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-DECIMAL">[<span class="prodNo">76</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">DECIMAL</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">[+-]? [0-9]* "." [0-9]+</code></td>
            </tr>
            <tr id="handle-DECIMAL" class="params">
              <td></td>
              <td>returns: <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">            literal     </a></td>
              <td></td>
              <td>The literal has a lexical form of the input string, and a datatype of <code>xsd:double</code>.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-DOUBLE">[<span class="prodNo">77</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">DOUBLE</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">[+-]? ([0-9]+ "." [0-9]* <span class="prod"><a class="grammarRef" href="#term-EXPONENT">EXPONENT</a></span> | "."? [0-9]+ <span class="prod"><a class="grammarRef" href="#term-EXPONENT">EXPONENT</a></span>)</code></td>
            </tr>
            <tr id="handle-DOUBLE" class="params">
              <td></td>
              <td>returns: <a href="#dfn-literal" class="internalDFN" data-link-type="dfn">            literal     </a></td>
              <td></td>
              <td>The literal has a lexical form of the input string, and a datatype of <code>xsd:double</code>.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-EXPONENT">[<span class="prodNo">78</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">EXPONENT</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">[eE] [+-]? [0-9]+</code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-STRING_LITERAL1">[<span class="prodNo">79</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">STRING_LITERAL1</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"'" ([^'\\\n\r] | <span class="prod"><a class="grammarRef" href="#term-ECHAR">ECHAR</a></span> | <span class="prod"><a class="grammarRef" href="#term-UCHAR">UCHAR</a></span>)* "'"</code></td>
            </tr>
            <tr id="handle-STRING_LITERAL1" class="params">
              <td></td>
              <td>returns: <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form">                         lexical form</a></td>
              <td></td>
              <td>The characters between the outermost "'"s are taken, with <a href="https://www.w3.org/TR/turtle/#numeric">numeric</a> and <a href="https://www.w3.org/TR/turtle/#string">string</a> escape sequences unescaped, to form the unicode string of a lexical form.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-STRING_LITERAL2">[<span class="prodNo">80</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">STRING_LITERAL2</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">'"' ([^\"\\\n\r] | <span class="prod"><a class="grammarRef" href="#term-ECHAR">ECHAR</a></span> | <span class="prod"><a class="grammarRef" href="#term-UCHAR">UCHAR</a></span>)* '"'</code></td>
            </tr>
            <tr id="handle-STRING_LITERAL2" class="params">
              <td></td>
              <td>returns: <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form">                         lexical form</a></td>
              <td></td>
              <td>The characters between the outermost '"'s are taken, with <a href="https://www.w3.org/TR/turtle/#numeric">numeric</a> and <a href="https://www.w3.org/TR/turtle/#string">string</a> escape sequences unescaped, to form the unicode string of a lexical form.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-STRING_LITERAL_LONG1">[<span class="prodNo">81</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">STRING_LITERAL_LONG1</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"'''" ( ("'" | "''")? ([^\\'\\] | <span class="prod"><a class="grammarRef" href="#term-ECHAR">ECHAR</a></span> | <span class="prod"><a class="grammarRef" href="#term-UCHAR">UCHAR</a></span>) )* "'''"</code></td>
            </tr>
            <tr id="handle-STRING_LITERAL_LONG1" class="params">
              <td></td>
              <td>returns: <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form">                         lexical form</a></td>
              <td></td>
              <td>The characters between the outermost "'''"s are taken, with <a href="https://www.w3.org/TR/turtle/#numeric">numeric</a> and <a href="https://www.w3.org/TR/turtle/#string">string</a> escape sequences unescaped, to form the unicode string of a lexical form.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-STRING_LITERAL_LONG2">[<span class="prodNo">83</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">STRING_LITERAL_LONG2</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">'"""' ( ('"' | '""')? ([^\"\\] | <span class="prod"><a class="grammarRef" href="#term-ECHAR">ECHAR</a></span> | <span class="prod"><a class="grammarRef" href="#term-UCHAR">UCHAR</a></span>) )* '"""'</code></td>
            </tr>
            <tr id="handle-STRING_LITERAL_LONG2" class="params">
              <td></td>
              <td>returns: <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form">                         lexical form</a></td>
              <td></td>
              <td>The characters between the outermost '"""'s are taken, with <a href="https://www.w3.org/TR/turtle/#numeric">numeric</a> and <a href="https://www.w3.org/TR/turtle/#string">string</a> escape sequences unescaped, to form the unicode string of a lexical form.</td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-UCHAR">[<span class="prodNo">85</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">UCHAR</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content">"\\u" <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span><br>
| "\\U" <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-ECHAR">[<span class="prodNo">86</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">ECHAR</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"\\" [tbnrf\\\"\\']</code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PN_CHARS_BASE">[<span class="prodNo">89</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">PN_CHARS_BASE</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content">[A-Z] | [a-z]<br>
| [#00C0-#00D6] | [#00D8-#00F6] | [#00F8-#02FF]<br>
| [#0370-#037D] | [#037F-#1FFF]<br>
| [#200C-#200D] | [#2070-#218F] | [#2C00-#2FEF]<br>
| [#3001-#D7FF] | [#F900-#FDCF] | [#FDF0-#FFFD]<br>
| [#10000-#EFFFF]</code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PN_CHARS_U">[<span class="prodNo">90</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">PN_CHARS_U</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#term-PN_CHARS_BASE">PN_CHARS_BASE</a></span> | "_"</code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PN_CHARS">[<span class="prodNo">91</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">PN_CHARS</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content"><span class="prod"><a class="grammarRef" href="#term-PN_CHARS_U">PN_CHARS_U</a></span> | "-" | [0-9]<br>
| [#00B7] | [#0300-#036F] | [#203F-#2040]</code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PN_PREFIX">[<span class="prodNo">92</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">PN_PREFIX</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#term-PN_CHARS_BASE">PN_CHARS_BASE</a></span> ( (<span class="prod"><a class="grammarRef" href="#term-PN_CHARS">PN_CHARS</a></span> | ".")* <span class="prod"><a class="grammarRef" href="#term-PN_CHARS">PN_CHARS</a></span> )?</code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PN_LOCAL">[<span class="prodNo">93</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">PN_LOCAL</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">(<span class="prod"><a class="grammarRef" href="#term-PN_CHARS_U">PN_CHARS_U</a></span> | ":" | [0-9] | <span class="prod"><a class="grammarRef" href="#term-PLX">PLX</a></span>) ( (<span class="prod"><a class="grammarRef" href="#term-PN_CHARS">PN_CHARS</a></span> | "." | ":" | <span class="prod"><a class="grammarRef" href="#term-PLX">PLX</a></span>)* (<span class="prod"><a class="grammarRef" href="#term-PN_CHARS">PN_CHARS</a></span> | ":" | <span class="prod"><a class="grammarRef" href="#term-PLX">PLX</a></span>) )?</code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PLX">[<span class="prodNo">94</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">PLX</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content"><span class="prod"><a class="grammarRef" href="#term-PERCENT">PERCENT</a></span> | <span class="prod"><a class="grammarRef" href="#term-PN_LOCAL_ESC">PN_LOCAL_ESC</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PERCENT">[<span class="prodNo">95</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">PERCENT</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"%" <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span> <span class="prod"><a class="grammarRef" href="#term-HEX">HEX</a></span></code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-HEX">[<span class="prodNo">96</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">HEX</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">[0-9] | [A-F] | [a-f]</code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PN_LOCAL_ESC">[<span class="prodNo">97</span>]&nbsp;&nbsp;&nbsp;</td>
              <td>&lt;<code class="production term">PN_LOCAL_ESC</code>&gt;</td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td><code class="content">"\\" ( "_" | "~" | "." | "-" | "!" | "$" | "&amp;" | "'" | "(" | ")" | "*" | "+" | "," | ";" | "=" | "/" | "?" | "#" | "@" | "%" )</code></td>
            </tr>
          </tbody>

          <tbody class="term">
            <tr style="vertical-align: baseline">
              <td id="term-PASSED_TOKENS">[<span class="prodNo">98</span>]&nbsp;&nbsp;&nbsp;</td>
              <td><code class="production directive">PASSED TOKENS</code></td>
              <td>&nbsp;&nbsp;&nbsp;::=&nbsp;&nbsp;&nbsp;</td>
              <td>&nbsp;&nbsp;&nbsp;<code class="content">[ \t\r\n]+<br>
| "#" [^\r\n]*</code></td>
            </tr>
          </tbody>

        </table>
      </div>
    </div>

    <div class="example">
      <div class="example-title marker"><span>Parsing ShExC Example 1</span></div>
      <p>An employee must have an email address that is the string "N/A" or starts with "engineering-" or "sales-" but not "sales-contacts" or "sales-interns":</p>
      <p>
        Following is a ShEx schema written in <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a> with line numbers added at the left for reference.
      </p>


      <pre class="shex hljs undefined" aria-busy="false" aria-live="polite">
      PREFIX ex:   &lt;http://schema.example/&gt;
      PREFIX foaf: &lt;http://xmlns.com/foaf/&gt;
      PREFIX xsd:  &lt;http://www.w3.org/2001/XMLSchema#&gt;
      PREFIX rdf:  &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;

1     &lt;IssueShape&gt; CLOSED EXTRA rdf:type
2     {                           
3         rdf:type [ex:Issue];
4         ex:state [ex:unassigned ex:assigned]; 
5                                            
6         ex:reportedBy @&lt;UserShape&gt;;   
7         ex:reportedOn xsd:dateTime;         
8         (                                   
9           ex:reproducedBy @&lt;EmployeeShape&gt;;  
10          ex:reproducedOn xsd:dateTime OR xsd:date 
11        )?;
12        ^ex:related @&lt;IssueShape&gt;*            
13    }
14
15    &lt;UserShape&gt; PATTERN "^http:/example.org/.*" {                     
16        (                                   
17           foaf:name xsd:string             
18         |                                  
19           foaf:givenName xsd:string+;      
20           foaf:familyName xsd:string
21        );     
22        foaf:mbox IRI              
23    }
24
25    &lt;EmployeeShape&gt; {        
26        foaf:phone IRI*;          
27        foaf:mbox IRI             
28    } AND {
29        ( foaf:phone PATTERN "^tel:\\+33"; 
30          foaf:mbox PATTERN "\\.fr$" )?;
31        ( foaf:phone PATTERN "^tel:\\+44"; 
32          foaf:mbox PATTERN "\\.uk$")?
33    }
</pre>
      <p>
        We first explain some elements of the concrete syntax. A <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> is surrounded by curly braces { and }. The square braces delimit sets of values. Parentheses are used as usual for defining the structre of an expression. We use abbreviations for some intervals of min and max cardinality, namely, '+' is the interval [1;*], '*' is the interval [0;*], and '?' is the interval [0;1].
      </p>

      <p>
        Then, the schema here above defines three shape labels: <span class="pre">&lt;IssueShape&gt;, &lt;UserShape&gt;, &lt;EmployeeShape&gt;</span>.
      </p>
      <p>
        The <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> that defines the shape label <span class="pre">&lt;IssueShape&gt;</span> starts on line 1 after the shape label, and ends with the curly bracket on line 13. It has an empty list of node constraints, and a single shape definition. The shape definition has two modifiers, <span class="math">CLOSED</span>, and <span class="math">EXTRA</span>. The parameter of the <span class="math">EXTRA</span> modifier is a singleton set that contains the property <span class="pre">rdf:type</span>.
      </p>
      <p>
        The <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> in the shape definition is given between the curly braces on lines 2 and 13. It is an each-of expression composed of six sub-expressions, separated by semicolons. The sub-expressions are as follows:
      </p>
      <ul>
        <li>
          Four triple constraints on lines 3, 4, 6, 7.
        </li>
        <li>
          Two repeated <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expressions</a>, one on lines 8--11 with cardinality ? = [0;1], another one on line 12 with cardinality * = [0;*].
        </li>
      </ul>

      <p>
        We explain the different forms of triple constraint that appear in the definition of <span class="pre">&lt;IssueShape&gt;</span>, by explaining their property or their value expression.
      </p>

      <pre aria-busy="false" aria-live="polite" class="hljs xml">1     <span class="hljs-tag">&lt;<span class="hljs-name">IssueShape</span>&gt;</span> CLOSED EXTRA rdf:type
2     {                           
3         a [ex:Issue];                              # rdf:type of ex:Issue
4         ex:state [ex:unassigned ex:assigned];      # ex:state of ex:unassigned
                                                     #          or ex:assigned
5
6         ex:reportedBy @<span class="hljs-tag">&lt;<span class="hljs-name">UserShape</span>&gt;</span>;                # ShapeExprRef to <span class="hljs-tag">&lt;<span class="hljs-name">UserShape</span>&gt;</span>

7         ex:reportedOn xsd:dateTime;                # literal with datatype xsd:dateTime
8         (
9           ex:reproducedBy @<span class="hljs-tag">&lt;<span class="hljs-name">EmployeeShape</span>&gt;</span>;        # ShapeExprRef to <span class="hljs-tag">&lt;<span class="hljs-name">EmployeeShape</span>&gt;</span>
10          ex:reproducedOn xsd:dateTime OR xsd:date # literal with datatype xsd:dateTime
                                                     #                    or xsd:date
11        )?;
12        ex:related @<span class="hljs-tag">&lt;<span class="hljs-name">IssueShape</span>&gt;</span>*            
13    }
</pre>

      <p>
        We now explain a few other elements of the syntax.
      </p>

      <pre aria-busy="false" aria-live="polite" class="hljs javascript"><span class="hljs-number">15</span>    &lt;UserShape&gt; PATTERN <span class="hljs-string">"^http:/example.org/.*"</span> {                     
         ‚Ä¶
<span class="hljs-number">23</span>    }
</pre>

      <p>
        The <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> that defines <span class="pre">&lt;UserShape&gt;</span> is composed of one node constraint <span class="pre">PATTERN "^http:/example.org/.*"</span> and one shape definition between the curly braces lines 15 to 23. The node constraint <span class="pre">PATTERN "^http:/example.org/.*"</span> defines the set of IRI that satisfy a pattern given by a regular expression.
      </p>

      <pre aria-busy="false" aria-live="polite" class="hljs xml">25    <span class="hljs-tag">&lt;<span class="hljs-name">EmployeeShape</span>&gt;</span> {        
        ‚Ä¶
28    } AND {
        ‚Ä¶
33    }
</pre>

      <p>
        The <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expression</a> that defines <span class="pre">&lt;EmployeeShape&gt;</span> is composed of zero node constrainst, and two shape definitions, separated by an <span class="pre">AND</span>.
      </p>
    </div>

    <div class="example">
      <div class="with-highlight">@
        <p>
          Moving the mouse over the elements of the list below will highlight the corresponding elements in the <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a>.
        </p>
        <ul>
          <li><span class="hl-tc lowlight1">triple constraint</span> (<span class="as"><a href="#dfn-tripleconstraint" class="internalDFN" data-link-type="dfn">TripleConstraint</a></span>)</li>
          <li><span class="hl-oneof lowlight2">one-of <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a></span> (<span class="as"><a href="#prod-oneOfTripleExpr">OneOfTripleExpr</a></span>)</li>
          <li><span class="hl-eachof lowlight2">each-of <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a></span> (<span class="as"><a href="#prod-singleElementGroup">SingleElementGroup</a></span>)</li>
          <li><span class="hl-repet lowlight3">repeated <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a></span> (<span class="as"><a href="#prod-cardinality">Cardinality</a></span>)</li>
          <li><span class="hl-inverse-tc lowlight1">triple constraint with an inverse property</span></li>
          <!-- li><span class="hl-tc-cofinite lowlight1">triple constraint with a non-singleton co-finite set of properties</span></li -->
          <li><span class="hl-shref lowlight4">shape reference</span> (<span class="as"><a href="#dfn-shapeexprref" class="internalDFN" data-link-type="dfn">ShapeExprRef</a></span>)</li>
        </ul>
        <pre class="shex hljs undefined" aria-busy="false" aria-live="polite"># triple expression of the shapes language

&lt;S1&gt; {

  rdf:type @&lt;SL_1&gt; ;

  foaf:name @&lt;SL_2&gt; ;

  ( foaf:mbox @&lt;SL_3&gt; {1,3} | foaf:adress @&lt;SL_3&gt; ) ;

  ^ex:leader &lt;SL_4&gt; ;
}
</pre>
        <!-- p>
      Where <span class="pre">C{rdf:type, foaf:name, foaf:givenName, foaf:familyName, foaf:mbox} = (Prop ‚à™ InvProp) \ {rdf:type, foaf:name, foaf:givenName, foaf:familyName, foaf:mbox}</span>, that is, the complement of the set <span class="pre">{rdf:type, foaf:name, foaf:givenName, foaf:familyName, foaf:mbox}</span> within the set of all properties and inverse properties.
    </p -->
      </div>
      <script type="text/javascript">
        <!--
        prepareHighlight(["hl-tc", "hl-tc-cofinite", "hl-inverse-tc"], "highlight1", "lowlight1");
        prepareHighlight(["hl-oneof", "hl-eachof"], "highlight2", "lowlight2");
        prepareHighlight(["hl-repet"], "highlight3", "lowlight3");
        prepareHighlight(["hl-shref"], "highlight4", "lowlight4");
        -->
      </script>
    </div>

    <section id="compilation-example" typeof="bibo:Chapter" resource="#compilation-example" property="bibo:hasPart">
      <h3 id="h-compilation-example" resource="#h-compilation-example"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.1 </span>Examples of Compilating <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a> into <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a></span>
      </h3>

      <section id="compilation-example-closed-shape" typeof="bibo:Chapter" resource="#compilation-example-closed-shape" property="bibo:hasPart">
        <h4 id="h-compilation-example-closed-shape" resource="#h-compilation-example-closed-shape"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.1.1 </span>Closed shape expression</span>
        </h4>

        <div class="example">
          <div class="with-highlight">
            <p>
              Every <span class="hl-issueshape hl-usershape lowlight2">shape label</span> from the ShEx schema is used as <span class="hl-issueshape lowlight2">shape label</span> in the shapes schema, which definition is the compilation of the definition from the ShEx schema.
            </p>
            <p>
              Every <span class="hl-ve1 hl-ve3 lowlight1">shape expression</span> that appears in a triple constraint of the ShEx schema yields a <span class="hl-ve1  hl-ve2 hl-ve3 hl-ve4 hl-ve4bis lowlight1">fresh shape label having the same definition</span> in the shapes schema. This does not apply to shape expressions that are references.
            </p>
            <p>
              The translation of a CLOSED <span class="hl-te lowlight3">triple expression</span> in the ShEx schema translates almost directly to a <span class="hl-te lowlight3">triple expression</span> in the shapes schema, exept that <a data-lt="predicate" href="#dfn-predicates" class="internalDFN" data-link-type="dfn">predicates</a> are replaced with singleton sets, and <span class="hl-ve1 hl-ve3 lowlight1">value expressions</span> are replaced with the corresponding freshly introduced <span class="hl-ve1 hl-ve3 lowlight1">shape labels</span>
            </p>

            <pre class="shex hljs undefined" style="float:left" aria-busy="false" aria-live="polite"># ShEx schema

&lt;IssueShape&gt;

CLOSED {                 
    ex:state      [ex:unassigned ex:assigned] ; 
    ex:reportedBy @&lt;UserShape&gt; ;   
    ex:reportedOn xsd:dateTime OR xsd:date ;
    ex:related    @&lt;IssueShape&gt;* ;
    ^ex:related   @&lt;IssueShape&gt;*
}
&lt;UserShape&gt; {
    a PATTERN "http://example.org/User#.*"
}
</pre>
            <pre class="shex hljs undefined" style="float:left" aria-busy="false" aria-live="polite"># shapes schema

&lt;IssueShape&gt; := 
{
    {ex:state}      &lt;SL_1&gt; ;
    {ex:reportedBy} &lt;UserShape&gt;
    {ex:reportedOn} &lt;SL_3&gt; ;
    {ex:related}    &lt;IssueShape&gt;*  ;
    {^ex:related}   &lt;IssueShape&gt;*
}


&lt;UserShape&gt; {
    Set(PATTERN "http://example.org/User#.*")
}


&lt;SL_1&gt;  := {ex:unassigned, ex:assigned}
&lt;SL_3&gt;  := xsd:dateTime OR xsd:date
</pre>

          </div>
          <script type="text/javascript">
            <!--
            prepareHighlight(["hl-ve1", "hl-ve3"], "highlight1", "lowlight1");
            prepareHighlight(["hl-issueshape", "hl-usershape"], "highlight2", "lowlight2");
            prepareHighlight(["hl-te"], "highlight3", "lowlight3");
            -->
          </script>
          <div style="clear:both;"> </div>
        </div>
      </section>

      <section id="translate-example-closed-with-extra" typeof="bibo:Chapter" resource="#translate-example-closed-with-extra" property="bibo:hasPart">
        <h4 id="h-translate-example-closed-with-extra" resource="#h-translate-example-closed-with-extra"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.1.2 </span>Closed shape expression with EXTRA modifier</span>
        </h4>

        <div class="example">
          <div class="with-highlight">
            <p>
              As in the previous example, the value expressions of the ShEx schema yield shape labels with the same definition. Here, the resulting fresh shape labels are <span class="pre">&lt;SL_5&gt;, &lt;SL_6&gt;, &lt;SL_7&gt;, &lt;SL_8&gt;</span>.
            </p>
            <p>
              The <span class="hl-shapexpr lowlight3">triple expression</span> from the ShEx schema is translated into a <span class="hl-shapexpr lowlight3">triple expression</span> in the shapes schema.
              <span class="hl-samete lowlight1 lowlight4">One part of that triple expression</span> is a direct translation of <span class="hl-samete lowlight1 lowlight4">the <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expression</a> from the ShEx schema</span>.
            </p>
            <p>
              The <span class="hl-extra lowlight1">EXTRA modifier</span> results in <span class="hl-extra lowlight1">additional triple constraints</span> in the shapes schema. There is one such triple constraint with * cardinality for every extra property. For every extra property, the <span class="hl-extra-ve1 hl-extra-ve2 lowlight2">value expression is the negation of the value expressions that occur with the same property</span>.
            </p>

            <pre class="shex hljs undefined" style="float:left" aria-busy="false" aria-live="polite"># ShEx schema
        
        
        






&lt;UserShape&gt;
CLOSED 
EXTRA rdf:type foaf:mbox {

    rdf:type [foaf:Person] ;
    rdf:type [ex:User] ;
    (                                   
       foaf:name xsd:string 
     |                                  
       foaf:givenName xsd:string+ ;      
       foaf:familyName xsd:string
    );
    foaf:mbox IRI

}

</pre>


            <pre class="shex hljs undefined" style="float:left" aria-busy="false" aria-live="polite"># shapes schema

&lt;SL_5&gt; := {foaf:Person}
&lt;SL_6&gt; := {ex:User}
&lt;SL_7&gt; := xsd:string
&lt;SL_8&gt; := IRI

&lt;SL_UserShape_Extra_rdftype&gt; := NOT{foaf:Person} AND NOT{ex:User}
&lt;SL_UserShape_Extra_foafmxbox&gt; := NOT IRI


&lt;UserShape&gt; := 
{
    {rdf:type}  &lt;SL_5&gt; ;
    {rdf:type}  &lt;SL_6&gt; ;
    (
        {foaf:name}       &lt;SL_7&gt;
    |
        {foaf:givenName}  &lt;SL_7&gt;+ ;
        {foaf:familyName} &lt;SL_7&gt;
    );
    {foaf:mbox} &lt;SL_8&gt; ;

    {rdf:type}  &lt;SL_UserShape_Extra_rdftype&gt; * ;
    {foaf:mbox} &lt;SL_UserShape_Extra_foafmbox&gt; * ;

}

</pre>
            <div style="clear:both;"> </div>

          </div>
        </div>
        <script type="text/javascript">
          <!--
          prepareHighlight(["hl-extra"], "highlight1", "lowlight1");
          prepareHighlight(["hl-extra-ve1", "hl-extra-ve2"], "highlight2", "lowlight2");
          prepareHighlight(["hl-shapexpr"], "highlight3", "lowlight3");
          prepareHighlight(["hl-samete"], "highlight4", "lowlight4");
          -->
        </script>
      </section>

      <section id="compilation-example-non-closed-shape" typeof="bibo:Chapter" resource="#compilation-example-non-closed-shape" property="bibo:hasPart">
        <h4 id="h-compilation-example-non-closed-shape" resource="#h-compilation-example-non-closed-shape"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.1.3 </span>Non closed shape expression</span>
        </h4>
        <div class="example">
          <div class="with-highlight">
            <p>
              As for the case with EXTRA properties, the <span class="hl-shapexpr lowlight3">shape expression</span> from the ShEx schema is tranlated into a <span class="hl-shapexpr lowlight3">triple expression</span> with an <span class="hl-open-tc lowlight4">additional triple constraint with * cardinality</span>. The <span class="hl-propset lowlight2">set of properties</span> of the latter is the set of <span class="hl-propset lowlight2">all properties that do not appear in the shape expression</span>. The <span class="hl-ve lowlight1">value expression</span> accepts all values.
            </p>


            <pre class="shex hljs undefined" style="float:left" aria-busy="false" aria-live="polite"># ShEx schema





&lt;SomeShape&gt; 
{
    ex:p xsd:int* ;
    ( ex:q xsd:int | ex:r IRI )? 
}

</pre>
            <pre class="shex hljs undefined" style="float:left" aria-busy="false" aria-live="polite"># shapes schema

&lt;SL_9&gt;  := xsd:int
&lt;SL_10&gt; := IRI

&lt;SL_all_values&gt;  := IRI ‚à™ Literal ‚à™ {blank}

&lt;SomeShape&gt; := 
{
    {ex:p}  &lt;SL_9&gt;* ;
    ( {ex:q}  &lt;SL_9&gt; | {ex:r} &lt;SL_10&gt; )? ;

    PropSet  &lt;SL_all_values&gt;*    
}


# with PropSet = (Prop ‚à™ InvProp) \ {ex:p, ex:q, ex:r}
</pre>
            <div style="clear:both;"> </div>

          </div>
          <script type="text/javascript">
            <!--
            prepareHighlight(["hl-ve"], "highlight1", "lowlight1");
            prepareHighlight(["hl-propset"], "highlight2", "lowlight2");
            prepareHighlight(["hl-shapexpr"], "highlight3", "lowlight3");
            prepareHighlight(["hl-open-tc"], "highlight4", "lowlight4");
            -->
          </script>
        </div>
      </section>

      <section id="compilation-example-conjunctive-shape" typeof="bibo:Chapter" resource="#compilation-example-conjunctive-shape" property="bibo:hasPart">
        <h4 id="h-compilation-example-conjunctive-shape" resource="#h-compilation-example-conjunctive-shape"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.1.4 </span>Complex shape definition</span>
        </h4>

        <div class="example">
          <div class="with-highlight">
            <p>
              The shape label <span class="pre">&lt;EmployeeShape&gt;</span> is defined as a conjunction of <span class="hl-nc lowlight2">node constrints</span> and <span class="hl-te1 hl-te2 lowlight3">triple expressions</span>. In the shapes schema, this yields a <span class="hl-conj lowlight4"><a href="#dfn-shapeand" class="internalDFN" data-link-type="dfn">ShapeAnd</a> shape expression</span> with one conjunct per conjunct in the ShEx schema.
            </p>

            <pre class="shex hljs undefined" style="float:left" aria-busy="false" aria-live="polite"># ShEx schema

&lt;EmployeeShape&gt;
PATTERN "^http:/example.org/.*"

CLOSED {        
    foaf:phone IRI*;          
    foaf:mbox IRI             
}

AND 

CLOSED {
    ( foaf:phone PATTERN "^tel:\\+33" ; 
      foaf:mbox  PATTERN "\\.fr$" )?   ;
    ( foaf:phone PATTERN "^tel:\\+44" ; 
      foaf:mbox  PATTERN "\\.uk$")?
}

</pre>

            <pre class="shex hljs undefined" style="float:left" aria-busy="false" aria-live="polite"># shapes schema

&lt;SL_11&gt; := Set(PATTERN "^tel:\\+33")
&lt;SL_12&gt; := Set(PATTERN "\\.fr$")
&lt;SL_13&gt; := Set(PATTERN "^tel:\\+44")
&lt;SL_14&gt; := Set(PATTERN "\\.uk$")
&lt;SL_15&gt; := IRI

&lt;EmployeeShape&gt; := {
    Set(PATTERN "^http:/example.org/.*")

    AND 

    {foaf:phone} &lt;SL_15&gt;* ;
    {foaf:mbox}  &lt;SL_15&gt;

    AND 

    ( {foaf:phone} &lt;SL_11&gt; ;
      {foaf:mbox}  &lt;SL_12&gt; )? ;
    ( {foaf:phone} &lt;SL_13&gt; ;
      {foaf:mbox}  &lt;SL_14&gt; )?

}

</pre>
            <div style="clear:both;"> </div>

          </div>
          <script type="text/javascript">
            <!--
            prepareHighlight([], "highlight1", "lowlight1");
            prepareHighlight(["hl-nc"], "highlight2", "lowlight2");
            prepareHighlight(["hl-te1", "hl-te2"], "highlight3", "lowlight3");
            prepareHighlight(["hl-conj"], "highlight4", "lowlight4");
            -->
          </script>
        </div>
      </section>

      <section id="compilation-example-negated-triple-constraint" typeof="bibo:Chapter" resource="#compilation-example-negated-triple-constraint" property="bibo:hasPart">
        <h4 id="h-compilation-example-negated-triple-constraint" resource="#h-compilation-example-negated-triple-constraint"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.1.5 </span>Negated triple expression</span>
        </h4>
        <div class="example">
          <div class="with-highlight">

            <p>
              The <span class="hl-negte lowlight4">negated triple constraint</span> is treated as if <span class="hl-prop lowlight2">its property</span> was an <span class="hl-prop lowlight2">extra property</span>. The corresponding <span class="hl-negte lowlight4">triple constraint in the translation</span> has a <span class="hl-zerocard lowlight3">{0,0} cardinality</span>.
            </p>

            <pre class="shex hljs undefined" style="float:left" aria-busy="false" aria-live="polite"># ShEx schema

&lt;SomeShape&gt; 
CLOSED {
    ex:p xsd:int* ;
    ( ex:q xsd:int {0,0}  
      | ex:r IRI )? 
}
</pre>
            <pre class="shex hljs undefined" style="float:left" aria-busy="false" aria-live="polite"># shapes schema

&lt;SL_9&gt;  := xsd:int
&lt;SL_10&gt; := IRI
&lt;SL_Extra&gt; := NOT xsd:int

&lt;SomeShape&gt; := { 
    {ex:p}  &lt;SL_9&gt;* ;
    ( {ex:q}  &lt;SL_9&gt;{0,0} 
      | {ex:r} &lt;SL_10&gt; )? ;

    {ex:q}  &lt;SL_Extra&gt;*
}

</pre>
            <div style="clear:both;"></div>

          </div>
          <script type="text/javascript">
            <!--
            prepareHighlight([], "highlight1", "lowlight1");
            prepareHighlight(["hl-prop"], "highlight2", "lowlight2");
            prepareHighlight(["hl-zerocard"], "highlight3", "lowlight3");
            prepareHighlight(["hl-negte"], "highlight4", "lowlight4");
            -->
          </script>
        </div>
      </section>
    </section>
  </section>

  <section class="informative appendix" id="the-application-programming-interface" typeof="bibo:Chapter" resource="#the-application-programming-interface" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-the-application-programming-interface" resource="#h-the-application-programming-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">A. </span>The Application Programming Interface</span>
    </h2>
    <p><em>This section is non-normative.</em></p>

    <p>This API provides a clean mechanism that enables developers to determine conformance of <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graphs</a> to a ShEx <a href="#dfn-schema" class="internalDFN" data-link-type="dfn">Schema</a>.</p>

    <p>The JSON-LD API uses <a href="#dfn-promise" class="internalDFN" data-link-type="dfn">Promises</a> to represent the result of the various asynchronous operations.
      <a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-promise-objects">Promises</a> are defined in [<cite><a class="bibref" href="#bib-ECMASCRIPT-6.0">ECMASCRIPT-6.0</a></cite>]. General use within specifications can be found in [<cite><a class="bibref" href="#bib-promises-guide">promises-guide</a></cite>].</p>

    <section class="informative" id="the-shexprocessor-interface" typeof="bibo:Chapter" resource="#the-shexprocessor-interface" property="bibo:hasPart">
      <h3 id="h-the-shexprocessor-interface" resource="#h-the-shexprocessor-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.1 </span>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-shexprocessor" data-idl="" data-title="ShExProcessor"><code>ShExProcessor</code></dfn> Interface</span>
      </h3>
      <p><em>This section is non-normative.</em></p>

      <p>The <a href="#dom-shexprocessor" class="internalDFN" data-link-type="dfn"><code>ShExProcessor</code></a> interface is the high-level programming structure that developers use to access the JSON-LD transformation methods.</p>

      <p>The <a href="#dom-shexprocessor" class="internalDFN" data-link-type="dfn"><code>ShExProcessor</code></a> interface is the high-level programming structure that developers use to determine conformance of <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graphs</a> to a ShEx <a href="#dfn-schema" class="internalDFN" data-link-type="dfn">Schema</a>.</p>

      <p>It is important to highlight that implementations do not modify the input parameters. If an error is detected, the <a href="#dfn-promise" class="internalDFN" data-link-type="dfn">Promise</a> is rejected passing a <a href="#dom-shexerror" class="internalDFN" data-link-type="dfn"><code>ShExError</code></a> with the corresponding error
        <a data-link-for="ShExError" href="#dom-shexerror-code" class="internalDFN" data-link-type="dfn"><code>code</code></a>.</p>

      <pre class="def idl"><span class="idlInterface" id="idl-def-shexprocessor" data-idl="" data-title="ShExProcessor">[<span class="idlCtor"><span class="extAttrName"><a href="https://www.w3.org/TR/WebIDL-1/#Constructor">Constructor</a></span></span>]
interface <span class="idlInterfaceID"><a data-lt="ShExProcessor" href="#dom-shexprocessor" class="internalDFN" data-link-type="dfn" data-for=""><code>ShExProcessor</code></a></span> {
<span class="idlMethod" id="idl-def-shexprocessor-validate(schema,graph,shapemap,options)" data-idl="" data-title="validate" data-dfn-for="shexprocessor">    <span class="idlMethType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-promise">Promise</a></span> <span class="idlMethName"><a data-lt="validate" href="#dom-shexprocessor-validate" class="internalDFN" data-link-type="dfn" data-for="ShExProcessor"><code>validate</code></a></span>(<span class="idlParam"><span class="idlParamType">(<a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a> or <a href="#dom-rdfgraph" class="internalDFN" data-link-type="dfn"><code>RDFGraph</code></a>)</span> <span class="idlParamName">schema</span></span>,
                     <span class="idlParam"><span class="idlParamType">(<a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a> or <a href="#dom-rdfgraph" class="internalDFN" data-link-type="dfn"><code>RDFGraph</code></a>)</span> <span class="idlParamName">graph</span></span>,
                     <span class="idlParam"><span class="idlParamType"><a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a></span> <span class="idlParamName">shapeMap</span></span>,
                     <span class="idlParam">optional <span class="idlParamType"><a href="#dom-shexoptions" class="internalDFN" data-link-type="dfn"><code>ShExOptions</code></a>?</span> <span class="idlParamName">options</span></span>);</span>
};</span></pre>

      <dl>
        <dt><dfn data-lt-nodefault="" data-dfn-for="shexprocessor" data-dfn-type="dfn" data-lt="validate|validate()|validate" id="dom-shexprocessor-validate" data-idl="" data-title="validate"><code>validate</code></dfn></dt>
        <dd>
          Checks <a href="#dfn-conform" class="internalDFN" data-link-type="dfn">conformance</a> of the given <a data-lt="ShExProcessor.validate.graph" href="#dfn-shexprocessor.validate.graph" class="internalDFN" data-link-type="dfn">validate.graph</a> with <a data-lt="ShExProcessor.validate.schema" href="#dfn-shexprocessor.validate.schema" class="internalDFN" data-link-type="dfn">validate.schema</a> using
          <a data-lt="ShExProcessor.validate.shapeMap" href="#dfn-shexprocessor.validate.shapemap" class="internalDFN" data-link-type="dfn">validate.shapeMap</a> according to
          <a href="#validation-requirement" class="sectionRef sec-ref">section <span class="secno">5.6.1</span> <span class="sec-title">Schema Validation Requirement</span></a>.

          <ol class="algorithm">
            <li>Create a new <a href="#dfn-promise" class="internalDFN" data-link-type="dfn">Promise</a> <em>promise</em> and return it. The following steps are then executed asynchronously.</li>
            <li>If <a data-lt="ShExProcessor.validate.schema" href="#dfn-shexprocessor.validate.schema" class="internalDFN" data-link-type="dfn">validate.schema</a> has the form of an <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>, set <em>schema</em> to the result of dereferencing the IRI, treating the result as <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a>, <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a>, or some other RDF serialization, depending on the content-type of the result, and transforming into the <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> abstract syntax for processing.</li>
            <li>Otherwise, if a <a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a>, <a data-lt="ShExProcessor.validate.schema" href="#dfn-shexprocessor.validate.schema" class="internalDFN" data-link-type="dfn">validate.schema</a> is treated as a string, and parsed into the <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> abstract syntax, using
              <a data-link-for="ShExOptions" href="#dom-shexoptions-format" class="internalDFN" data-link-type="dfn"><code>format</code></a> as a hint to determine the content-type.
            </li>
            <li>Otherwise, if an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graph</a>, <a href="#dfn-schema" class="internalDFN" data-link-type="dfn">schema</a> is transforming into the <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> abstract syntax for processing.</li>
            <li>If <a data-lt="ShExProcessor.validate.schema" href="#dfn-shexprocessor.validate.schema" class="internalDFN" data-link-type="dfn">validate.schema</a> is parsed as <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a>, and a syntax error is found, reject <em>promise</em> passing <a data-link-for="ShExErrorCode" href="#dom-shexerrorcode-syntax error" class="internalDFN" data-link-type="dfn"><code>syntax error</code></a>.</li>
            <li>If a transformation to the <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> abstract syntax does not result in valid ShExJ, reject <em>promise</em>, passing <a data-link-for="ShExErrorCode" href="#dom-shexerrorcode-invalid schema" class="internalDFN" data-link-type="dfn"><code>invalid schema</code></a>.</li>
            <li>If <a data-lt="ShExProcessor.validate.graph" href="#dfn-shexprocessor.validate.graph" class="internalDFN" data-link-type="dfn">validate.graph</a> has the form of an <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>, set <em>graph</em> to the result of dereferencing the IRI, treating the result an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graph</a> serialization, depending on the content-type of the result. Otherwise, <a data-lt="ShExProcessor.validate.graph" href="#dfn-shexprocessor.validate.graph" class="internalDFN" data-link-type="dfn">validate.graph</a> either is an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graph</a>, or a processor should use other means to transform it into an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graph</a>.</li>
            <li>Process <em>schema</em> and <em>graph</em> according to the requirements in
              <a href="#validation-requirement" class="sectionRef sec-ref">section <span class="secno">5.6.1</span> <span class="sec-title">Schema Validation Requirement</span></a>, creating <span class="math">shapeResults</span>, a <a href="#dom-shaperesults" class="internalDFN" data-link-type="dfn"><code>ShapeResults</code></a> dictionary based on a copy of <a data-lt="ShExProcessor.validate.shapeMap" href="#dfn-shexprocessor.validate.shapemap" class="internalDFN" data-link-type="dfn">validate.shapeMap</a> with entries added, as necessary, for each focus node <span class="math">f<sub>i</sub></span> in <a data-link-for="ShExOptions" href="#dom-shexoptions-focusnodes" class="internalDFN" data-link-type="dfn"><code>focusNodes</code></a> associated with <code>http://www.w3.org/ns/shex#Start</code> as a <a href="#dfn-shapeexprlabel" class="internalDFN" data-link-type="dfn">shapeExprLabel</a>, a <a href="#dfn-bool" class="internalDFN" data-link-type="dfn">BOOL</a> result value, depending on if the <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a> conforms with the referenced <a data-link-for="" data-lt="shape" href="#dfn-shape" class="internalDFN" data-link-type="dfn">shape(s)</a>, and an optional message, describing details conformance, and <em>promise</em> is fulfilled using <span class="math">shapeResults</span>.</li>
            <li>If <em>graph</em> is found not to <a href="#dfn-conform" class="internalDFN" data-link-type="dfn">conform</a> using
              <em>schema</em> and <a data-lt="ShExProcessor.validate.shapeMap" href="#dfn-shexprocessor.validate.shapemap" class="internalDFN" data-link-type="dfn">validate.shapeMap</a>, reject <em>promise</em>, passing <a data-link-for="ShExErrorCode" href="#dom-shexerrorcode-non-conforming graph" class="internalDFN" data-link-type="dfn"><code>non-conforming graph</code></a> along with <span class="math">shapeResults</span>.</li>
          </ol>

          <dl class="parameters">
            <dt><dfn data-lt-nodefault="" data-dfn-type="dfn" id="dfn-shexprocessor.validate.schema">schema</dfn></dt>
            <dd>The ShEx Schema, either as a dereferencable <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> (URL), an inline data string, or an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graph</a> which is transformed into the <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> abstract syntax.</dd>
            <dt><dfn data-lt-nodefault="" data-dfn-type="dfn" id="dfn-shexprocessor.validate.graph">graph</dfn></dt>
            <dd>The graph to check <a href="#dfn-conform" class="internalDFN" data-link-type="dfn">conformance</a> with, either as a a dereferencable <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> to some RDF serialization, or as an accessable <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graph</a>.</dd>
            <dt><dfn data-lt-nodefault="" data-dfn-type="dfn" id="dfn-shexprocessor.validate.shapemap">shapeMap</dfn></dt>
            <dd>A dictionary mapping a <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a> in <a data-lt="ShExProcessor.validate.graph" href="#dfn-shexprocessor.validate.graph" class="internalDFN" data-link-type="dfn">validate.graph</a> to one ore more <a href="#dfn-shapeexprlabel" class="internalDFN" data-link-type="dfn">shapeExprLabel</a>.</dd>
            <dt><dfn data-lt-nodefault="" data-dfn-type="dfn" id="dfn-shexprocessor.validate.options">options</dfn></dt>
            <dd>A set of options to configure the algorithms.</dd>
          </dl>
        </dd>
      </dl>
    </section>
    <!-- end of ShExProcessor -->

    <section class="informative" id="the-rdfgraph-type" typeof="bibo:Chapter" resource="#the-rdfgraph-type" property="bibo:hasPart">
      <h3 id="h-the-rdfgraph-type" resource="#h-the-rdfgraph-type"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.2 </span>The RDFGraph Type</span>
      </h3>
      <p><em>This section is non-normative.</em></p>

      <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rdfgraph" data-idl="" data-title="RDFGraph"><code>RDFGraph</code></dfn> type is describe an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graph</a> accessed as described in <a href="#graph-access" class="sectionRef">Graph access</a>.</p>

      <pre class="def idl"><span class="idlInterface" id="idl-def-rdfgraph" data-idl="" data-title="RDFGraph">interface <span class="idlInterfaceID"><a data-lt="RDFGraph" href="#dom-rdfgraph" class="internalDFN" data-link-type="dfn" data-for=""><code>RDFGraph</code></a></span> {
<span class="idlMethod" id="idl-def-rdfgraph-bgp()" data-idl="" data-title="bgp" data-dfn-for="rdfgraph">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="bgp" href="#dom-rdfgraph-bgp" class="internalDFN" data-link-type="dfn" data-for="RDFGraph"><code>bgp</code></a></span>();</span>
};</span></pre>

      <dl data-dfn-for="RDFGraph">
        <dt><dfn data-dfn-for="rdfgraph" data-dfn-type="dfn" id="dom-rdfgraph-bgp" data-idl="" data-title="bgp" data-lt="bgp()|bgp"><code>bgp</code></dfn></dt>
        <dd>
          Performs a <a href="https://www.w3.org/TR/sparql11-query/#BGPsparql">SPARQL Basic Graph Pattern</a> query on the graph.
        </dd>
      </dl>
    </section>
    <!-- end RDFGraph -->

    <section class="informative" id="the-shexoptions-type" typeof="bibo:Chapter" resource="#the-shexoptions-type" property="bibo:hasPart">
      <h3 id="h-the-shexoptions-type" resource="#h-the-shexoptions-type"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.3 </span>The ShExOptions Type</span>
      </h3>
      <p><em>This section is non-normative.</em></p>

      <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-shexoptions" data-idl="" data-title="ShExOptions"><code>ShExOptions</code></dfn> type is used to pass various options to the
        <a href="#dom-shexprocessor" class="internalDFN" data-link-type="dfn"><code>ShExProcessor</code></a> methods.</p>

      <pre class="def idl"><span class="idlDictionary" id="idl-def-shexoptions" data-idl="" data-title="ShExOptions">dictionary <span class="idlDictionaryID"><a data-lt="ShExOptions" href="#dom-shexoptions" class="internalDFN" data-link-type="dfn" data-for=""><code>ShExOptions</code></a></span> {
<span class="idlMember" id="idl-def-shexoptions-base" data-idl="" data-title="base" data-dfn-for="shexoptions">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a>?</span> <span class="idlMemberName"><a data-lt="base" href="#dom-shexoptions-base" class="internalDFN" data-link-type="dfn" data-for="ShExOptions"><code>base</code></a></span>;</span>
<span class="idlMember" id="idl-def-shexoptions-focusnodes" data-idl="" data-title="focusNodes" data-dfn-for="shexoptions">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-sequence">sequence</a>?</span>  <span class="idlMemberName"><a data-lt="focusNodes" href="#dom-shexoptions-focusnodes" class="internalDFN" data-link-type="dfn" data-for="ShExOptions"><code>focusNodes</code></a></span>;</span>
<span class="idlMember" id="idl-def-shexoptions-format" data-idl="" data-title="format" data-dfn-for="shexoptions">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a></span>  <span class="idlMemberName"><a data-lt="format" href="#dom-shexoptions-format" class="internalDFN" data-link-type="dfn" data-for="ShExOptions"><code>format</code></a></span> = <span class="idlMemberValue">"ShExC"</span>;</span>
<span class="idlMember" id="idl-def-shexoptions-processingmode" data-idl="" data-title="processingMode" data-dfn-for="shexoptions">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a></span>  <span class="idlMemberName"><a data-lt="processingMode" href="#dom-shexoptions-processingmode" class="internalDFN" data-link-type="dfn" data-for="ShExOptions"><code>processingMode</code></a></span> = <span class="idlMemberValue">"shex-2.0"</span>;</span>
};</span></pre>

      <dl>
        <dt><dfn data-dfn-for="shexoptions" data-dfn-type="dfn" id="dom-shexoptions-base" data-idl="" data-title="base"><code>base</code></dfn></dt>
        <dd>The base IRI to use when parsing <a data-lt="ShExProcessor.validate.schema" href="#dfn-shexprocessor.validate.schema" class="internalDFN" data-link-type="dfn">validate.schema</a>. If set, this overrides the <a data-lt="ShExProcessor.validate.schema" href="#dfn-shexprocessor.validate.schema" class="internalDFN" data-link-type="dfn">validate.schema</a>'s IRI.</dd>
        <dt><dfn data-dfn-for="shexoptions" data-dfn-type="dfn" id="dom-shexoptions-focusnodes" data-idl="" data-title="focusNodes"><code>focusNodes</code></dfn></dt>
        <dd>One or more <a href="#dfn-node" class="internalDFN" data-link-type="dfn">nodes</a> in
          <a data-lt="ShExProcessor.validate.graph" href="#dfn-shexprocessor.validate.graph" class="internalDFN" data-link-type="dfn">validate.graph</a> which are are checked for <a href="#dfn-conform" class="internalDFN" data-link-type="dfn">conformance</a> against <a href="#dfn-start" class="internalDFN" data-link-type="dfn">start</a>.</dd>
        <dt><dfn data-dfn-for="shexoptions" data-dfn-type="dfn" id="dom-shexoptions-format" data-idl="" data-title="format"><code>format</code></dfn></dt>
        <dd>One of <code>ShExC</code> or <code>ShExJ</code>.</dd>
        <dt><dfn data-dfn-for="shexoptions" data-dfn-type="dfn" id="dom-shexoptions-processingmode" data-idl="" data-title="processingMode"><code>processingMode</code></dfn></dt>
        <dd>If set to <code>shex-2.0</code>, the implementation has to produce exactly the same results as the algorithms defined in this specification. If set to another value, the ShEx processor is allowed to extend or modify the algorithms defined in this specification to enable application-specific optimizations. The definition of such optimizations is beyond the scope of this specification and thus not defined. Consequently, different implementations may implement different optimizations. Developers must not define modes beginning with <code>shex</code> as they are reserved for future versions of this specification.</dd>
      </dl>
    </section>
    <!-- end ShExOptions -->

    <section class="informative" id="the-shaperesults-type" typeof="bibo:Chapter" resource="#the-shaperesults-type" property="bibo:hasPart">
      <h3 id="h-the-shaperesults-type" resource="#h-the-shaperesults-type"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.4 </span>The ShapeResults Type</span>
      </h3>
      <p><em>This section is non-normative.</em></p>

      <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-shaperesults" data-idl="" data-title="ShapeResults"><code>ShapeResults</code></dfn> type is used for reporting the result of
        <a href="#dfn-conform" class="internalDFN" data-link-type="dfn">conformance</a> checking of an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graph</a> against a <a href="#dfn-schema" class="internalDFN" data-link-type="dfn">schema</a>.</p>

      <p><a href="#dom-shaperesults" class="internalDFN" data-link-type="dfn"><code>ShapeResults</code></a> is a dictionary mapping a <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a> in
        <a data-lt="ShExProcessor.validate.graph" href="#dfn-shexprocessor.validate.graph" class="internalDFN" data-link-type="dfn">validate.graph</a> to a sequence of <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-shaperesult" data-idl="" data-title="ShapeResult"><code>ShapeResult</code></dfn> entries.</p>

      <pre class="def idl"><span class="idlTypedef" id="idl-def-shaperesults" data-idl="" data-title="ShapeResults">typedef <span class="idlTypedefType">dictionary</span> <span class="idlTypedefID"><a data-lt="ShapeResults" href="#dom-shaperesults" class="internalDFN" data-link-type="dfn" data-for=""><code>ShapeResults</code></a></span>;</span>

<span class="idlDictionary" id="idl-def-shaperesult" data-idl="" data-title="ShapeResult">dictionary <span class="idlDictionaryID"><a data-lt="ShapeResult" href="#dom-shaperesult" class="internalDFN" data-link-type="dfn" data-for=""><code>ShapeResult</code></a></span> {
<span class="idlMember" id="idl-def-shaperesult-shape" data-idl="" data-title="shape" data-dfn-for="shaperesult">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a></span>  <span class="idlMemberName"><a data-lt="shape" href="#dom-shaperesult-shape" class="internalDFN" data-link-type="dfn" data-for="ShapeResult"><code>shape</code></a></span>;</span>
<span class="idlMember" id="idl-def-shaperesult-result" data-idl="" data-title="result" data-dfn-for="shaperesult">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-boolean">boolean</a></span>    <span class="idlMemberName"><a data-lt="result" href="#dom-shaperesult-result" class="internalDFN" data-link-type="dfn" data-for="ShapeResult"><code>result</code></a></span>;</span>
<span class="idlMember" id="idl-def-shaperesult-reason" data-idl="" data-title="reason" data-dfn-for="shaperesult">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a>?</span> <span class="idlMemberName"><a data-lt="reason" href="#dom-shaperesult-reason" class="internalDFN" data-link-type="dfn" data-for="ShapeResult"><code>reason</code></a></span>;</span>
};</span></pre>

      <dl>
        <dt><dfn data-dfn-for="shaperesult" data-dfn-type="dfn" id="dom-shaperesult-shape" data-idl="" data-title="shape"><code>shape</code></dfn></dt>
        <dd>A <a href="#dfn-shapeexprlabel" class="internalDFN" data-link-type="dfn">shapeExprLabel</a> in <a data-lt="ShExProcessor.validate.schema" href="#dfn-shexprocessor.validate.schema" class="internalDFN" data-link-type="dfn">validate.schema</a> against which <a href="#dfn-node" class="internalDFN" data-link-type="dfn">node</a> <a href="#dfn-conform" class="internalDFN" data-link-type="dfn">conformance</a> was checked.</dd>
        <dt><dfn data-dfn-for="shaperesult" data-dfn-type="dfn" id="dom-shaperesult-result" data-idl="" data-title="result"><code>result</code></dfn></dt>
        <dd>The result of the <a href="#dfn-conform" class="internalDFN" data-link-type="dfn">conformance</a> check.</dd>
        <dt><dfn data-dfn-for="shaperesult" data-dfn-type="dfn" id="dom-shaperesult-reason" data-idl="" data-title="reason"><code>reason</code></dfn></dt>
        <dd>An optional message describing the result of the <a href="#dfn-conform" class="internalDFN" data-link-type="dfn">conformance</a> check.</dd>
      </dl>
    </section>
    <!-- end ShExOptions -->

    <section class="informative" id="error-handling" typeof="bibo:Chapter" resource="#error-handling" property="bibo:hasPart">
      <h3 id="h-error-handling" resource="#h-error-handling"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.5 </span>Error Handling</span>
      </h3>
      <p><em>This section is non-normative.</em></p>

      <p>This section describes the datatype definitions used within the ShEx API for error handling.</p>

      <section id="shexerror" typeof="bibo:Chapter" resource="#shexerror" property="bibo:hasPart">
        <h4 id="h-shexerror" resource="#h-shexerror"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.5.1 </span>ShExError</span>
        </h4>

        <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-shexerror" data-idl="" data-title="ShExError"><code>ShExError</code></dfn> type is used to report processing errors.</p>

        <pre class="def idl"><span class="idlDictionary" id="idl-def-shexerror" data-idl="" data-title="ShExError">dictionary <span class="idlDictionaryID"><a data-lt="ShExError" href="#dom-shexerror" class="internalDFN" data-link-type="dfn" data-for=""><code>ShExError</code></a></span> {
<span class="idlMember" id="idl-def-shexerror-code" data-idl="" data-title="code" data-dfn-for="shexerror">    <span class="idlMemberType"><a href="#dom-shexerrorcode" class="internalDFN" data-link-type="dfn"><code>ShExErrorCode</code></a></span> <span class="idlMemberName"><a data-lt="code" href="#dom-shexerror-code" class="internalDFN" data-link-type="dfn" data-for="ShExError"><code>code</code></a></span>;</span>
<span class="idlMember" id="idl-def-shexerror-message" data-idl="" data-title="message" data-dfn-for="shexerror">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-DOMString">DOMString</a>?</span>    <span class="idlMemberName"><a data-lt="message" href="#dom-shexerror-message" class="internalDFN" data-link-type="dfn" data-for="ShExError"><code>message</code></a></span> = <span class="idlMemberValue">null</span>;</span>
};</span></pre>

        <dl>
          <dt><dfn data-dfn-for="shexerror" data-dfn-type="dfn" id="dom-shexerror-code" data-idl="" data-title="code"><code>code</code></dfn></dt>
          <dd>a string representing the particular error type, as described in the various algorithms in this document.</dd>
          <dt><dfn data-dfn-for="shexerror" data-dfn-type="dfn" id="dom-shexerror-message" data-idl="" data-title="message"><code>message</code></dfn></dt>
          <dd>an optional error message containing additional debugging information. The specific contents of error messages are outside the scope of this specification.
          </dd>
        </dl>
      </section>

      <section class="informative" id="shexerrorcode" typeof="bibo:Chapter" resource="#shexerrorcode" property="bibo:hasPart">
        <h4 id="h-shexerrorcode" resource="#h-shexerrorcode"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.5.2 </span>ShExErrorCode</span>
        </h4>
        <p><em>This section is non-normative.</em></p>
        <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-shexerrorcode" data-idl="" data-title="ShExErrorCode"><code>ShExErrorCode</code></dfn> represents the collection of valid ShEx error codes.
        </p>

        <pre class="def idl"><span class="idlEnum" id="idl-def-shexerrorcode" data-idl="" data-title="ShExErrorCode">enum <span class="idlEnumID"><a data-lt="ShExErrorCode" href="#dom-shexerrorcode" class="internalDFN" data-link-type="dfn" data-for=""><code>ShExErrorCode</code></a></span> {
    <a href="#dom-shexerrorcode-invalid schema" class="idlEnumItem">"invalid schema"</a>,
    <a href="#dom-shexerrorcode-non-conforming graph" class="idlEnumItem">"non-conforming graph"</a>,
    <a href="#dom-shexerrorcode-syntax error" class="idlEnumItem">"syntax error"</a>
};</span></pre>

        <dl data-dfn-for="ShExErrorCode">
          <dt><dfn data-dfn-for="shexerrorcode" data-dfn-type="dfn" id="dom-shexerrorcode-invalid schema" data-idl="" data-title="invalid schema"><code>invalid schema</code></dfn></dt>
          <dd>The <a data-lt="ShExProcessor.validate.schema" href="#dfn-shexprocessor.validate.schema" class="internalDFN" data-link-type="dfn">validate.schema</a> argument to <a data-lt="ShExProcessor.validate" href="#dom-shexprocessor-validate" class="internalDFN" data-link-type="dfn"><code>validate</code></a> is invalid.
            <span class="ednote">@gkellogg: This could use some improvement.</span></dd>
          <dt><dfn data-dfn-for="shexerrorcode" data-dfn-type="dfn" id="dom-shexerrorcode-non-conforming graph" data-idl="" data-title="non-conforming graph"><code>non-conforming graph</code></dfn></dt>
          <dd>The <a data-lt="ShExProcessor.validate.graph" href="#dfn-shexprocessor.validate.graph" class="internalDFN" data-link-type="dfn">validate.graph</a> is found not to <a href="#dfn-conform" class="internalDFN" data-link-type="dfn">conform</a> with
            <a data-lt="ShExProcessor.validate.schema" href="#dfn-shexprocessor.validate.schema" class="internalDFN" data-link-type="dfn">validate.schema</a>.</dd>
          <dt><dfn data-dfn-for="shexerrorcode" data-dfn-type="dfn" id="dom-shexerrorcode-syntax error" data-idl="" data-title="syntax error"><code>syntax error</code></dfn></dt>
          <dd>Parsing <a data-lt="ShExProcessor.validate.schema" href="#dfn-shexprocessor.validate.schema" class="internalDFN" data-link-type="dfn">validate.schema</a> as
            <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a> failed with a syntax error.</dd>
        </dl>
      </section>
    </section>
    <!-- end of Error Handling -->
  </section>

  <section id="shexj" class="appendix" typeof="bibo:Chapter" resource="#shexj" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-shexj" resource="#h-shexj"><span property="xhv:role" resource="xhv:heading"><span class="secno">B. </span>ShEx JSON Syntax (ShExJ)</span>
    </h2>

    <p>
      This section defines a set of properties and permitted values for describing Shape Expressions in JSON [<cite><a class="bibref" href="#bib-RFC7159">RFC7159</a></cite>], and how these properties should be interpreted by applications.
    </p>

    <p>
      A ShExJ document is a JSON-LD [[!!JSON-LD]] document uses a proscribed structure which holds an object at the top level. This object describes a <a href="#dfn-schema" class="internalDFN" data-link-type="dfn">schema</a> containing
      <a href="#dfn-shape-expression" class="internalDFN" data-link-type="dfn">shape expressions</a> and <a href="#dfn-triple-expression" class="internalDFN" data-link-type="dfn">triple expressions</a>. A ShExJ document
      <em class="rfc2119" title="MUST">MUST</em> include a <code>@context</code> property referencing <code>http://shex.io/context.jsonld</code>, and <em class="rfc2119" title="MAY">MAY</em> include additional contexts and term definitions. In the absense of a top-level <code>@context</code>, ShEx Processors <em class="rfc2119" title="MUST">MUST</em> act as if a <code>@context</code> property is present with the value <code>http://shex.io/context.jsonld</code>.
    </p>

    <p>A ShExJ document can also be thought of as the serialization of an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graph</a> using the Shape Expression Vocabulary [<cite><a class="bibref" href="#bib-shex-vocab">shex-vocab</a></cite>] which conforms to the shape defined in <a href="#shexr" class="secionRef sec-ref"><span class="secno">C.</span> <span class="sec-title">ShEx Shape</span></a>. Processors <em class="rfc2119" title="MAY">MAY</em> choose to interpret a ShExJ document as an RDF Graph and process using RDF Graph semantics. Processors may also transform arbitrary RDF Graphs conforming to <a href="#shexr" class="secionRef sec-ref"><span class="secno">C.</span> <span class="sec-title">ShEx Shape</span></a> into ShExJ using a mechanism not described within this specification.</p>

    <p>In ShExJ, the unbounded cardinality constraint is <code>-1</code>, rather than <code>"*"</code>.</p>

    <p>
      This is the complete grammar for <dfn data-dfn-type="dfn" id="dfn-shexj">ShExJ</dfn>.
    </p>
    <div class="shexjTable">
      <table class="shexj">
        <tbody>
          <tr class="obj">
            <th class="obj"><a href="#dfn-schema" class="internalDFN" data-link-type="dfn">Schema</a></th>
            <td>{</td>
            <td><dfn class="param" data-dfn-type="dfn" id="dfn-prefixes">prefixes</dfn>:{<a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">PREFIX</a>-&gt;<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>}? <span class="param">base</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>? <span class="param">startActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? <a class="param internalDFN" href="#dfn-start" data-link-type="dfn">start</a>:<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>? <a class="param internalDFN" href="#dfn-shapes" data-link-type="dfn">shapes</a>:{<a class="nobref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a>-&gt;<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>}? }</td>
          </tr>
          <tr class="nob">
            <th class="nob"><a href="#dfn-shapeexprlabel" class="internalDFN" data-link-type="dfn">shapeExprLabel</a></th>
            <td>=</td>
            <td><a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> | <a href="#dfn-bnode" class="internalDFN" data-link-type="dfn">BNODE</a> ;</td>
          </tr>
          <tr class="nob">
            <th class="nob"><a href="#dfn-shapeexpr" class="internalDFN" data-link-type="dfn">shapeExpr</a></th>
            <td>=</td>
            <td><a class="objref internalDFN" href="#dfn-shapeor" data-link-type="dfn">ShapeOr</a> | <a class="objref internalDFN" href="#dfn-shapeand" data-link-type="dfn">ShapeAnd</a> | <a class="objref internalDFN" href="#dfn-shapenot" data-link-type="dfn">ShapeNot</a> | <a class="objref internalDFN" href="#dfn-nodeconstraint" data-link-type="dfn">NodeConstraint</a> | <a class="objref internalDFN" href="#dfn-shape" data-link-type="dfn">Shape</a> | <a class="objref internalDFN" href="#dfn-shapeexprref" data-link-type="dfn">ShapeExprRef</a> | <a class="objref internalDFN" href="#dfn-shapeexternal" data-link-type="dfn">ShapeExternal</a> ;</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-shapeor" class="internalDFN" data-link-type="dfn">ShapeOr</a></th>
            <td>{</td>
            <td><span class="param">shapeExprs</span>:[<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>] }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-shapeand" class="internalDFN" data-link-type="dfn">ShapeAnd</a></th>
            <td>{</td>
            <td><span class="param">shapeExprs</span>:[<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>] }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-shapenot" class="internalDFN" data-link-type="dfn">ShapeNot</a></th>
            <td>{</td>
            <td><span class="param">shapeExpr</span>:<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a> }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-shape" class="internalDFN" data-link-type="dfn">Shape</a></th>
            <td>{</td>
            <td><span class="param">virtual</span>:<a href="#dfn-bool" class="internalDFN" data-link-type="dfn">BOOL</a>? <span class="param">closed</span>:<a href="#dfn-bool" class="internalDFN" data-link-type="dfn">BOOL</a>? <span class="param">extra</span>:[<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>]? <span class="param">expression</span>:<a class="nobref internalDFN" href="#dfn-tripleexpr" data-link-type="dfn">tripleExpr</a>? <span class="param">inherit</span>:[<a class="nobref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a>]? <span class="param">semActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-shapeexprref" class="internalDFN" data-link-type="dfn">ShapeExprRef</a></th>
            <td>{</td>
            <td><span class="param">reference</span>:<a href="#dfn-shapeexprlabel" class="internalDFN" data-link-type="dfn">shapeExprLabel</a> }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-shapeexternal" class="internalDFN" data-link-type="dfn">ShapeExternal</a></th>
            <td>{</td>
            <td><span class="comment">/* empty */</span> }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-semact" class="internalDFN" data-link-type="dfn">SemAct</a></th>
            <td>{</td>
            <td><span class="param">name</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> <span class="param">code</span>:<a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a>? }</td>
          </tr>
          <tr class="nob">
            <th class="nob"><a href="#dfn-tripleexpr" class="internalDFN" data-link-type="dfn">tripleExpr</a></th>
            <td>=</td>
            <td><a class="objref internalDFN" href="#dfn-eachof" data-link-type="dfn">EachOf</a> | <a class="objref internalDFN" href="#dfn-oneof" data-link-type="dfn">OneOf</a> | <a class="objref internalDFN" href="#dfn-tripleconstraint" data-link-type="dfn">TripleConstraint</a> | <a class="objref internalDFN" href="#dfn-tripleexprref" data-link-type="dfn">tripleExprRef</a> ;</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-eachof" class="internalDFN" data-link-type="dfn">EachOf</a></th>
            <td>{</td>
            <td><span class="param">expressions</span>:[<a class="nobref internalDFN" href="#dfn-tripleexpr" data-link-type="dfn">tripleExpr</a>] <span class="param">min</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">max</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">semActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? <span class="param">annotations</span>:[<a class="objref internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a>]? }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-oneof" class="internalDFN" data-link-type="dfn">OneOf</a></th>
            <td>{</td>
            <td><span class="param">expressions</span>:[<a class="nobref internalDFN" href="#dfn-tripleexpr" data-link-type="dfn">tripleExpr</a>] <span class="param">min</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">max</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">semActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? <span class="param">annotations</span>:[<a class="objref internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a>]? }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-tripleexprref" class="internalDFN" data-link-type="dfn">tripleExprRef</a></th>
            <td>{</td>
            <td><span class="param">include</span>:<a class="nobref internalDFN" href="#dfn-shapeexprlabel" data-link-type="dfn">shapeExprLabel</a> }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-tripleconstraint" class="internalDFN" data-link-type="dfn">TripleConstraint</a></th>
            <td>{</td>
            <td><span class="param">inverse</span>:<a href="#dfn-bool" class="internalDFN" data-link-type="dfn">BOOL</a>? <a class="param internalDFN" href="#dfn-predicate" data-link-type="dfn">predicate</a>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> <span class="param">valueExpr</span>:<a class="nobref internalDFN" href="#dfn-shapeexpr" data-link-type="dfn">shapeExpr</a>? <span class="param">min</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">max</span>:<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a>? <span class="param">semActs</span>:[<a class="objref internalDFN" href="#dfn-semact" data-link-type="dfn">SemAct</a>]? <span class="param">annotations</span>:[<a class="objref internalDFN" href="#dfn-annotation" data-link-type="dfn">Annotation</a>]? }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-nodeconstraint" class="internalDFN" data-link-type="dfn">NodeConstraint</a></th>
            <td>{</td>
            <td><span class="param">nodeKind</span>:(<span class="literal">"iri"</span> | <span class="literal">"bnode"</span> | <span class="literal">"nonliteral"</span> | <span class="literal">"literal"</span>)? <span class="param">datatype</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a>? <a class="nobref internalDFN" href="#dfn-xsfacet" data-link-type="dfn">xsFacet</a>* <span class="param">values</span>:[<a class="nobref internalDFN" href="#dfn-valuesetvalue" data-link-type="dfn">valueSetValue</a>]? }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-annotation" class="internalDFN" data-link-type="dfn">Annotation</a></th>
            <td>{</td>
            <td><a class="param internalDFN" href="#dfn-predicate" data-link-type="dfn">predicate</a>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> <span class="param">object</span>:<a class="nobref internalDFN" href="#dfn-objectvalue" data-link-type="dfn">objectValue</a> }</td>
          </tr>
          <tr class="nob">
            <th class="nob"><a href="#dfn-xsfacet" class="internalDFN" data-link-type="dfn">xsFacet</a></th>
            <td>=</td>
            <td><a class="nobref internalDFN" href="#dfn-stringfacet" data-link-type="dfn">stringFacet</a> | <a class="nobref internalDFN" href="#dfn-numericfacet" data-link-type="dfn">numericFacet</a> ;</td>
          </tr>
          <tr class="nob">
            <th class="nob"><a href="#dfn-stringfacet" class="internalDFN" data-link-type="dfn">stringFacet</a></th>
            <td>=</td>
            <td>(<span class="param">"length"</span>|<span class="param">"minlength"</span>|<span class="param">"maxlength"</span>):<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a> | <span class="param">pattern</span>:<a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a> ;</td>
          </tr>
          <tr class="nob">
            <th class="nob"><a href="#dfn-numericfacet" class="internalDFN" data-link-type="dfn">numericFacet</a></th>
            <td>=</td>
            <td>(<span class="param">"mininclusive"</span>|<span class="param">"minexclusive"</span>|<span class="param">"maxinclusive"</span>|<span class="param">"maxexclusive"</span>):<a class="nobref internalDFN" href="#dfn-numericliteral" data-link-type="dfn">numericLiteral</a> </td>
          </tr>
          <tr>
            <th></th>
            <td>|</td>
            <td>(<span class="param">"totaldigits"</span>|<span class="param">"fractiondigits"</span>):<a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a> ;</td>
          </tr>
          <tr class="nob">
            <th class="nob"><a href="#dfn-numericliteral" class="internalDFN" data-link-type="dfn">numericLiteral</a></th>
            <td>=</td>
            <td><a href="#dfn-integer" class="internalDFN" data-link-type="dfn">INTEGER</a> | <a href="#dfn-decimal" class="internalDFN" data-link-type="dfn">DECIMAL</a> | <a href="#dfn-double" class="internalDFN" data-link-type="dfn">DOUBLE</a> ;</td>
          </tr>
          <tr class="nob">
            <th class="nob"><a href="#dfn-objectvalue" class="internalDFN" data-link-type="dfn">objectValue</a></th>
            <td>=</td>
            <td><a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> | <a href="#dfn-string" class="internalDFN" data-link-type="dfn">STRING</a> | <a href="#dfn-datatype_string" class="internalDFN" data-link-type="dfn">DATATYPE_STRING</a> | <a href="#dfn-lang_string" class="internalDFN" data-link-type="dfn">LANG_STRING</a> ;</td>
          </tr>
          <tr class="nob">
            <th class="nob"><a href="#dfn-valuesetvalue" class="internalDFN" data-link-type="dfn">valueSetValue</a></th>
            <td>=</td>
            <td><a class="nobref internalDFN" href="#dfn-objectvalue" data-link-type="dfn">objectValue</a> | <a class="objref internalDFN" href="#dfn-stem" data-link-type="dfn">Stem</a> | <a class="objref internalDFN" href="#dfn-stemrange" data-link-type="dfn">StemRange</a> ;</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-stem" class="internalDFN" data-link-type="dfn">Stem</a></th>
            <td>{</td>
            <td><span class="param">stem</span>:<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-stemrange" class="internalDFN" data-link-type="dfn">StemRange</a></th>
            <td>{</td>
            <td><span class="param">stem</span>:(<a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> | <a class="objref internalDFN" href="#dfn-wildcard" data-link-type="dfn">Wildcard</a>) <span class="param">exclusions</span>:[<a class="nobref internalDFN" href="#dfn-valuesetvalue" data-link-type="dfn">valueSetValue</a>]? }</td>
          </tr>
          <tr class="obj">
            <th class="obj"><a href="#dfn-wildcard" class="internalDFN" data-link-type="dfn">Wildcard</a></th>
            <td>{</td>
            <td><span class="comment">/* empty */</span> }</td>
          </tr>
          <tr style="background-color:white; border-left: thin solid white; border-right: thin solid white; ">
            <th colspan="1" style="text-align: left;">Terminals</th>
            <td></td>
            <td>constrained by the <a href="#terminals">terminal rules in the compact syntax</a></td>
          </tr>
          <tr class="trm">
            <th class="trm"><a href="#dfn-prefixes" class="internalDFN" data-link-type="dfn">PREFIX</a></th>
            <td>:</td>
            <td><a class="grammarRef" href="#term-PN_PREFIX">PN_PREFIX</a></td>
          </tr>
          <tr class="trm">
            <th class="trm"><a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a></th>
            <td>:</td>
            <td>( [^#0000- &lt;&gt;\"{}|^`\\] | <span class="prod"><a class="grammarRef" href="#term-UCHAR">UCHAR</a></span> )* <span class="comment"># (<a class="grammarRef" href="#term-IRIREF">IRIREF</a> without the enclosing "&lt;&gt;"s)</span></td>
          </tr>
          <tr class="trm">
            <th class="trm"><a href="#dfn-bnode" class="internalDFN" data-link-type="dfn">BNODE</a></th>
            <td>:</td>
            <td><a class="grammarRef" href="#term-BLANK_NODE_LABEL">BLANK_NODE_LABEL</a></td>
          </tr>
          <tr class="trm">
            <th class="trm"><dfn data-dfn-type="dfn" id="dfn-bool">BOOL</dfn></th>
            <td>:</td>
            <td>"true" | "false" <span class="comment"># a JSON boolean value</span></td>
          </tr>
          <tr class="trm">
            <th class="trm"><dfn data-dfn-type="dfn" id="dfn-integer">INTEGER</dfn></th>
            <td>:</td>
            <td><a class="grammarRef" href="#term-INTEGER">INTEGER</a> <span class="comment"># a JSON string matching the lexical form of an integer</span></td>
          </tr>
          <tr class="trm">
            <th class="trm"><dfn data-dfn-type="dfn" id="dfn-decimal">DECIMAL</dfn></th>
            <td>:</td>
            <td><a class="grammarRef" href="#term-DECIMAL">DECIMAL</a> <span class="comment"># a JSON string matching the lexical form of an decimal</span></td>
          </tr>
          <tr class="trm">
            <th class="trm"><dfn data-dfn-type="dfn" id="dfn-double">DOUBLE</dfn></th>
            <td>:</td>
            <td><a class="grammarRef" href="#term-DOUBLE">DOUBLE</a> <span class="comment"># a JSON string matching the lexical form of an double</span></td>
          </tr>
          <tr class="trm">
            <th class="trm"><dfn data-dfn-type="dfn" id="dfn-string">STRING</dfn></th>
            <td>:</td>
            <td>'"' .* '"' <span class="comment"># a JSON string starting and ending with the U+0022 (") character</span></td>
          </tr>
          <tr class="trm">
            <th class="trm"><dfn data-dfn-type="dfn" id="dfn-datatype_string">DATATYPE_STRING</dfn></th>
            <td>:</td>
            <td>'"' .* '"' ( [^#0000- &lt;&gt;\"{}|^`\\] | <span class="prod"><a class="grammarRef" href="#term-UCHAR">UCHAR</a></span> )* <span class="comment"># a JSON string starting with U+0022 ("), followed by the lexical form of the string, then U+0022 U+005E U+005E ("^^) and the <a href="#dfn-iri" class="internalDFN" data-link-type="dfn">IRI</a> of the datatype</span></td>
          </tr>
          <tr class="trm">
            <th class="trm"><dfn data-dfn-type="dfn" id="dfn-lang_string">LANG_STRING</dfn></th>
            <td>:</td>
            <td>'"' .* '"@' <span class="prod"><a class="grammarRef" href="#term-LANGTAG">LANGTAG</a></span> <span class="comment"># a JSON string starting with U+0022 ("), followed by the lexical form of the string, then U+0022 U+0040 ("@) and the <span class="prod"><a class="grammarRef" href="#term-LANGTAG">LANGTAG</a></span></span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </section>


  <section id="shexr" class="appendix informative" typeof="bibo:Chapter" resource="#shexr" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-shexr" resource="#h-shexr"><span property="xhv:role" resource="xhv:heading"><span class="secno">C. </span>ShEx Shape</span>
    </h2>
    <p><em>This section is non-normative.</em></p>

    <p>The following schema describes the form of an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF Graph</a> conforming to a Shape Expression <a href="#dfn-schema" class="internalDFN" data-link-type="dfn">schema</a>, consisten with the description of <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a>.</p>

    <div class="example">
      <div class="example-title marker"><span>Example 1</span><span style="text-transform: none">: ShExR Shape Expression Schema</span></div>
      <pre class="hljs xml" data-oninclude="updateExample" aria-busy="false" aria-live="polite">PREFIX sx: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.w3.org</span>/<span class="hljs-attr">ns</span>/<span class="hljs-attr">shex</span>#&gt;</span>
PREFIX xsd: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.w3.org</span>/<span class="hljs-attr">2001</span>/<span class="hljs-attr">XMLSchema</span>#&gt;</span>
PREFIX rdf: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.w3.org</span>/<span class="hljs-attr">1999</span>/<span class="hljs-attr">02</span>/<span class="hljs-attr">22-rdf-syntax-ns</span>#&gt;</span>
BASE <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.w3.org</span>/<span class="hljs-attr">ns</span>/<span class="hljs-attr">shex</span>#&gt;</span>
start=@<span class="hljs-tag">&lt;<span class="hljs-name">Schema</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">Schema</span>&gt;</span> CLOSED {
  a [sx:Schema] ;
  sx:startActs @<span class="hljs-tag">&lt;<span class="hljs-name">SemActList1Plus</span>&gt;</span>? ;
  sx:start @<span class="hljs-tag">&lt;<span class="hljs-name">shapeExpr</span>&gt;</span>?;
  sx:shapes @<span class="hljs-tag">&lt;<span class="hljs-name">shapeExpr</span>&gt;</span>*
}

<span class="hljs-tag">&lt;<span class="hljs-name">shapeExpr</span>&gt;</span> @<span class="hljs-tag">&lt;<span class="hljs-name">ShapeOr</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">ShapeAnd</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">ShapeNot</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">NodeConstraint</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">Shape</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">ShapeExternal</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">ShapeOr</span>&gt;</span> CLOSED {
  a [sx:ShapeOr] ;
  sx:shapeExprs @<span class="hljs-tag">&lt;<span class="hljs-name">shapeExprList2Plus</span>&gt;</span>
}

<span class="hljs-tag">&lt;<span class="hljs-name">ShapeAnd</span>&gt;</span> CLOSED {
  a [sx:ShapeAnd] ;
  sx:shapeExprs @<span class="hljs-tag">&lt;<span class="hljs-name">shapeExprList2Plus</span>&gt;</span>
}

<span class="hljs-tag">&lt;<span class="hljs-name">ShapeNot</span>&gt;</span> CLOSED {
  a [sx:ShapeNot] ;
  sx:shapeExpr @<span class="hljs-tag">&lt;<span class="hljs-name">shapeExpr</span>&gt;</span>
}

<span class="hljs-tag">&lt;<span class="hljs-name">NodeConstraint</span>&gt;</span> CLOSED {
  a [sx:NodeConstraint] ; 
  sx:nodeKind [sx:iri sx:bnode sx:literal sx:nonliteral]?;
  sx:datatype IRI ? ;
  &amp;<span class="hljs-tag">&lt;<span class="hljs-name">xsFacets</span>&gt;</span>  ;
  sx:values @<span class="hljs-tag">&lt;<span class="hljs-name">valueSetValueList1Plus</span>&gt;</span>? 
}

<span class="hljs-tag">&lt;<span class="hljs-name">Shape</span>&gt;</span> CLOSED {
  a [sx:Shape] ;
  sx:closed [true false]? ;
  sx:extra IRI* ;
  sx:expression @<span class="hljs-tag">&lt;<span class="hljs-name">tripleExpression</span>&gt;</span>? ;
  sx:semActs @<span class="hljs-tag">&lt;<span class="hljs-name">SemActList1Plus</span>&gt;</span>? ;
}

<span class="hljs-tag">&lt;<span class="hljs-name">ShapeExternal</span>&gt;</span> CLOSED {
  a [sx:ShapeExternal] ;
}

<span class="hljs-tag">&lt;<span class="hljs-name">SemAct</span>&gt;</span> CLOSED {
  a [sx:SemAct] ;
  sx:name IRI ;
  sx:code xsd:string?
}

<span class="hljs-tag">&lt;<span class="hljs-name">Annotation</span>&gt;</span> CLOSED {
  a [sx:Annotation] ;
  sx:predicate IRI ;
  sx:object @<span class="hljs-tag">&lt;<span class="hljs-name">objectValue</span>&gt;</span>
}

# <span class="hljs-tag">&lt;<span class="hljs-name">xsFacet</span>&gt;</span> @<span class="hljs-tag">&lt;<span class="hljs-name">stringFacet</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">numericFacet</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">facet_holder</span>&gt;</span> { # hold labeled productions
  $<span class="hljs-tag">&lt;<span class="hljs-name">xsFacets</span>&gt;</span> ( &amp;<span class="hljs-tag">&lt;<span class="hljs-name">stringFacet</span>&gt;</span> | &amp;<span class="hljs-tag">&lt;<span class="hljs-name">numericFacet</span>&gt;</span> )* ;
  $<span class="hljs-tag">&lt;<span class="hljs-name">stringFacet</span>&gt;</span> (
      sx:length xsd:integer
    | sx:minlength xsd:integer
    | sx:maxlength xsd:integer
    | sx:pattern xsd:string ; sx:flags xsd:string?
  );
  $<span class="hljs-tag">&lt;<span class="hljs-name">numericFacet</span>&gt;</span> (
      sx:mininclusive   @<span class="hljs-tag">&lt;<span class="hljs-name">numericLiteral</span>&gt;</span>
    | sx:minexclusive   @<span class="hljs-tag">&lt;<span class="hljs-name">numericLiteral</span>&gt;</span>
    | sx:maxinclusive   @<span class="hljs-tag">&lt;<span class="hljs-name">numericLiteral</span>&gt;</span>
    | sx:maxexclusive   @<span class="hljs-tag">&lt;<span class="hljs-name">numericLiteral</span>&gt;</span>
    | sx:totaldigits    xsd:integer
    | sx:fractiondigits xsd:integer
  )
}
<span class="hljs-tag">&lt;<span class="hljs-name">numericLiteral</span>&gt;</span> xsd:integer OR xsd:decimal OR xsd:double

<span class="hljs-tag">&lt;<span class="hljs-name">valueSetValue</span>&gt;</span> @<span class="hljs-tag">&lt;<span class="hljs-name">objectValue</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">Stem</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">StemRange</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">objectValue</span>&gt;</span> IRI OR LITERAL # rdf:langString breaks on Annotation.object
<span class="hljs-tag">&lt;<span class="hljs-name">Stem</span>&gt;</span> CLOSED { a [sx:Stem]; sx:stem xsd:anyUri }
<span class="hljs-tag">&lt;<span class="hljs-name">StemRange</span>&gt;</span> CLOSED {
  a [sx:StemRange];
  sx:stem xsd:anyUri OR @<span class="hljs-tag">&lt;<span class="hljs-name">Wildcard</span>&gt;</span>;
  sx:exclusion @<span class="hljs-tag">&lt;<span class="hljs-name">objectValue</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">Stem</span>&gt;</span>*
}
<span class="hljs-tag">&lt;<span class="hljs-name">Wildcard</span>&gt;</span> BNODE CLOSED {
  a [sx:Wildcard]
}

<span class="hljs-tag">&lt;<span class="hljs-name">tripleExpression</span>&gt;</span> @<span class="hljs-tag">&lt;<span class="hljs-name">TripleConstraint</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">OneOf</span>&gt;</span> OR @<span class="hljs-tag">&lt;<span class="hljs-name">EachOf</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">OneOf</span>&gt;</span> CLOSED {
  a [sx:OneOf] ;
  sx:min xsd:integer? ;
  sx:max xsd:integer? ;
  sx:expressions @<span class="hljs-tag">&lt;<span class="hljs-name">tripleExpressionList2Plus</span>&gt;</span> ;
  sx:semActs @<span class="hljs-tag">&lt;<span class="hljs-name">SemActList1Plus</span>&gt;</span>? ;
  sx:annotation @<span class="hljs-tag">&lt;<span class="hljs-name">Annotation</span>&gt;</span>*
}

<span class="hljs-tag">&lt;<span class="hljs-name">EachOf</span>&gt;</span> CLOSED {
  a [sx:EachOf] ;
  sx:min xsd:integer? ;
  sx:max xsd:integer? ;
  sx:expressions @<span class="hljs-tag">&lt;<span class="hljs-name">tripleExpressionList2Plus</span>&gt;</span> ;
  sx:semActs @<span class="hljs-tag">&lt;<span class="hljs-name">SemActList1Plus</span>&gt;</span>? ;
  sx:annotation @<span class="hljs-tag">&lt;<span class="hljs-name">Annotation</span>&gt;</span>*
}

<span class="hljs-tag">&lt;<span class="hljs-name">tripleExpressionList2Plus</span>&gt;</span> CLOSED {
  rdf:first @<span class="hljs-tag">&lt;<span class="hljs-name">tripleExpression</span>&gt;</span> ;
  rdf:rest @<span class="hljs-tag">&lt;<span class="hljs-name">tripleExpressionList1Plus</span>&gt;</span>
}
<span class="hljs-tag">&lt;<span class="hljs-name">tripleExpressionList1Plus</span>&gt;</span> CLOSED {
  rdf:first @<span class="hljs-tag">&lt;<span class="hljs-name">tripleExpression</span>&gt;</span> ;
  rdf:rest  [rdf:nil] OR @<span class="hljs-tag">&lt;<span class="hljs-name">tripleExpressionList1Plus</span>&gt;</span>
}

<span class="hljs-tag">&lt;<span class="hljs-name">TripleConstraint</span>&gt;</span> CLOSED {
  a [sx:TripleConstraint] ;
  sx:inverse [true false]? ;
  sx:negated [true false]? ;
  sx:min xsd:integer? ;
  sx:max xsd:integer? ;
  sx:predicate IRI ;
  sx:valueExpr @<span class="hljs-tag">&lt;<span class="hljs-name">shapeExpr</span>&gt;</span>? ;
  sx:semActs @<span class="hljs-tag">&lt;<span class="hljs-name">SemActList1Plus</span>&gt;</span>? ;
  sx:annotation @<span class="hljs-tag">&lt;<span class="hljs-name">Annotation</span>&gt;</span>*
}

<span class="hljs-tag">&lt;<span class="hljs-name">SemActList1Plus</span>&gt;</span> CLOSED {
  rdf:first @<span class="hljs-tag">&lt;<span class="hljs-name">SemAct</span>&gt;</span> ;
  rdf:rest  [rdf:nil] OR @<span class="hljs-tag">&lt;<span class="hljs-name">SemActList1Plus</span>&gt;</span>
}

<span class="hljs-tag">&lt;<span class="hljs-name">shapeExprList2Plus</span>&gt;</span> CLOSED {
  rdf:first @<span class="hljs-tag">&lt;<span class="hljs-name">shapeExpr</span>&gt;</span> ;
  rdf:rest  @<span class="hljs-tag">&lt;<span class="hljs-name">shapeExprList1Plus</span>&gt;</span>
}
<span class="hljs-tag">&lt;<span class="hljs-name">shapeExprList1Plus</span>&gt;</span> CLOSED {
  rdf:first @<span class="hljs-tag">&lt;<span class="hljs-name">shapeExpr</span>&gt;</span> ;
  rdf:rest  [rdf:nil] OR @<span class="hljs-tag">&lt;<span class="hljs-name">shapeExprList1Plus</span>&gt;</span>
}

<span class="hljs-tag">&lt;<span class="hljs-name">valueSetValueList1Plus</span>&gt;</span> CLOSED {
  rdf:first @<span class="hljs-tag">&lt;<span class="hljs-name">valueSetValue</span>&gt;</span> ;
  rdf:rest  [rdf:nil] OR @<span class="hljs-tag">&lt;<span class="hljs-name">valueSetValueList1Plus</span>&gt;</span>
}</pre>
    </div>
  </section>

  <section class="appendix normative" id="iana-considerations" typeof="bibo:Chapter" resource="#iana-considerations" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-iana-considerations" resource="#h-iana-considerations"><span property="xhv:role" resource="xhv:heading"><span class="secno">D. </span>IANA Considerations</span>
    </h2>

    <p>This section has been submitted to the Internet Engineering Steering Group (IESG) for review, approval, and registration with IANA.</p>

    <h2 id="application-shex">application/shex</h2>
    <dl>
      <dt>Type name:</dt>
      <dd>application</dd>
      <dt>Subtype name:</dt>
      <dd>shex</dd>
      <dt>Required parameters:</dt>
      <dd>None</dd>
      <dt>Encoding considerations:</dt>
      <dd>See <a href="https://tools.ietf.org/html/rfc6839#section-3.1">RFC&nbsp;6839, section 3.1</a>.</dd>
      <dt>Security considerations:</dt>
      <dd>Given that <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a> allows the substitution of long IRIs with short terms,
        <a href="#dfn-shexc" class="internalDFN" data-link-type="dfn">ShExC</a> documents may expand considerably when processed and, in the worst case, the resulting data might consume all of the recipient's resources. Applications should treat any data with due skepticism.</dd>
      <dt>Interoperability considerations:</dt>
      <dd>Not Applicable</dd>
      <dt>Published specification:</dt>
      <dd>http://www.w3.org/TR/json-ld</dd>
      <dt>Applications that use this media type:</dt>
      <dd>Any programming environment that requires the exchange of directed graphs. Implementations of JSON-LD have been created for JavaScript, Python, Ruby, PHP, and C++.
      </dd>
      <dt>Additional information:</dt>
      <dd>
        <dl>
          <dt>Magic number(s):</dt>
          <dd>Not Applicable</dd>
          <dt>File extension(s):</dt>
          <dd>.shex</dd>
          <dt>Macintosh file type code(s):</dt>
          <dd>TEXT</dd>
        </dl>
      </dd>
      <dt>Person &amp; email address to contact for further information:</dt>
      <dd>Eric Prud'hommeaux &lt;eric@w3.org&gt;</dd>
      <dt>Intended usage:</dt>
      <dd>Common</dd>
      <dt>Restrictions on usage:</dt>
      <dd>None</dd>
      <dt>Author(s):</dt>
      <dd>Eric Prud'hommeaux, Iovka Boneva, Jose Labra Gayo, Gregg Kellogg, Niklas Lindstr√∂m</dd>
      <dt>Change controller:</dt>
      <dd>W3C</dd>
    </dl>

    <p>Fragment identifiers used with <a href="#application-ld-json">application/ld+json</a> are treated as in RDF syntaxes, as per
      <a href="https://www.w3.org/TR/rdf11-concepts/#section-fragID">RDF 1.1 Concepts and Abstract Syntax</a> [
      <cite><a class="bibref" href="#bib-RDF11-CONCEPTS">RDF11-CONCEPTS</a></cite>].</p>
  </section>

  <section id="security" typeof="bibo:Chapter" resource="#security" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-security" resource="#h-security"><span property="xhv:role" resource="xhv:heading"><span class="secno">E. </span>Security Considerations</span>
    </h2>
    <div class="issue" id="issue-1">
      <div class="issue-title marker" aria-level="3" role="heading" id="h-issue1"><span>Issue 1</span></div>
      <p class="">Consider requirements from <a href="https://w3ctag.github.io/security-questionnaire/">Self-Review Questionnaire: Security and Privacy</a>.</p>
    </div>
    <p>Since <a href="#dfn-shex" class="internalDFN" data-link-type="dfn">ShEx</a> is intended to be a pure data exchange format for validating <a href="#dfn-graph" class="internalDFN" data-link-type="dfn">RDF graphs</a>, the <a href="#dfn-shexj" class="internalDFN" data-link-type="dfn">ShExJ</a> serialization <em class="rfc2119" title="SHOULD NOT">SHOULD NOT</em> be passed through a code execution mechanism such as JavaScript's <code>eval()</code> function to be parsed. An (invalid) document may contain code that, when executed, could lead to unexpected side effects compromising the security of a system.</p>
    <p>See also, <a href="#iana-considerations" class="sectionRef sec-ref">section <span class="secno">D.</span> <span class="sec-title">IANA Considerations</span></a></p>
  </section>

  <section id="idl-index" class="appendix informative" typeof="bibo:Chapter" resource="#idl-index" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-idl-index" resource="#h-idl-index"><span property="xhv:role" resource="xhv:heading"><span class="secno">F. </span>IDL Index</span>
    </h2>
    <p><em>This section is non-normative.</em></p>
    <pre class="idl def"><span class="respec-idl-separator"><span class="idlInterface" data-idl="" data-title="ShExProcessor">[<span class="idlCtor"><span class="extAttrName"><a href="https://www.w3.org/TR/WebIDL-1/#Constructor">Constructor</a></span></span>]
interface <span class="idlInterfaceID"><a data-lt="ShExProcessor" href="#dom-shexprocessor" class="internalDFN" data-link-type="dfn" data-for=""><code>ShExProcessor</code></a></span> {
<span class="idlMethod" data-idl="" data-title="validate" data-dfn-for="shexprocessor">    <span class="idlMethType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-promise">Promise</a></span> <span class="idlMethName"><a data-lt="validate" href="#dom-shexprocessor-validate" class="internalDFN" data-link-type="dfn" data-for="ShExProcessor"><code>validate</code></a></span>(<span class="idlParam"><span class="idlParamType">(<a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a> or <a href="#dom-rdfgraph" class="internalDFN" data-link-type="dfn"><code>RDFGraph</code></a>)</span> <span class="idlParamName">schema</span></span>,
                     <span class="idlParam"><span class="idlParamType">(<a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a> or <a href="#dom-rdfgraph" class="internalDFN" data-link-type="dfn"><code>RDFGraph</code></a>)</span> <span class="idlParamName">graph</span></span>,
                     <span class="idlParam"><span class="idlParamType"><a href="#dfn-shapemap" class="internalDFN" data-link-type="dfn">ShapeMap</a></span> <span class="idlParamName">shapeMap</span></span>,
                     <span class="idlParam">optional <span class="idlParamType"><a href="#dom-shexoptions" class="internalDFN" data-link-type="dfn"><code>ShExOptions</code></a>?</span> <span class="idlParamName">options</span></span>);</span>
};</span>
</span><span class="respec-idl-separator"><span class="idlInterface" data-idl="" data-title="RDFGraph">interface <span class="idlInterfaceID"><a data-lt="RDFGraph" href="#dom-rdfgraph" class="internalDFN" data-link-type="dfn" data-for=""><code>RDFGraph</code></a></span> {
<span class="idlMethod" data-idl="" data-title="bgp" data-dfn-for="rdfgraph">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="bgp" href="#dom-rdfgraph-bgp" class="internalDFN" data-link-type="dfn" data-for="RDFGraph"><code>bgp</code></a></span>();</span>
};</span>
</span><span class="respec-idl-separator"><span class="idlDictionary" data-idl="" data-title="ShExOptions">dictionary <span class="idlDictionaryID"><a data-lt="ShExOptions" href="#dom-shexoptions" class="internalDFN" data-link-type="dfn" data-for=""><code>ShExOptions</code></a></span> {
<span class="idlMember" data-idl="" data-title="base" data-dfn-for="shexoptions">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a>?</span> <span class="idlMemberName"><a data-lt="base" href="#dom-shexoptions-base" class="internalDFN" data-link-type="dfn" data-for="ShExOptions"><code>base</code></a></span>;</span>
<span class="idlMember" data-idl="" data-title="focusNodes" data-dfn-for="shexoptions">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-sequence">sequence</a>?</span>  <span class="idlMemberName"><a data-lt="focusNodes" href="#dom-shexoptions-focusnodes" class="internalDFN" data-link-type="dfn" data-for="ShExOptions"><code>focusNodes</code></a></span>;</span>
<span class="idlMember" data-idl="" data-title="format" data-dfn-for="shexoptions">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a></span>  <span class="idlMemberName"><a data-lt="format" href="#dom-shexoptions-format" class="internalDFN" data-link-type="dfn" data-for="ShExOptions"><code>format</code></a></span> = <span class="idlMemberValue">"ShExC"</span>;</span>
<span class="idlMember" data-idl="" data-title="processingMode" data-dfn-for="shexoptions">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-USVString">USVString</a></span>  <span class="idlMemberName"><a data-lt="processingMode" href="#dom-shexoptions-processingmode" class="internalDFN" data-link-type="dfn" data-for="ShExOptions"><code>processingMode</code></a></span> = <span class="idlMemberValue">"shex-2.0"</span>;</span>
};</span>
</span><span class="respec-idl-separator"><span class="idlTypedef" data-idl="" data-title="ShapeResults">typedef <span class="idlTypedefType">dictionary</span> <span class="idlTypedefID"><a data-lt="ShapeResults" href="#dom-shaperesults" class="internalDFN" data-link-type="dfn" data-for=""><code>ShapeResults</code></a></span>;</span>
</span><span class="respec-idl-separator"><span class="idlDictionary" data-idl="" data-title="ShExError">dictionary <span class="idlDictionaryID"><a data-lt="ShExError" href="#dom-shexerror" class="internalDFN" data-link-type="dfn" data-for=""><code>ShExError</code></a></span> {
<span class="idlMember" data-idl="" data-title="code" data-dfn-for="shexerror">    <span class="idlMemberType"><a href="#dom-shexerrorcode" class="internalDFN" data-link-type="dfn"><code>ShExErrorCode</code></a></span> <span class="idlMemberName"><a data-lt="code" href="#dom-shexerror-code" class="internalDFN" data-link-type="dfn" data-for="ShExError"><code>code</code></a></span>;</span>
<span class="idlMember" data-idl="" data-title="message" data-dfn-for="shexerror">    <span class="idlMemberType"><a href="https://www.w3.org/TR/WebIDL-1/#idl-DOMString">DOMString</a>?</span>    <span class="idlMemberName"><a data-lt="message" href="#dom-shexerror-message" class="internalDFN" data-link-type="dfn" data-for="ShExError"><code>message</code></a></span> = <span class="idlMemberValue">null</span>;</span>
};</span>
</span><span class="respec-idl-separator"><span class="idlEnum" data-idl="" data-title="ShExErrorCode">enum <span class="idlEnumID"><a data-lt="ShExErrorCode" href="#dom-shexerrorcode" class="internalDFN" data-link-type="dfn" data-for=""><code>ShExErrorCode</code></a></span> {
    <a href="#dom-shexerrorcode-invalid schema" class="idlEnumItem">"invalid schema"</a>,
    <a href="#dom-shexerrorcode-non-conforming graph" class="idlEnumItem">"non-conforming graph"</a>,
    <a href="#dom-shexerrorcode-syntax error" class="idlEnumItem">"syntax error"</a>
};</span>
</span></pre>
  </section>


  <section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-references" resource="#h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">G. </span>References</span>
    </h2>

    <section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" property="bibo:hasPart">
      <h3 id="h-normative-references" resource="#h-normative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">G.1 </span>Normative references</span>
      </h3>
      <dl class="bibliography" resource=""><dt id="bib-JSON-LD">[JSON-LD]</dt>
        <dd><a href="https://www.w3.org/TR/json-ld/" property="dc:requires"><cite>JSON-LD 1.0</cite></a>. Manu Sporny; Gregg Kellogg; Markus Lanthaler. W3C. 16 January 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/json-ld/" property="dc:requires">https://www.w3.org/TR/json-ld/</a>
        </dd><dt id="bib-RFC2119">[RFC2119]</dt>
        <dd><a href="https://tools.ietf.org/html/rfc2119" property="dc:requires"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires">https://tools.ietf.org/html/rfc2119</a>
        </dd><dt id="bib-RFC7159">[RFC7159]</dt>
        <dd><a href="https://tools.ietf.org/html/rfc7159" property="dc:requires"><cite>The JavaScript Object Notation (JSON) Data Interchange Format</cite></a>. T. Bray, Ed.. IETF. March 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7159" property="dc:requires">https://tools.ietf.org/html/rfc7159</a>
        </dd><dt id="bib-XML">[XML]</dt>
        <dd><a href="https://www.w3.org/TR/xml" property="dc:requires"><cite>Extensible Markup Language (XML) 1.0 (Fifth Edition)</cite></a>. Tim Bray; Jean Paoli; Michael Sperberg-McQueen; Eve Maler; Fran√ßois Yergeau et al. W3C. 26 November 2008. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xml" property="dc:requires">https://www.w3.org/TR/xml</a>
        </dd><dt id="bib-json-ld">[json-ld]</dt>
        <dd><a href="https://www.w3.org/TR/json-ld/" property="dc:requires"><cite>JSON-LD 1.0</cite></a>. Manu Sporny; Gregg Kellogg; Markus Lanthaler. W3C. 16 January 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/json-ld/" property="dc:requires">https://www.w3.org/TR/json-ld/</a>
        </dd><dt id="bib-rdf11-concepts">[rdf11-concepts]</dt>
        <dd><a href="https://www.w3.org/TR/rdf11-concepts/" property="dc:requires"><cite>RDF 1.1 Concepts and Abstract Syntax</cite></a>. Richard Cyganiak; David Wood; Markus Lanthaler. W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf11-concepts/" property="dc:requires">https://www.w3.org/TR/rdf11-concepts/</a>
        </dd><dt id="bib-rdf11-mt">[rdf11-mt]</dt>
        <dd><a href="https://www.w3.org/TR/rdf11-mt/" property="dc:requires"><cite>RDF 1.1 Semantics</cite></a>. Patrick Hayes; Peter Patel-Schneider. W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf11-mt/" property="dc:requires">https://www.w3.org/TR/rdf11-mt/</a>
        </dd><dt id="bib-rfc4627">[rfc4627]</dt>
        <dd><a href="https://tools.ietf.org/html/rfc4627" property="dc:requires"><cite>The application/json Media Type for JavaScript Object Notation (JSON)</cite></a>. D. Crockford. IETF. July 2006. Informational. URL: <a href="https://tools.ietf.org/html/rfc4627" property="dc:requires">https://tools.ietf.org/html/rfc4627</a>
        </dd><dt id="bib-sparql11-query">[sparql11-query]</dt>
        <dd><a href="https://www.w3.org/TR/sparql11-query/" property="dc:requires"><cite>SPARQL 1.1 Query Language</cite></a>. Steven Harris; Andy Seaborne. W3C. 21 March 2013. W3C Recommendation. URL: <a href="https://www.w3.org/TR/sparql11-query/" property="dc:requires">https://www.w3.org/TR/sparql11-query/</a>
        </dd><dt id="bib-xmlschema-2">[xmlschema-2]</dt>
        <dd><a href="https://www.w3.org/TR/xmlschema-2/" property="dc:requires"><cite>XML Schema Part 2: Datatypes Second Edition</cite></a>. Paul V. Biron; Ashok Malhotra. W3C. 28 October 2004. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xmlschema-2/" property="dc:requires">https://www.w3.org/TR/xmlschema-2/</a>
        </dd><dt id="bib-xpath-functions">[xpath-functions]</dt>
        <dd><a href="https://www.w3.org/TR/xpath-functions/" property="dc:requires"><cite>XQuery 1.0 and XPath 2.0 Functions and Operators (Second Edition)</cite></a>. Ashok Malhotra; Jim Melton; Norman Walsh; Michael Kay. W3C. 14 December 2010. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xpath-functions/" property="dc:requires">https://www.w3.org/TR/xpath-functions/</a>
        </dd><dt id="bib-xpath-functions-31">[xpath-functions-31]</dt>
        <dd><a href="https://www.w3.org/TR/xpath-functions-31/" property="dc:requires"><cite>XPath and XQuery Functions and Operators 3.1</cite></a>. Michael Kay. W3C. 21 March 2017. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xpath-functions-31/" property="dc:requires">https://www.w3.org/TR/xpath-functions-31/</a>
        </dd><dt id="bib-xpath20">[xpath20]</dt>
        <dd><a href="https://www.w3.org/TR/xpath20" property="dc:requires"><cite>XML Path Language (XPath) 2.0 (Second Edition)</cite></a>. Anders Berglund; Scott Boag; Don Chamberlin; Mary Fernandez; Michael Kay; Jonathan Robie; Jerome Simeon et al. W3C. 14 December 2010. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xpath20" property="dc:requires">https://www.w3.org/TR/xpath20</a>
        </dd>
      </dl>
    </section>

    <section id="informative-references" typeof="bibo:Chapter" resource="#informative-references" property="bibo:hasPart">
      <h3 id="h-informative-references" resource="#h-informative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">G.2 </span>Informative references</span>
      </h3>
      <dl class="bibliography" resource=""><dt id="bib-ECMASCRIPT-6.0">[ECMASCRIPT-6.0]</dt>
        <dd><a href="http://www.ecma-international.org/ecma-262/6.0/index.html" property="dc:references"><cite>ECMA-262 6th Edition, The ECMAScript 2015 Language Specification</cite></a>. Allen Wirfs-Brock. Ecma International. June 2015. Standard. URL: <a href="http://www.ecma-international.org/ecma-262/6.0/index.html" property="dc:references">http://www.ecma-international.org/ecma-262/6.0/index.html</a>
        </dd><dt id="bib-RDF11-CONCEPTS">[RDF11-CONCEPTS]</dt>
        <dd><a href="https://www.w3.org/TR/rdf11-concepts/" property="dc:references"><cite>RDF 1.1 Concepts and Abstract Syntax</cite></a>. Richard Cyganiak; David Wood; Markus Lanthaler. W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf11-concepts/" property="dc:references">https://www.w3.org/TR/rdf11-concepts/</a>
        </dd><dt id="bib-WEBIDL">[WEBIDL]</dt>
        <dd><a href="https://www.w3.org/TR/WebIDL-1/" property="dc:references"><cite>Web IDL</cite></a>. Cameron McCormack; Boris Zbarsky; Tobie Langel. W3C. 15 December 2016. W3C Working Draft. URL: <a href="https://www.w3.org/TR/WebIDL-1/" property="dc:references">https://www.w3.org/TR/WebIDL-1/</a>
        </dd><dt id="bib-WebIDL">[WebIDL]</dt>
        <dd><a href="https://www.w3.org/TR/WebIDL-1/" property="dc:references"><cite>Web IDL</cite></a>. Cameron McCormack; Boris Zbarsky; Tobie Langel. W3C. 15 December 2016. W3C Working Draft. URL: <a href="https://www.w3.org/TR/WebIDL-1/" property="dc:references">https://www.w3.org/TR/WebIDL-1/</a>
        </dd><dt id="bib-promises-guide">[promises-guide]</dt>
        <dd><a href="https://www.w3.org/2001/tag/doc/promises-guide" property="dc:references"><cite>Writing Promise-Using Specifications</cite></a>. Domenic Denicola. W3C. 16 February 2016. Finding of the W3C TAG. URL: <a href="https://www.w3.org/2001/tag/doc/promises-guide" property="dc:references">https://www.w3.org/2001/tag/doc/promises-guide</a>
        </dd><dt id="bib-rfc6839">[rfc6839]</dt>
        <dd><a href="https://tools.ietf.org/html/rfc6839" property="dc:references"><cite>Additional Media Type Structured Syntax Suffixes</cite></a>. T. Hansen; A. Melnikov. IETF. January 2013. Informational. URL: <a href="https://tools.ietf.org/html/rfc6839" property="dc:references">https://tools.ietf.org/html/rfc6839</a>
        </dd><dt id="bib-shex-vocab">[shex-vocab]</dt>
        <dd><a href="http://www.w3.org/ns/shex#" property="dc:references"><cite>Shape Expression Vocabulary</cite></a>. Gregg Kellogg.URL: <a href="http://www.w3.org/ns/shex#" property="dc:references">http://www.w3.org/ns/shex#</a>
        </dd><dt id="bib-turtle">[turtle]</dt>
        <dd><a href="https://www.w3.org/TR/turtle/" property="dc:references"><cite>RDF 1.1 Turtle</cite></a>. Eric Prud'hommeaux; Gavin Carothers. W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/turtle/" property="dc:references">https://www.w3.org/TR/turtle/</a>
        </dd><dt id="bib-xml">[xml]</dt>
        <dd><a href="https://www.w3.org/TR/xml" property="dc:references"><cite>Extensible Markup Language (XML) 1.0 (Fifth Edition)</cite></a>. Tim Bray; Jean Paoli; Michael Sperberg-McQueen; Eve Maler; Fran√ßois Yergeau et al. W3C. 26 November 2008. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xml" property="dc:references">https://www.w3.org/TR/xml</a>
        </dd>
      </dl>
    </section>
  </section>
  <p role="navigation" id="back-to-top"><a href="#toc"><abbr title="Back to Top">‚Üë</abbr></a></p>
  <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
</body>
</html>